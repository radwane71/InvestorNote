<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูู ุฃุจูุน ุณูููุ โ ูููุฑุฉ ูุณุชุซูุฑ</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh; padding: 20px; color: #f0f4f8;
        }

        .container { max-width: 780px; margin: 0 auto; }

        .page-header { text-align: center; margin-bottom: 30px; }
        .page-header h1 {
            font-size: 2.2rem; color: #ffffff; font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        }
        .page-header p {
            font-size: 0.95rem; color: #d0e1f9; margin-top: 8px; line-height: 1.6;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }

        .advisor-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1.5px solid rgba(255,255,255,0.15);
            border-radius: 24px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
            margin-bottom: 20px; position: relative; overflow: hidden;
        }
        .advisor-card::before {
            content: ''; position: absolute; top: 0; right: 0; left: 0; height: 5px;
            background: linear-gradient(90deg, #f39c12, #e74c3c, #c0392b);
        }

        .progress-bar-wrap {
            background: rgba(255,255,255,0.08); border-radius: 10px;
            height: 8px; margin-bottom: 20px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .progress-bar-fill {
            height: 100%; background: linear-gradient(90deg, #5a7fb5, #5a9d7a);
            border-radius: 10px; transition: width 0.4s ease; width: 0%;
        }
        .progress-label {
            font-size: 0.78rem; color: #d0e1f9; text-align: left;
            margin-bottom: 6px; direction: ltr; font-weight: 500;
        }

        .question-number {
            font-size: 0.8rem; color: #ffa726; font-weight: bold;
            margin-bottom: 6px; letter-spacing: 0.5px;
        }
        .question-text {
            font-size: 1.15rem; font-weight: bold; color: #ffffff;
            margin-bottom: 6px; line-height: 1.5; text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }
        .question-hint {
            font-size: 0.82rem; color: #c8d6e5; margin-bottom: 20px; line-height: 1.5;
            border-right: 3px solid #f39c12;
            background: rgba(243,156,18,0.12); padding: 10px 12px;
            border-radius: 0 8px 8px 0; backdrop-filter: blur(6px);
        }

        .input-group { margin-bottom: 20px; }
        .input-group input[type="number"] {
            width: 100%; padding: 12px 16px;
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 10px; font-size: 1rem; font-family: inherit;
            color: #ffffff; background: rgba(255,255,255,0.06);
            transition: border-color 0.2s, background 0.2s;
            text-align: right; direction: rtl;
        }
        .input-group input:focus {
            outline: none; border-color: #5a7fb5;
            background: rgba(90,127,181,0.15);
        }
        .input-group input::placeholder { color: rgba(255,255,255,0.4); }

        .choice-buttons { display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }
        .btn-choice {
            width: 100%; padding: 13px 16px; font-size: 0.97rem; font-weight: bold;
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 12px; cursor: pointer;
            background: rgba(255,255,255,0.06); color: #ffffff;
            text-align: right; font-family: inherit;
            transition: border-color 0.2s, background 0.2s, transform 0.15s;
            backdrop-filter: blur(6px);
        }
        .btn-choice:hover {
            border-color: #5a7fb5; background: rgba(90,127,181,0.2);
            transform: translateX(-3px);
        }
        .btn-choice.selected {
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border-color: #4a6fa5;
            box-shadow: 0 4px 12px rgba(90,127,181,0.4);
        }

        .yn-buttons { display: flex; gap: 12px; margin-bottom: 10px; }
        .btn-yes, .btn-no {
            flex: 1; padding: 14px; font-size: 1.05rem; font-weight: bold;
            border: none; border-radius: 12px; cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s; font-family: inherit;
        }
        .btn-yes {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white; box-shadow: 0 4px 12px rgba(39,174,96,0.3);
        }
        .btn-yes:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(39,174,96,0.5); }
        .btn-no {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white; box-shadow: 0 4px 12px rgba(192,57,43,0.3);
        }
        .btn-no:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(192,57,43,0.5); }
        .btn-yes.selected { outline: 3px solid #145a32; }
        .btn-no.selected  { outline: 3px solid #7b241c; }

        .btn-next {
            width: 100%; padding: 13px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: bold; cursor: pointer; font-family: inherit;
            transition: transform 0.15s, box-shadow 0.15s;
            box-shadow: 0 4px 12px rgba(90,127,181,0.3); margin-top: 8px;
        }
        .btn-next:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(90,127,181,0.5); }
        .btn-next:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

        .result-card {
            display: none; border-radius: 24px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            text-align: center;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1.5px solid rgba(255,255,255,0.15);
        }
        .result-icon { font-size: 4rem; margin-bottom: 15px; }
        .result-title { font-size: 1.6rem; font-weight: bold; margin-bottom: 10px; }
        .result-title.sell   { color: #e74c3c; text-shadow: 0 0 10px rgba(231,76,60,0.5); }
        .result-title.hold   { color: #2ecc71; text-shadow: 0 0 10px rgba(46,204,113,0.5); }
        .result-title.review { color: #f39c12; text-shadow: 0 0 10px rgba(243,156,18,0.5); }

        .result-summary {
            font-size: 0.95rem; color: #d0e1f9; line-height: 1.7;
            margin-bottom: 20px; text-align: right;
        }

        .factors-section {
            background: rgba(255,255,255,0.06); border-radius: 12px;
            padding: 18px; margin-bottom: 20px; text-align: right;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .factors-section h4 {
            font-size: 0.95rem; color: #ffffff; font-weight: bold; margin-bottom: 12px;
        }
        .factor-item {
            display: flex; align-items: flex-start; gap: 10px;
            margin-bottom: 8px; font-size: 0.88rem; color: #c8d6e5; line-height: 1.5;
        }
        .factor-dot {
            width: 10px; height: 10px; border-radius: 50%; margin-top: 4px; flex-shrink: 0;
        }
        .dot-sell { background: #e74c3c; }
        .dot-hold { background: #27ae60; }
        .dot-neutral { background: #f39c12; }

        .score-meter { margin: 20px 0; }
        .score-label {
            display: flex; justify-content: space-between;
            font-size: 0.8rem; color: #c8d6e5; margin-bottom: 6px;
        }
        .score-bar-wrap {
            background: rgba(255,255,255,0.08); border-radius: 10px; height: 14px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .score-bar-fill { height: 100%; border-radius: 10px; transition: width 0.6s ease; }
        .score-text { font-size: 0.85rem; color: #d0e1f9; margin-top: 6px; text-align: center; }

        .btn-restart {
            display: inline-block; padding: 12px 30px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 12px;
            font-size: 0.95rem; font-weight: bold; cursor: pointer; font-family: inherit;
            transition: transform 0.15s; margin-top: 10px;
        }
        .btn-restart:hover { transform: translateY(-2px); }

        .back-to-top {
            position: fixed; bottom: 30px; left: 30px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 50%;
            width: 48px; height: 48px; font-size: 1.3rem; cursor: pointer;
            box-shadow: 0 4px 15px rgba(90,127,181,0.4);
            transition: transform 0.3s, opacity 0.3s;
            opacity: 0; pointer-events: none;
            display: flex; align-items: center; justify-content: center; z-index: 999;
        }
        .back-to-top.visible { opacity: 1; pointer-events: auto; }
        .back-to-top:hover { transform: translateY(-3px); }

        .disclaimer-box {
            background: rgba(243,156,18,0.12); border: 2px solid rgba(243,156,18,0.3);
            border-radius: 12px; padding: 14px 16px; margin-top: 20px;
            color: #ffa726; font-weight: bold; font-size: 0.85rem; line-height: 1.6;
            backdrop-filter: blur(6px); text-align: center;
        }

        .override-alert {
            background: rgba(231,76,60,0.15); border: 2px solid #e74c3c;
            border-radius: 12px; padding: 15px; margin-bottom: 20px;
            color: #ffcccc; font-weight: bold; text-align: right; line-height: 1.6;
        }

        @media (max-width: 600px) {
            .page-header h1 { font-size: 1.7rem; }
            .advisor-card { padding: 20px; }
            .question-text { font-size: 1rem; }
            .yn-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>

<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="ุงูุนูุฏุฉ ููุฃุนูู">โ</button>

<div class="container">
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">๐ ูููุฑุฉ ูุณุชุซูุฑ</a>
            <button class="navbar-toggle" onclick="toggleNavbar()">โฐ</button>
            <div class="navbar-menu" id="navbarMenu">
                <a href="index.html" class="navbar-item">๐ ุงูุฑุฆูุณูุฉ</a>
                <a href="advice.html" class="navbar-item calculator">๐ฐ ุตุงูู ุงูุซุฑูุฉ</a>
                <a href="salary_calculator.html" class="navbar-item salary">๐ผ ุชูุณูู ุงูุฑุงุชุจ</a>
                <a href="zakat_purification.html" class="navbar-item zakat">๐ ุงูุฒูุงุฉ</a>
                <a href="financial_freedom.html" class="navbar-item fire">๐ฅ ุงูุญุฑูุฉ ุงููุงููุฉ</a>
                <a href="investor_tips.html" class="navbar-item tips">โ๏ธ ูุตุงุฆุญ</a>
                <a href="snowball_calculator.html" class="navbar-item calculator">โ๏ธ ุงูุนุงุฆุฏ ุงููุฑูุจ</a>
                <a href="emergency_fund_calculator.html" class="navbar-item emergency">๐ก๏ธ ุงูุทูุงุฑุฆ</a>
                <a href="average_calculator.html" class="navbar-item average">๐ ูุชูุณุท ุงูุดุฑุงุก</a>
                <a href="company_valuation.html" class="navbar-item company">๐ข ุชูููู ุงูุดุฑูุฉ</a>
                <a href="retirement_calculator.html" class="navbar-item retirement">๐๏ธ ุงูุชูุงุนุฏ</a>
                <a href="portfolio_rating.html" class="navbar-item portfolio">๐ก๏ธ ุฃูุงู ุงููุญูุธุฉ</a>
                <a href="stock_valuation.html" class="navbar-item calculator">๐ ุชูููู ุงูุฃุณูู</a>
                <a href="dca_calculator.html" class="navbar-item calculator">๐ DCA</a>
                <a href="sell_decision.html" class="navbar-item calculator active">๐ค ูู ุฃุจูุนุ</a>
                <a href="goal_calculator.html" class="navbar-item calculator">๐ฏ ุงููุฏู ุงูุนูุณู</a>
                <a href="allocation_calculator.html" class="navbar-item allocation">โ๏ธ ุชูุฒูุน ุงููุญูุธุฉ</a>
            </div>
        </div>
    </nav>

    <script>
        function toggleNavbar() { document.getElementById('navbarMenu').classList.toggle('open'); }
        document.addEventListener('DOMContentLoaded', function () {
            const raw = window.location.pathname.split('/').pop() || 'index.html';
            const page = raw.split('?')[0].split('#')[0] || 'index.html';
            document.querySelectorAll('.navbar-item').forEach(function (item) {
                item.classList.remove('active');
                const href = (item.getAttribute('href') || '').split('?')[0].split('#')[0];
                if (href === page) item.classList.add('active');
            });
        });
    </script>

    <div class="page-header">
        <h1>๐ค ูู ุฃุจูุน ุณูููุ</h1>
        <p>ุขูุฉ ูุฑุงุฑ ูุงููุฉ ุชูุฒุฌ ุจูู ุงูุฃุณุงุณูุงุช ูุงูุณููู. ุฃุฌุจ ุจุตุฏูุ ูุงุชุฑู ุนูู ุงูุฎูุงุฑุฒููุฉ ุงูุจุงูู.</p>
    </div>

    <div class="advisor-card" id="questionCard">
        <div class="progress-label"><span id="progressText">ุงูุณุคุงู 1 ูู 13</span></div>
        <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressBar"></div></div>
        <div id="questionBody"></div>
    </div>

    <div class="result-card" id="resultCard"></div>

    <div class="disclaimer-box">
        โ๏ธ ูุฐู ุงูุฃุฏุงุฉ ูููุฐุฌ ุชูููู ุฑูุงุถู ูุณูููู ูุจุณุท. ูุง ุชุบูู ุนู ุงูุชุญููู ุงููุงูู ุงูุชูุตููู ุฃู ุงุณุชุดุงุฑุฉ ูุณุชุดุงุฑ ุงุณุชุซูุงุฑ ูุฑุฎุต. ูุฑุงุฑ ุงูุจูุน ูุงูุดุฑุงุก ููุน ุจุงููุงูู ุนูู ูุณุคูููุชู.
    </div>
</div>

<script src="results-engine.js"></script>
<script>
const SellDecisionApp = (function() {
    const questions = [
        { id: 'q1', type: 'choice', text: 'ูุง ูู ุงูุณุจุจ ุงูุฑุฆูุณู ููุจูุท ุงูุณููุ', hint: 'ุงุฎุชุฑ ุงููุตู ุงูุฃูุฑุจ ููุงูุน ุงูุณูู ุงูุญุงูู.', choices: [
            { label: '๐ ุงูุณูู ุจุฃูููู ูุงุจุท ูุณููู ุชุฃุซุฑ ุจุงูุชุจุนูุฉ', weight: 3, hint: 'ุงูุชุณููู ูู ููุฌุงุช ุงูุชุตุญูุญ ุงูุนุงูุฉ ููุณูู ูุฑุงุฑ ุฎุงุทุฆ ุชุงุฑูุฎูุงู.' },
            { label: '๐ฐ ุฅุนูุงู ุฃู ุฎุจุฑ ุณูุจู ูุฎุต ุงูุดุฑูุฉ', weight: -1, hint: 'ุงูุฃุฎุจุงุฑ ุงูุณูุจูุฉ ุชุชุทูุจ ุชูููู ุงูุฃุซุฑ ุงููุนูู ุนูู ุงูุฃุฑุจุงุญ ูููุณ ุงูุณุนุฑ ููุท.' },
            { label: '๐ ุชุฑุงุฌุน ูุนูู ูู ุฃุฑุจุงุญ ุงูุดุฑูุฉ ุฃู ุชูุฒูุนุงุชูุง', weight: -2, hint: 'ุงูุชุฑุงุฌุน ุงูุชุดุบููู ุฅุดุงุฑุฉ ุจููููุฉ ุชุณุชูุฌุจ ูุฑุงุฌุนุฉ ุฌุฏูู ุงูุงุณุชุซูุงุฑ ุจุนูู.' },
            { label: 'โ ูุง ุฃุนุฑู ุงูุณุจุจ', weight: 1, hint: 'ุงูุฌูู ุจุงูุณุจุจ ูุนูู ุฃู ุงููุฑุงุฑ ุงููุงุฏู ุณูููู ุนุงุทููุงู. ุงุจุญุซ ุฃููุงู.' }
        ]},
        { id: 'q2', type: 'number', text: 'ุจูู ุงุดุชุฑูุช ุงูุณููุ (ูุชูุณุท ุงูุชูููุฉ)', hint: 'ุฃุฏุฎู ูุชูุณุท ุงูุณุนุฑ ุจุฏูุฉ.', placeholder: 'ูุซุงู: 45.50', key: 'costPrice' },
        { id: 'q3', type: 'number', text: 'ูู ุงูุณุนุฑ ุงูุญุงูู ููุณูู ุจุงูุณููุ', hint: 'ุฃุฏุฎู ุงูุณุนุฑ ุงูุญุงูู.', placeholder: 'ูุซุงู: 38.00', key: 'currentPrice' },
        { id: 'q4', type: 'choice', text: 'ููู ุชููู ุฑุจุญูุฉ ุงูุดุฑูุฉุ', hint: 'ุฑุงุฌุน ุงูููุงุฆู ุงููุงููุฉ ุงูุฃุฎูุฑุฉ.', choices: [
            { label: 'โ ุชุญูู ุฃุฑุจุงุญุงู ูุณุชูุฑุฉ ุฃู ูุชูุงููุฉ', weight: 3, flag: 'profitable', hint: 'ุงูุฑุจุญูุฉ ุงููุณุชูุฑุฉ ูู ุฎุท ุงูุฏูุงุน ุงูุฃูู ุถุฏ ุชููุจุงุช ุงูุฃุณุนุงุฑ.' },
            { label: '๐ ุฑุงุจุญุฉ ููู ุงูุฃุฑุจุงุญ ุชุฑุงุฌุนุช ูุคุฎุฑุงู', weight: 0, flag: 'declining', hint: 'ูุฌุจ ุงูุชูุฑูุฉ ุจูู ุงูุชุฑุงุฌุน ุงูููุณูู ูุงูุถุนู ุงูููููู ุงููุณุชูุฑ.' },
            { label: 'โ ุชุณุฌู ุฎุณุงุฆุฑ ูุณุชูุฑุฉ ุฃู ุจุงููุงุฏ ุชุชุนุงุฏู', weight: -3, flag: 'losing', hint: 'ุงูุชูุณู ุจุดุฑูุฉ ุฎุงุณุฑุฉ ุจูุง ุฎุทุฉ ุชุนุงูู ูุงุถุญุฉ ูุฏูุฑ ุฑุฃุณ ุงููุงู.' }
        ]},
        { id: 'q5', type: 'choice', text: 'ููู ูู ุณุฌู ุชูุฒูุนุงุช ุงูุฃุฑุจุงุญุ', hint: 'ุชูููู ุขุฎุฑ 3 ุฅูู 5 ุณููุงุช.', choices: [
            { label: '๐ฐ ุชูุฒูุนุงุช ููุชุธูุฉ ููุณุชูุฑุฉ ุฃู ูุชูุงููุฉ', weight: 3, hint: 'ุงูุชูุฒูุน ุงูููุชุธู ูุซุจุช ุฌูุฏุฉ ุงูุชุฏููุงุช ุงูููุฏูุฉ ูุงูุถุจุงุท ุงูุฅุฏุงุฑุฉ.' },
            { label: '๐ ุชูุฒุน ููู ุงููุจุงูุบ ุชุชุฐุจุฐุจ', weight: 1, hint: 'ุชุฐุจุฐุจ ุงูุชูุฒูุน ููุจูู ูู ุงูุดุฑูุงุช ุงูุฏูุฑูุฉ.' },
            { label: 'โฌ๏ธ ุชู ุชูููุต ุงูุชูุฒูุนุงุช ุจูุถูุญ', weight: -2, hint: 'ุฎูุถ ุงูุชูุฒูุนุงุช ูู ุฃููู ุฅุดุงุฑุฉ ูู ุงูุฅุฏุงุฑุฉ ุจูุฌูุฏ ุถุงุฆูุฉ ูุงููุฉ.' },
            { label: '๐ซ ูุง ุชูุฒุน ุฃุฑุจุงุญุงู', weight: -1, hint: 'ุงูุดุฑูุงุช ุงูุชู ูุง ุชูุฒุน ูุฌุจ ุฃู ุชูุธูุฑ ูููุงู ุงุณุชุซูุงุฆูุงู ูุชุจุฑูุฑ ุงูุงุญุชูุงุธ ุจูุง.' }
        ]},
        { id: 'q6', type: 'choice', text: 'ูุง ูู ุญุฌู ุงูุฑุงูุนุฉ ุงููุงููุฉ (ุงูุฏููู) ููุดุฑูุฉุ', hint: 'ุชูุฏูุฑ ุนุงู ููุณุชูู ุงูุฏููู ููุงุณุงู ุจุงูุฃุตูู ูุงูุฃุฑุจุงุญ.', choices: [
            { label: 'โ ุฏููู ููุฎูุถุฉ ุฃู ูุนุฏููุฉ', weight: 2, flag: 'lowDebt', hint: 'ุงูุดุฑูุงุช ููุฎูุถุฉ ุงูุฏููู ุชูุฌู ุจุณูููุฉ ูู ุงูุฑููุฏ ุงูุงูุชุตุงุฏู.' },
            { label: 'โ๏ธ ุฏููู ูุชูุณุทุฉ ููู ุงูุชุฏููุงุช ุชุบุทููุง', weight: 1, flag: 'midDebt', hint: 'ูุฎุงุทุฑุฉ ููุจููุฉ ุชุดุบูููุงู ุทุงููุง ูู ุชุฑุชูุน ุฃุณุนุงุฑ ุงููุงุฆุฏุฉ ุจุดุฏุฉ.' },
            { label: '๐ด ุฏููู ุนุงููุฉ ุฌุฏุงู ูุชุดูู ุนุจุฆุงู', weight: -2, flag: 'highDebt', hint: 'ุงูุฏููู ุงูุนุงููุฉ ูุน ุชุฐุจุฐุจ ุงูุฃุฑุจุงุญ ุชููุฏ ูุฎุทุฑ ุงูุฅููุงุณ ุงููุงูู.' },
            { label: 'โ ูุง ุชูุฌุฏ ูุฏู ูุนูููุงุช', weight: -1, flag: 'unknownDebt', hint: 'ุนุฏู ูุนุฑูุฉ ุญุฌู ุฏููู ุดุฑูุชู ูุนุงุฏู ุงูููุงุฏุฉ ุจุนูููู ูุบูุถุชูู.' }
        ]},
        { id: 'q13', type: 'choice', text: 'ููู ุชุฑู ุชูููู ุงูุณูู (Valuation) ุญุงููุงูุ', hint: 'ุจูุงุกู ุนูู ููุฑุฑุงุช ุงูุฃุฑุจุงุญ ุฃู ุงููููุฉ ุงูุฏูุชุฑูุฉ ุฃู ุงูููุงุฑูุฉ ุจุงููุทุงุน.', choices: [
            { label: '๐ ุฑุฎูุต ุฌุฏุงู ุฃู ูุฑูุจ ูู ุงูุนุงุฏู', weight: 3, hint: 'ุงูุณูู ุฐู ุงูุฃุณุงุณูุงุช ุงููููุฉ ูุงูุชูููู ุงูุฑุฎูุต ูุงุฏุฑุงู ูุง ูููู ูุฑุดุญุงู ููุจูุน.' },
            { label: 'โ๏ธ ุชูููู ูุชูุณุท ูููุจูู', weight: 0, hint: 'ุงูุณุนุฑ ูุง ูุดูู ููุฒุฉ ุฅุถุงููุฉ ููุง ุฎุทุฑุงู ุฌุณููุงู.' },
            { label: '๐ ุบุงูู ุฌุฏุงู ููุงุฑูุฉ ุจูุชุงุฆุฌ ุงูุดุฑูุฉ', weight: -3, hint: 'ุญุชู ุงูุดุฑูุงุช ุงูููุชุงุฒุฉ ุชุตุจุญ ุงุณุชุซูุงุฑุงุช ุณูุฆุฉ ุฅุฐุง ูุงู ุณุนุฑูุง ูุจุงูุบุงู ููู.' },
            { label: 'โ ูู ุฃูู ุจุชููููู', weight: -1, hint: 'ุชุฌุงูู ุงูุชูููู ูุฌุนูู ุนุฑุถุฉ ูุดุฑุงุก ููุงุนุงุช ูุจูุน ููุนุงู.' }
        ]},
        { id: 'q7', type: 'choice', text: 'ูู ุชุญุชุงุฌ ูุชุณููู ูุฐุง ุงูุงุณุชุซูุงุฑ ูุบุฑุถ ูุงูู ุทุงุฑุฆุ', hint: 'ุงูุญุงุฌุฉ ุงููุนููุฉ ููุณูููุฉ ุงูููุฏูุฉ ุงูุขู.', choices: [
            { label: '๐ด ูุนูุ ุงูุชุฒุงู ุถุฑูุฑู ูุง ููุจู ุงูุชุฃุฌูู', weight: 0, isEmergency: true, hint: 'ุชู ุชูุนูู ุงูุชุฌุงูุฒ: ุงูุญุงุฌุฉ ููุณูููุฉ ุงูุทุงุฑุฆุฉ ุชูุฑุถ ุงูุชุณููู ุงูููุฑู.' },
            { label: '๐ก ูุฏ ุฃุญุชุงุฌ ุงูุณูููุฉ ุฎูุงู ุงูุฃุดูุฑ ุงูุณุชุฉ ุงููุงุฏูุฉ', weight: -1, hint: 'ุงูุชุฑุงุจ ููุนุฏ ุงุณุชุญูุงู ูุงูู ูุชุทูุจ ุฎุทุฉ ุชุณููู ุชุฏุฑูุฌูุฉ ูุชุฌูุจ ูุงุน ุงูุณูู.' },
            { label: '๐ข ูุงุ ุงููุจูุบ ูุฎุตุต ููุงุณุชุซูุงุฑ ุทููู ุงูุฃุฌู', weight: 2, hint: 'ุนุฏู ุงูุญุงุฌุฉ ููุณูููุฉ ูุนุทูู ููุฒุฉ ุงูุตุจุฑ ุนูู ุชุฐุจุฐุจุงุช ุงูุณูู.' }
        ]},
        { id: 'q8', type: 'yn', text: 'ูู ููุช ุจูุฑุงุกุฉ ุงูููุงุฆู ุงููุงููุฉ ุงูุฃุฎูุฑุฉ ููุดุฑูุฉุ', hint: 'ูู ุงุทูุนุช ุนูู ุงูุฃุฑูุงู ุงูุญููููุฉ ุฃู ุชุนุชูุฏ ุนูู ุงูุขุฑุงุกุ', weightYes: 1, weightNo: -1,
          hintYes: 'ุงููุฑุงุฑ ุงููุจูู ุนูู ุงูุฃุฑูุงู ูู ุฃุณุงุณ ุงูุงุณุชุซูุงุฑ ุงููุคุณุณู.',
          hintNo: 'ุนุฏู ูุฑุงุกุฉ ุงูููุงุฆู ูุนูู ุฃู ุฃู ูุฑุงุฑ ุจูุน ุงูุขู ูุจูู ุนูู ุงูุนุงุทูุฉ ููุท.' },
        // Q9 ูุฒู ูุงูู = ุตูุฑ. ูุณุชุฎุฏู ููุท ููุชุญูู ุงููุชูุงุทุน ูุน Q2 ู Q3.
        { id: 'q9', type: 'choice', text: 'ูู ุฐูููุ ููู ุชุฑู ูุถุนู ุงูุญุงูู ูุน ุงูุณููุ', hint: 'ููุงุฑูุฉ ูุณุจุฉ ุงูุชุบูุฑ ุจูุงุก ุนูู ุงูุชูููุฉ.', choices: [
            { label: '๐ ุฑุงุจุญ ุจูุณุจุฉ ููุญูุธุฉ (+20% ูุฃูุซุฑ)', weight: 0, bucket: 'up_20', hint: '' },
            { label: 'โ๏ธ ูุฑูุจ ุฌุฏุงู ูู ุฑุฃุณ ุงููุงู ุฃู ุฑุจุญ/ุฎุณุงุฑุฉ ุทูููุฉ', weight: 0, bucket: 'neutral', hint: '' },
            { label: '๐ ุฎุณุฑุงู ุจูุณุจุฉ ูุชูุณุทุฉ (-20% ุฅูู -40%)', weight: 0, bucket: 'down_20_40', hint: '' },
            { label: '๐ป ุฎุณุฑุงู ุจูุณุจุฉ ุญุงุฏุฉ (-40% ูุฃูุซุฑ)', weight: 0, bucket: 'down_40', hint: '' }
        ]},
        { id: 'q10', type: 'yn', text: 'ูู ููุฌุฏ ุฃุตู ุจุฏูู ูุฏุฑูุณ ุชุฑูุฏ ููู ุงูุณูููุฉ ุฅูููุ', hint: 'ุงูุชุญููู ุงููุฏุฑูุณ ููุงุจู ุงููุงุด ุงููุนุทู.', weightYes: -1, weightNo: 1,
          hintYes: 'ุชุฏููุฑ ุฑุฃุณ ุงููุงู ูุญู ูุฑุต ุฐุงุช ุนุงุฆุฏ ูุชููุน ุฃุนูู ููุงุฑุณุฉ ุงุณุชุซูุงุฑูุฉ ุณูููุฉ.',
          hintNo: 'ุงูุจูุน ููุจูุงุก ุฎุงุฑุฌ ุงูุณูู ุจุฏูู ุฎุทุฉ ูููู ูู ุงูุนุงุฆุฏ ุงูุชุฑุงููู.' },
        // Q11 ุณูููู ุจุญุช: ูุง ูุฒู ูุงููุ ููุณุชุฎุฏู ููุท ูุงุณุชูุดุงู ุงูุฐุนุฑ ุงูุฃุนูู.
        { id: 'q11', type: 'yn', text: 'ูู ุชุดุนุฑ ุฃู ุฏุงูุนู ุงูุฑุฆูุณู ููุจูุน ุงูุขู ูู ุงูุฎูู ูุงูุถุบุท ุงูููุณูุ', hint: 'ุชูููู ุฐุงุชู ููุญุงูุฉ ุงูุนุงุทููุฉ.', weightYes: 0, weightNo: 0,
          hintYes: 'ูุฌุจ ุชุฃุฌูู ูุฑุงุฑุงุช ุงูุชุณููู ุนูุฏูุง ูููู ุงูุฎูู ูู ุงููุญุฑู ุงูุฃุณุงุณู.',
          hintNo: 'ุงูุณูุทุฑุฉ ุนูู ุงูุนูุงุทู ูู ุงูุฎุทูุฉ ุงูุฃููู ูุญู ูุฑุงุฑ ูุงูู ุณููู.' },
        { id: 'q12', type: 'choice', text: 'ูู ูู ุงููุฏุฉ ุงูุชู ูุถูุชูุง ูุณุชุซูุฑุงู ูู ูุฐุง ุงูุณููุ', hint: 'ููุงุณ ุฃูู ุงูุงุณุชุซูุงุฑ ุงููุนูู.', choices: [
            { label: '๐ ุฃูู ูู 6 ุฃุดูุฑ', weight: 0, hint: 'ุงูุชููุจุงุช ูู ุงูุฃูุฏ ุงููุตูุฑ ูุง ุชุนูุณ ุงููููุฉ ุงูุฌููุฑูุฉ ููุดุฑูุฉ.' },
            { label: '๐ ูู 6 ุฃุดูุฑ ุฅูู ุณูุชูู', weight: 1, hint: 'ูุชุฑุฉ ูุงููุฉ ูุจุฏุก ุธููุฑ ูุชุงุฆุฌ ุงูุฎุทุท ุงูุงุณุชุฑุงุชูุฌูุฉ ููุฅุฏุงุฑุฉ.' },
            { label: '๐ ุฃูุซุฑ ูู ุณูุชูู', weight: 2, hint: 'ุงูุงุณุชุซูุงุฑ ุงุฌุชุงุฒ ุงุฎุชุจุงุฑ ุงูุฒูู ููุฑุงุญู ุงูุฏูุฑุงุช ุงูุงูุชุตุงุฏูุฉ.' }
        ]}
    ];

    let currentQ = 0;
    let scores   = [];
    let answers  = {};
    let pendingValue = null;

    function render() {
        const q   = questions[currentQ];
        const pct = Math.round((currentQ / questions.length) * 100);

        document.getElementById('progressBar').style.width  = pct + '%';
        document.getElementById('progressText').textContent = `ุงูุณุคุงู ${currentQ + 1} ูู ${questions.length}`;

        let html = `
            <div class="question-number">ุงูุณุคุงู ${currentQ + 1}</div>
            <div class="question-text">${q.text}</div>
            <div class="question-hint">${q.hint}</div>
        `;

        if (q.type === 'choice') {
            html += `<div class="choice-buttons">`;
            q.choices.forEach((c, idx) => {
                html += `<button class="btn-choice" onclick="SellDecisionApp.selectChoice(${idx})">${c.label}</button>`;
            });
            html += `</div>
                     <div id="choiceHint" style="font-size:0.82rem;color:#c8d6e5;min-height:36px;margin-bottom:10px;"></div>
                     <button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>`;
        } else if (q.type === 'yn') {
            html += `
                <div class="yn-buttons">
                    <button class="btn-yes" id="btnYes" onclick="SellDecisionApp.selectYN('yes')">โ ูุนู</button>
                    <button class="btn-no"  id="btnNo"  onclick="SellDecisionApp.selectYN('no')">โ ูุง</button>
                </div>
                <div id="ynHint" style="font-size:0.82rem;color:#c8d6e5;min-height:36px;margin-bottom:10px;"></div>
                <button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>
            `;
        } else if (q.type === 'number') {
            html += `
                <div class="input-group">
                    <input type="number" id="numInput" placeholder="${q.placeholder}" min="0" step="0.01" oninput="SellDecisionApp.validateNum()">
                </div>
                <button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>
            `;
        }

        document.getElementById('questionBody').innerHTML = html;
        pendingValue = null;
        if (q.type === 'number') setTimeout(() => document.getElementById('numInput').focus(), 80);
    }

    function selectChoice(idx) {
        pendingValue = idx;
        const buttons = document.querySelectorAll('.btn-choice');
        buttons.forEach((b, i) => b.classList.toggle('selected', i === idx));
        const q = questions[currentQ];
        document.getElementById('choiceHint').textContent = q.choices[idx].hint || '';
        document.getElementById('btnNext').disabled = false;
    }

    function selectYN(val) {
        pendingValue = val;
        document.getElementById('btnYes').classList.toggle('selected', val === 'yes');
        document.getElementById('btnNo').classList.toggle('selected',  val === 'no');
        const q = questions[currentQ];
        document.getElementById('ynHint').textContent = val === 'yes' ? q.hintYes : q.hintNo;
        document.getElementById('btnNext').disabled   = false;
    }

    function validateNum() {
        const v = parseFloat(document.getElementById('numInput').value);
        document.getElementById('btnNext').disabled = isNaN(v) || v <= 0;
    }

    function next() {
        const q = questions[currentQ];

        if (q.type === 'choice') {
            const c = q.choices[pendingValue];
            scores.push({
                id: q.id,
                weight: c.weight,
                hint: c.hint,
                flag: c.flag || null,
                isEmergency: c.isEmergency || false,
                bucket: c.bucket || null
            });
            answers[q.id] = pendingValue;

        } else if (q.type === 'yn') {
            const yes = pendingValue === 'yes';
            const w   = yes ? q.weightYes : q.weightNo;
            const h   = yes ? q.hintYes   : q.hintNo;
            scores.push({ id: q.id, weight: w, hint: h });
            answers[q.id] = pendingValue;

        } else if (q.type === 'number') {
            const v = parseFloat(document.getElementById('numInput').value);
            answers[q.key] = v;
            scores.push({ id: q.id, weight: 0, hint: '' });
        }

        currentQ++;
        if (currentQ < questions.length) render();
        else                             calculateResult();
    }

    function calculateResult() {
        document.getElementById('questionCard').style.display = 'none';
        document.getElementById('progressBar').style.width    = '100%';

        let totalScore = 0;
        scores.forEach(s => totalScore += s.weight);

        const cost    = answers.costPrice    || 0;
        const current = answers.currentPrice || 0;
        let changePct = 0;
        let crossCheckWarning = '';

        if (cost > 0 && current > 0) {
            changePct = ((current - cost) / cost) * 100;

            // ุชุนุฏูู ุณุนุฑู ุงุณุชุฑุงุชูุฌู
            if (changePct > 50)  totalScore -= 2; // ุฃุฑุจุงุญ ุถุฎูุฉ โ ุญุงูุฒ ูุฌูู ุงูุฃุฑุจุงุญ
            if (changePct < -50) totalScore -= 1; // ูุจูุท ุญุงุฏ โ ุงุญุชูุงู ูุดููุฉ ุจููููุฉ

            // ุชุญูู ูุชูุงุทุน ุจูู ุงููุงูุน ูุงูุฅุฏุฑุงู (Q2/Q3 vs Q9)
            if (answers['q9'] !== undefined) {
                let actualBucket = '';
                if (changePct >= 20)      actualBucket = 'up_20';
                else if (changePct <= -40) actualBucket = 'down_40';
                else if (changePct <= -20) actualBucket = 'down_20_40';
                else                       actualBucket = 'neutral';

                const userChoice = questions.find(q => q.id === 'q9').choices[answers['q9']];
                if (userChoice && userChoice.bucket !== actualBucket) {
                    crossCheckWarning = `
                        <div class="override-alert" style="background: rgba(243,156,18,0.15); border-color: #f39c12; color: #f39c12;">
                            โ๏ธ <strong>ุชูุงูุถ ุฅุฏุฑุงูู ุฑูุตุฏ:</strong> ุญุณุจ ุงูุฃุฑูุงูุ ุงูุชุบูุฑ ุงูุญูููู ูู ูุฑูุฒู ูู ${changePct > 0 ? '+' : ''}${changePct.toFixed(1)}%ุ
                            ููู ูุตูู ุงูุฐููู ูุง ูุชุทุงุจู ูุน ุฐูู. ูุฐุง ูุนูู ุฃู ูุดุงุนุฑู ุชุดููู ุฑุคูุชู ูููุงูุน ุงูุฑููู.
                            ุณูุชู ุชุฌุงูู ูุฐุง ุงูุชูููู ุงูุฐูููุ ูุงุนุชูุงุฏ ุงูุฃุฑูุงู ุงููุนููุฉ ูู ุงููุฑุงุฑ.
                        </div>`;
                }
            }
        }

        // ููุงูุน ูุงุทุนุฉ (Hard Stops)
        const isLiquidityEmergency = scores.some(s => s.isEmergency === true);

        const q4Index   = answers['q4'];
        const q6Index   = answers['q6'];
        const q4Choice  = typeof q4Index === 'number' ? questions.find(q => q.id === 'q4').choices[q4Index] : null;
        const q6Choice  = typeof q6Index === 'number' ? questions.find(q => q.id === 'q6').choices[q6Index] : null;
        const isFundamentalRuin = (q4Choice && q4Choice.flag === 'losing') &&
                                  (q6Choice && q6Choice.flag === 'highDebt');

        const isBlindPanic = (answers['q8'] === 'no') && (answers['q11'] === 'yes');

        let decisionType, icon, titleClass, summary, barColor, pct;
        let partialExitNote = '';

        if (isLiquidityEmergency) {
            decisionType = 'ุชุณููู ุฅูุฒุงูู';
            icon         = '๐จ';
            titleClass   = 'sell';
            pct          = 10;
            barColor     = 'linear-gradient(90deg,#c0392b,#e74c3c)';
            summary      = 'ุงูุงูุชุฒุงูุงุช ุงููุงููุฉ ุงูุถุฑูุฑูุฉ ุชุณุจู ุฌูุฏุฉ ุงูุณูู. ุงููุงุนุฏุฉ ุงููุงููุฉ: ุงูุณูููุฉ ููุทูุงุฑุฆ ูุจู ุฃู ุงุณุชุซูุงุฑ. ุงูุชุณููู ููุง ุฅุฌุฑุงุก ุฏูุงุนู ูุญูุงูุฉ ุญูุงุชู ุงููุงููุฉุ ูุง ุญููุงู ุนูู ุงูุดุฑูุฉ ููุณูุง.';

        } else if (isFundamentalRuin) {
            decisionType = 'ุฎุฑูุฌ ููุงุฆู ูุญูุธ ุฑุฃุณ ุงููุงู';
            icon         = '๐ด';
            titleClass   = 'sell';
            pct          = 20;
            barColor     = 'linear-gradient(90deg,#c0392b,#e74c3c)';
            summary      = 'ุงูุฃุณุงุณูุงุช ุชุธูุฑ ุฎุณุงุฆุฑ ูุณุชูุฑุฉ ูุน ุฏููู ูุฑุชูุนุฉ. ุจูุงุก ุฑุฃุณ ุงููุงู ูู ูุฐุง ุงูุณูู ูุดุจู ุฑุจุท ูุตูุฑู ุจุดุฑูุฉ ุชุนุงูู ูุฒููุงู ุชุดุบูููุงู ููุงููุงู ูุนุงู. ุงููุฑุงุฑ ุงูููุทูู ููุง ูู ุชูููุต ุฃู ุชุตููุฉ ุงููุฑูุฒ ูุญูุงูุฉ ูุญูุธุชู.';

        } else if (isBlindPanic) {
            decisionType = 'ุฅููุงู ููุฑู ูููุฑุงุฑ';
            icon         = 'โ';
            titleClass   = 'review';
            pct          = 50;
            barColor     = 'linear-gradient(90deg,#f39c12,#f1c40f)';
            summary      = 'ุฃูุช ูู ุญุงูุฉ ุฐุนุฑ ููู ุชูุฑุฃ ุงูููุงุฆู ุงููุงููุฉ. ููููุน ุงุณุชุฎุฏุงู ูุฐู ุงูุขูุฉ ูุชุจุฑูุฑ ุจูุน ุชุญุช ุงูุฎูู ุงูุฃุนูู. ุฃุบูู ุงูุชุทุจููุ ุงูุฏุฃุ ุงูุฑุฃ ุงูุฃุฑูุงู ุฃู ุงุณุชุนู ุจูุฎุชุตุ ุซู ุนุฏ ูููุฑุงุฑ ุจุนูู ุจุงุฑุฏ.';

        } else {
            const maxScore = 20;
            const minScore = -20;
            pct = Math.min(100, Math.max(0, ((totalScore - minScore) / (maxScore - minScore)) * 100));

            if (totalScore >= 7) {
                decisionType = 'ุงุญุชูุงุธ ุงุณุชุฑุงุชูุฌู';
                icon         = '๐ข';
                titleClass   = 'hold';
                barColor     = 'linear-gradient(90deg,#27ae60,#2ecc71)';
                summary      = 'ุงููุคุดุฑุงุช ุงูุฃุณุงุณูุฉ (ุฑุจุญูุฉุ ุชูุฒูุนุงุชุ ุฏูููุ ุชูููู) ุชููู ูุตุงูุญ ุงูุดุฑูุฉ. ุงูุชุฐุจุฐุจ ุงูุญุงูู ุฌุฒุก ูู ุถูุถุงุก ุงูุณููุ ูุง ูุจุฑุฑ ููู ููุชุณููู. ุงูููุทูู ููุง ูู ุงูุงุญุชูุงุธ ูุน ูุฑุงูุจุฉ ุฏูุฑูุฉ ููููุงุฆู ุงููุงููุฉ.';

            } else if (totalScore >= 1) {
                decisionType = 'ูุฑุงุฌุนุฉ ูุชูููุต ูููุฎุงุทุฑ';
                icon         = '๐ก';
                titleClass   = 'review';
                barColor     = 'linear-gradient(90deg,#f39c12,#f1c40f)';
                summary      = 'ุงูุตูุฑุฉ ูุฎุชูุทุฉ: ูุง ููุฌุฏ ุฅูุฐุงุฑ ุฃุญูุฑุ ููู ูุง ุชูุฌุฏ ูุซุงููุฉ ุชุฌุนู ุงูุงุญุชูุงุธ ุงููุงูู ูุฑูุญุงู. ุงูุฃูุถู ููุง ุชุฎููู ุงููุฎุงุทุฑ ูุง ุงููุฑูุจ ุงููุงูู.';
                partialExitNote = `
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-top: 15px; border-right: 3px solid #f39c12; text-align:right;">
                        ๐ก <strong>ุงูุชุฑุงุญ ุณูููู ููุงูู ูุนุงู:</strong> ูููุฑ ูู ุชุณููู <strong>25โ33%</strong> ูู ูููุชู ูู ุงูุณูู. 
                        ูุฐุง ูุนุทูู ููุงูุด ููุณูุฉ ููุงููุฉุ ููุจููู ุดุฑููุงู ูู ุงููุตุฉ ูู ุชุญุณูุช ุงููุชุงุฆุฌ.
                    </div>`;
            } else {
                decisionType = 'ุชุณููู ููุธู ูุฅุนุงุฏุฉ ุชูุฌูู';
                icon         = '๐ด';
                titleClass   = 'sell';
                barColor     = 'linear-gradient(90deg,#c0392b,#e74c3c)';
                summary      = 'ุงููููุฐุฌ ูุฑู ุฃู ุงููุฎุงุทุฑ ุงููุชุจููุฉ ูุง ุชูุงุจููุง ุนูุงุฆุฏ ูุชููุนุฉ ูุงููุฉ. ุงูุฎุฑูุฌ ุงูุชุฏุฑูุฌู (ุนูู ุนุฏุฉ ุฏูุนุงุช) ุฃู ุงูููู ุฅูู ุฃุตูู ุฃุนูู ุฌูุฏุฉุ ุฎุทูุฉ ููุทููุฉ ูุฅุนุงุฏุฉ ุจูุงุก ูุญูุธุชู ุนูู ุฃุณุณ ุฃููู.';
            }
        }

        let overrideAlert = '';
        if (isLiquidityEmergency || isFundamentalRuin || isBlindPanic) {
            overrideAlert = `
                <div class="override-alert">
                    ๐จ ุชู ุชูุนูู ุทุจูุฉ ุงูุญูุงูุฉ ุงูุขููุฉ: ุงูุฎูุงุฑุฒููุฉ ุชุฌุงูุฒุช ูุธุงู ุงูููุงุทุ ูุฃููุง ุฑุตุฏุช ูุฏุฎูุงุช ุญุฑุฌุฉ 
                    (ุทุงุฑุฆ ุณูููุฉุ ุฃู ุงูููุงุฑ ุฃุณุงุณูุ ุฃู ูุฑุงุฑ ูุจูู ุนูู ุงูุฐุนุฑ ุฏูู ูุฑุงุกุฉ ุงูุฃุฑูุงู).
                </div>`;
        }

        let factorsHTML = '';
        scores.forEach(s => {
            if (s.weight === 0 || !s.hint) return;
            const dotClass = s.weight > 0 ? 'dot-hold' : 'dot-sell';
            factorsHTML += `
                <div class="factor-item">
                    <div class="factor-dot ${dotClass}"></div>
                    <div>${s.hint}</div>
                </div>`;
        });

        let priceNote = '';
        if (cost > 0 && current > 0) {
            const sign  = changePct >= 0 ? '+' : '';
            const color = changePct >= 0 ? '#2ecc71' : '#e74c3c';
            priceNote = `
                <p style="font-size:1.05rem;color:${color};font-weight:bold;margin-bottom:20px;direction:ltr;">
                    ุงูุชูููุฉ: ${cost.toFixed(2)} | ุงูุญุงูู: ${current.toFixed(2)} | ุงูุชุบูุฑ: ${sign}${changePct.toFixed(1)}%
                </p>`;
        }

        const rc = document.getElementById('resultCard');
        rc.innerHTML = `
            ${crossCheckWarning}
            ${overrideAlert}
            <div class="result-icon">${icon}</div>
            <div class="result-title ${titleClass}">${decisionType}</div>
            ${priceNote}
            <p class="result-summary">${summary}</p>
            ${partialExitNote}

            <div class="score-meter" style="margin-top:30px;">
                <div class="score-label"><span>ุชุณููู ููู</span><span>ุงุญุชูุงุธ ุตูุจ</span></div>
                <div class="score-bar-wrap">
                    <div class="score-bar-fill" style="width:${Math.round(pct)}%;background:${barColor};"></div>
                </div>
                <div class="score-text">ูุคุดุฑ ุงูููุฉ ุงููุงููุฉ: ${Math.round(pct)}%</div>
            </div>

            <div class="factors-section" style="margin-top:30px;">
                <h4>๐ ุชุนูููุงุช ุงูุฎูุงุฑุฒููุฉ ุจูุงุกู ุนูู ุฅุฌุงุจุงุชู:</h4>
                ${factorsHTML || '<p style="color:#888;font-size:0.85rem;">ุงูุฅุฌุงุจุงุช ูุชูุงุฒูุฉ ุฌุฏุงูุ ููู ุชุธูุฑ ุนูุงูู ุญุงุณูุฉ ูู ุงุชุฌุงู ูุงุญุฏ.</p>'}
            </div>

            <button class="btn-restart" onclick="SellDecisionApp.restart()">๐ ุชูููู ุณูู ุฌุฏูุฏ</button>
        `;

        rc.style.display = 'block';
        rc.classList.remove('result-positive','result-negative','result-warning');
        if (titleClass === 'hold')   rc.classList.add('result-positive');
        if (titleClass === 'sell')   rc.classList.add('result-negative');
        if (titleClass === 'review') rc.classList.add('result-warning');
        if (window.ResultsEngine)    window.ResultsEngine.paint();
        rc.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function restart() {
        currentQ      = 0;
        scores        = [];
        answers       = {};
        pendingValue  = null;

        const rc = document.getElementById('resultCard');
        rc.style.display = 'none';
        rc.classList.remove('result-positive','result-negative','result-warning');

        document.getElementById('questionCard').style.display = 'block';
        render();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    return { init: render, selectChoice, selectYN, validateNum, next, restart };
})();

window.addEventListener('scroll', function () {
    const btn = document.getElementById('backToTop');
    if (btn) btn.classList.toggle('visible', window.scrollY > 300);
});

document.addEventListener('DOMContentLoaded', SellDecisionApp.init);
</script>
</body>
</html>
