<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>ูู ุฃุจูุน ุณูููุ โ ูููุฑุฉ ูุณุชุซูุฑ</title>
ย ย <link rel="stylesheet" href="navigation.css">
ย ย <link rel="stylesheet" href="dark-theme.css">
ย ย <style>
ย ย ย ย * { margin: 0; padding: 0; box-sizing: border-box; }

ย ย ย ย body {
ย ย ย ย ย ย font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
ย ย ย ย ย ย background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
ย ย ย ย ย ย min-height: 100vh; padding: 20px; color: #f0f4f8;
ย ย ย ย }

ย ย ย ย .container { max-width: 780px; margin: 0 auto; }

ย ย ย ย .page-header { text-align: center; margin-bottom: 30px; }
ย ย ย ย .page-header h1 {
ย ย ย ย ย ย font-size: 2.2rem; color: #ffffff; font-weight: bold;
ย ย ย ย ย ย text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
ย ย ย ย }
ย ย ย ย .page-header p {
ย ย ย ย ย ย font-size: 0.95rem; color: #d0e1f9; margin-top: 8px; line-height: 1.6;
ย ย ย ย ย ย text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
ย ย ย ย }

ย ย ย ย .advisor-card {
ย ย ย ย ย ย background: rgba(255,255,255,0.08);
ย ย ย ย ย ย backdrop-filter: blur(12px);
ย ย ย ย ย ย -webkit-backdrop-filter: blur(12px);
ย ย ย ย ย ย border: 1.5px solid rgba(255,255,255,0.15);
ย ย ย ย ย ย border-radius: 24px; padding: 30px;
ย ย ย ย ย ย box-shadow: 0 10px 40px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
ย ย ย ย ย ย margin-bottom: 20px; position: relative; overflow: hidden;
ย ย ย ย }
ย ย ย ย .advisor-card::before {
ย ย ย ย ย ย content: ''; position: absolute; top: 0; right: 0; left: 0; height: 5px;
ย ย ย ย ย ย background: linear-gradient(90deg, #f39c12, #e74c3c, #c0392b);
ย ย ย ย }

ย ย ย ย .progress-bar-wrap {
ย ย ย ย ย ย background: rgba(255,255,255,0.08); border-radius: 10px;
ย ย ย ย ย ย height: 8px; margin-bottom: 20px; overflow: hidden;
ย ย ย ย ย ย border: 1px solid rgba(255,255,255,0.1);
ย ย ย ย }
ย ย ย ย .progress-bar-fill {
ย ย ย ย ย ย height: 100%; background: linear-gradient(90deg, #5a7fb5, #5a9d7a);
ย ย ย ย ย ย border-radius: 10px; transition: width 0.4s ease; width: 0%;
ย ย ย ย }
ย ย ย ย .progress-label {
ย ย ย ย ย ย font-size: 0.78rem; color: #d0e1f9; text-align: left;
ย ย ย ย ย ย margin-bottom: 6px; direction: ltr; font-weight: 500;
ย ย ย ย }

ย ย ย ย .question-number {
ย ย ย ย ย ย font-size: 0.8rem; color: #ffa726; font-weight: bold;
ย ย ย ย ย ย margin-bottom: 6px; letter-spacing: 0.5px;
ย ย ย ย }
ย ย ย ย .question-text {
ย ย ย ย ย ย font-size: 1.15rem; font-weight: bold; color: #ffffff;
ย ย ย ย ย ย margin-bottom: 6px; line-height: 1.5; text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
ย ย ย ย }
ย ย ย ย .question-hint {
ย ย ย ย ย ย font-size: 0.82rem; color: #c8d6e5; margin-bottom: 20px; line-height: 1.5;
ย ย ย ย ย ย border-right: 3px solid #f39c12;
ย ย ย ย ย ย background: rgba(243,156,18,0.12); padding: 10px 12px;
ย ย ย ย ย ย border-radius: 0 8px 8px 0; backdrop-filter: blur(6px);
ย ย ย ย }

ย ย ย ย .input-group { margin-bottom: 20px; }
ย ย ย ย .input-group input[type="number"] {
ย ย ย ย ย ย width: 100%; padding: 12px 16px;
ย ย ย ย ย ย border: 2px solid rgba(255,255,255,0.15);
ย ย ย ย ย ย border-radius: 10px; font-size: 1rem; font-family: inherit;
ย ย ย ย ย ย color: #ffffff; background: rgba(255,255,255,0.06);
ย ย ย ย ย ย transition: border-color 0.2s, background 0.2s;
ย ย ย ย ย ย text-align: right; direction: rtl;
ย ย ย ย }
ย ย ย ย .input-group input:focus {
ย ย ย ย ย ย outline: none; border-color: #5a7fb5;
ย ย ย ย ย ย background: rgba(90,127,181,0.15);
ย ย ย ย }
ย ย ย ย .input-group input::placeholder { color: rgba(255,255,255,0.4); }

ย ย ย ย .choice-buttons { display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }
ย ย ย ย .btn-choice {
ย ย ย ย ย ย width: 100%; padding: 13px 16px; font-size: 0.97rem; font-weight: bold;
ย ย ย ย ย ย border: 2px solid rgba(255,255,255,0.15);
ย ย ย ย ย ย border-radius: 12px; cursor: pointer;
ย ย ย ย ย ย background: rgba(255,255,255,0.06); color: #ffffff;
ย ย ย ย ย ย text-align: right; font-family: inherit;
ย ย ย ย ย ย transition: border-color 0.2s, background 0.2s, transform 0.15s;
ย ย ย ย ย ย backdrop-filter: blur(6px);
ย ย ย ย }
ย ย ย ย .btn-choice:hover {
ย ย ย ย ย ย border-color: #5a7fb5; background: rgba(90,127,181,0.2);
ย ย ย ย ย ย transform: translateX(-3px);
ย ย ย ย }
ย ย ย ย .btn-choice.selected {
ย ย ย ย ย ย background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
ย ย ย ย ย ย color: white; border-color: #4a6fa5;
ย ย ย ย ย ย box-shadow: 0 4px 12px rgba(90,127,181,0.4);
ย ย ย ย }

ย ย ย ย .yn-buttons { display: flex; gap: 12px; margin-bottom: 10px; }
ย ย ย ย .btn-yes, .btn-no {
ย ย ย ย ย ย flex: 1; padding: 14px; font-size: 1.05rem; font-weight: bold;
ย ย ย ย ย ย border: none; border-radius: 12px; cursor: pointer;
ย ย ย ย ย ย transition: transform 0.15s, box-shadow 0.15s; font-family: inherit;
ย ย ย ย }
ย ย ย ย .btn-yes {
ย ย ย ย ย ย background: linear-gradient(135deg, #27ae60, #2ecc71);
ย ย ย ย ย ย color: white; box-shadow: 0 4px 12px rgba(39,174,96,0.3);
ย ย ย ย }
ย ย ย ย .btn-yes:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(39,174,96,0.5); }
ย ย ย ย .btn-no {
ย ย ย ย ย ย background: linear-gradient(135deg, #c0392b, #e74c3c);
ย ย ย ย ย ย color: white; box-shadow: 0 4px 12px rgba(192,57,43,0.3);
ย ย ย ย }
ย ย ย ย .btn-no:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(192,57,43,0.5); }
ย ย ย ย .btn-yes.selected { outline: 3px solid #145a32; }
ย ย ย ย .btn-no.selectedย { outline: 3px solid #7b241c; }

ย ย ย ย .btn-next {
ย ย ย ย ย ย width: 100%; padding: 13px;
ย ย ย ย ย ย background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
ย ย ย ย ย ย color: white; border: none; border-radius: 12px;
ย ย ย ย ย ย font-size: 1rem; font-weight: bold; cursor: pointer; font-family: inherit;
ย ย ย ย ย ย transition: transform 0.15s, box-shadow 0.15s;
ย ย ย ย ย ย box-shadow: 0 4px 12px rgba(90,127,181,0.3); margin-top: 8px;
ย ย ย ย }
ย ย ย ย .btn-next:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(90,127,181,0.5); }
ย ย ย ย .btn-next:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

ย ย ย ย .result-card {
ย ย ย ย ย ย display: none; border-radius: 24px; padding: 30px;
ย ย ย ย ย ย box-shadow: 0 10px 40px rgba(0,0,0,0.5);
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย background: rgba(255,255,255,0.08);
ย ย ย ย ย ย backdrop-filter: blur(12px);
ย ย ย ย ย ย -webkit-backdrop-filter: blur(12px);
ย ย ย ย ย ย border: 1.5px solid rgba(255,255,255,0.15);
ย ย ย ย }
ย ย ย ย .result-icon { font-size: 4rem; margin-bottom: 15px; }
ย ย ย ย .result-title { font-size: 1.6rem; font-weight: bold; margin-bottom: 10px; }
ย ย ย ย .result-title.sellย ย{ color: #e74c3c; text-shadow: 0 0 10px rgba(231,76,60,0.5); }
ย ย ย ย .result-title.holdย ย{ color: #2ecc71; text-shadow: 0 0 10px rgba(46,204,113,0.5); }
ย ย ย ย .result-title.review { color: #f39c12; text-shadow: 0 0 10px rgba(243,156,18,0.5); }

ย ย ย ย .result-summary {
ย ย ย ย ย ย font-size: 0.95rem; color: #d0e1f9; line-height: 1.7;
ย ย ย ย ย ย margin-bottom: 20px; text-align: right;
ย ย ย ย }

ย ย ย ย .factors-section {
ย ย ย ย ย ย background: rgba(255,255,255,0.06); border-radius: 12px;
ย ย ย ย ย ย padding: 18px; margin-bottom: 20px; text-align: right;
ย ย ย ย ย ย border: 1px solid rgba(255,255,255,0.1);
ย ย ย ย }
ย ย ย ย .factors-section h4 {
ย ย ย ย ย ย font-size: 0.95rem; color: #ffffff; font-weight: bold; margin-bottom: 12px;
ย ย ย ย }
ย ย ย ย .factor-item {
ย ย ย ย ย ย display: flex; align-items: flex-start; gap: 10px;
ย ย ย ย ย ย margin-bottom: 8px; font-size: 0.88rem; color: #c8d6e5; line-height: 1.5;
ย ย ย ย }
ย ย ย ย .factor-dot {
ย ย ย ย ย ย width: 10px; height: 10px; border-radius: 50%; margin-top: 4px; flex-shrink: 0;
ย ย ย ย }
ย ย ย ย .dot-sell { background: #e74c3c; }
ย ย ย ย .dot-hold { background: #27ae60; }
ย ย ย ย .dot-neutral { background: #f39c12; }

ย ย ย ย .score-meter { margin: 20px 0; }
ย ย ย ย .score-label {
ย ย ย ย ย ย display: flex; justify-content: space-between;
ย ย ย ย ย ย font-size: 0.8rem; color: #c8d6e5; margin-bottom: 6px;
ย ย ย ย }
ย ย ย ย .score-bar-wrap {
ย ย ย ย ย ย background: rgba(255,255,255,0.08); border-radius: 10px; height: 14px; overflow: hidden;
ย ย ย ย ย ย border: 1px solid rgba(255,255,255,0.1);
ย ย ย ย }
ย ย ย ย .score-bar-fill { height: 100%; border-radius: 10px; transition: width 0.6s ease; }
ย ย ย ย .score-text { font-size: 0.85rem; color: #d0e1f9; margin-top: 6px; text-align: center; }

ย ย ย ย .btn-restart {
ย ย ย ย ย ย display: inline-block; padding: 12px 30px;
ย ย ย ย ย ย background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
ย ย ย ย ย ย color: white; border: none; border-radius: 12px;
ย ย ย ย ย ย font-size: 0.95rem; font-weight: bold; cursor: pointer; font-family: inherit;
ย ย ย ย ย ย transition: transform 0.15s; margin-top: 10px;
ย ย ย ย }
ย ย ย ย .btn-restart:hover { transform: translateY(-2px); }

ย ย ย ย .back-to-top {
ย ย ย ย ย ย position: fixed; bottom: 30px; left: 30px;
ย ย ย ย ย ย background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
ย ย ย ย ย ย color: white; border: none; border-radius: 50%;
ย ย ย ย ย ย width: 48px; height: 48px; font-size: 1.3rem; cursor: pointer;
ย ย ย ย ย ย box-shadow: 0 4px 15px rgba(90,127,181,0.4);
ย ย ย ย ย ย transition: transform 0.3s, opacity 0.3s;
ย ย ย ย ย ย opacity: 0; pointer-events: none;
ย ย ย ย ย ย display: flex; align-items: center; justify-content: center; z-index: 999;
ย ย ย ย }
ย ย ย ย .back-to-top.visible { opacity: 1; pointer-events: auto; }
ย ย ย ย .back-to-top:hover { transform: translateY(-3px); }

ย ย ย ย .disclaimer-box {
ย ย ย ย ย ย background: rgba(243,156,18,0.12); border: 2px solid rgba(243,156,18,0.3);
ย ย ย ย ย ย border-radius: 12px; padding: 14px 16px; margin-top: 20px;
ย ย ย ย ย ย color: #ffa726; font-weight: bold; font-size: 0.85rem; line-height: 1.6;
ย ย ย ย ย ย backdrop-filter: blur(6px); text-align: center;
ย ย ย ย }

ย ย ย ย .override-alert {
ย ย ย ย ย ย background: rgba(231,76,60,0.15); border: 2px solid #e74c3c;
ย ย ย ย ย ย border-radius: 12px; padding: 15px; margin-bottom: 20px;
ย ย ย ย ย ย color: #ffcccc; font-weight: bold; text-align: right; line-height: 1.6;
ย ย ย ย }

ย ย ย ย @media (max-width: 600px) {
ย ย ย ย ย ย .page-header h1 { font-size: 1.7rem; }
ย ย ย ย ย ย .advisor-card { padding: 20px; }
ย ย ย ย ย ย .question-text { font-size: 1rem; }
ย ย ย ย ย ย .yn-buttons { flex-direction: column; }
ย ย ย ย }
ย ย </style>
</head>
<body>

<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="ุงูุนูุฏุฉ ููุฃุนูู">โ</button>

<div class="container">
ย ย <nav class="navbar">
ย ย ย ย <div class="navbar-container">
ย ย ย ย ย ย <a href="index.html" class="navbar-brand">๐ ูููุฑุฉ ูุณุชุซูุฑ</a>
ย ย ย ย ย ย <button class="navbar-toggle" onclick="toggleNavbar()">โฐ</button>
ย ย ย ย ย ย <div class="navbar-menu" id="navbarMenu">
ย ย ย ย ย ย ย ย <a href="index.html" class="navbar-item">๐ ุงูุฑุฆูุณูุฉ</a>
ย ย ย ย ย ย ย ย <a href="advice.html" class="navbar-item calculator">๐ฐ ุตุงูู ุงูุซุฑูุฉ</a>
ย ย ย ย ย ย ย ย <a href="salary_calculator.html" class="navbar-item salary">๐ผ ุชูุณูู ุงูุฑุงุชุจ</a>
ย ย ย ย ย ย ย ย <a href="zakat_purification.html" class="navbar-item zakat">๐ ุงูุฒูุงุฉ</a>
ย ย ย ย ย ย ย ย <a href="financial_freedom.html" class="navbar-item fire">๐ฅ ุงูุญุฑูุฉ ุงููุงููุฉ</a>
ย ย ย ย ย ย ย ย <a href="investor_tips.html" class="navbar-item tips">โ๏ธ ูุตุงุฆุญ</a>
ย ย ย ย ย ย ย ย <a href="snowball_calculator.html" class="navbar-item calculator">โ๏ธ ุงูุนุงุฆุฏ ุงููุฑูุจ</a>
ย ย ย ย ย ย ย ย <a href="emergency_fund_calculator.html" class="navbar-item emergency">๐ก๏ธ ุงูุทูุงุฑุฆ</a>
ย ย ย ย ย ย ย ย <a href="average_calculator.html" class="navbar-item average">๐ ูุชูุณุท ุงูุดุฑุงุก</a>
ย ย ย ย ย ย ย ย <a href="company_valuation.html" class="navbar-item company">๐ข ุชูููู ุงูุดุฑูุฉ</a>
ย ย ย ย ย ย ย ย <a href="retirement_calculator.html" class="navbar-item retirement">๐๏ธ ุงูุชูุงุนุฏ</a>
ย ย ย ย ย ย ย ย <a href="portfolio_rating.html" class="navbar-item portfolio">๐ก๏ธ ุฃูุงู ุงููุญูุธุฉ</a>
ย ย ย ย ย ย ย ย <a href="stock_valuation.html" class="navbar-item calculator">๐ ุชูููู ุงูุฃุณูู</a>
ย ย ย ย ย ย ย ย <a href="dca_calculator.html" class="navbar-item calculator">๐ DCA</a>
ย ย ย ย ย ย ย ย <a href="sell_decision.html" class="navbar-item calculator active">๐ค ูู ุฃุจูุนุ</a>
ย ย ย ย ย ย ย ย <a href="goal_calculator.html" class="navbar-item calculator">๐ฏ ุงููุฏู ุงูุนูุณู</a>
ย ย ย ย ย ย ย ย <a href="allocation_calculator.html" class="navbar-item allocation">โ๏ธ ุชูุฒูุน ุงููุญูุธุฉ</a>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </nav>

ย ย <script>
ย ย ย ย function toggleNavbar() { document.getElementById('navbarMenu').classList.toggle('open'); }
ย ย ย ย document.addEventListener('DOMContentLoaded', function () {
ย ย ย ย ย ย const raw = window.location.pathname.split('/').pop() || 'index.html';
ย ย ย ย ย ย const page = raw.split('?')[0].split('#')[0] || 'index.html';
ย ย ย ย ย ย document.querySelectorAll('.navbar-item').forEach(function (item) {
ย ย ย ย ย ย ย ย item.classList.remove('active');
ย ย ย ย ย ย ย ย const href = (item.getAttribute('href') || '').split('?')[0].split('#')[0];
ย ย ย ย ย ย ย ย if (href === page) item.classList.add('active');
ย ย ย ย ย ย });
ย ย ย ย });
ย ย </script>

ย ย <div class="page-header">
ย ย ย ย <h1>๐ค ูู ุฃุจูุน ุณูููุ</h1>
ย ย ย ย <p>ุขูุฉ ูุฑุงุฑ ูุงููุฉ ุชูุฒุฌ ุจูู ุงูุฃุณุงุณูุงุช ูุงูุณููู. ุฃุฌุจ ุจุตุฏูุ ูุงุชุฑู ุนูู ุงูุฎูุงุฑุฒููุฉ ุงูุจุงูู.</p>
ย ย </div>

ย ย <div class="advisor-card" id="questionCard">
ย ย ย ย <div class="progress-label"><span id="progressText">ุงูุณุคุงู 1 ูู 13</span></div>
ย ย ย ย <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressBar"></div></div>
ย ย ย ย <div id="questionBody"></div>
ย ย </div>

ย ย <div class="result-card" id="resultCard"></div>

ย ย <div class="disclaimer-box">
ย ย ย ย โ๏ธ ูุฐู ุงูุฃุฏุงุฉ ูููุฐุฌ ุชูููู ุฑูุงุถู ูุณูููู ูุจุณุท. ูุง ุชุบูู ุนู ุงูุชุญููู ุงููุงูู ุงูุชูุตููู ุฃู ุงุณุชุดุงุฑุฉ ูุณุชุดุงุฑ ุงุณุชุซูุงุฑ ูุฑุฎุต. ูุฑุงุฑ ุงูุจูุน ูุงูุดุฑุงุก ููุน ุจุงููุงูู ุนูู ูุณุคูููุชู.
ย ย </div>
</div>

<script src="results-engine.js"></script>
<script>
const SellDecisionApp = (function() {
ย ย const questions = [
ย ย ย ย { id: 'q1', type: 'choice', text: 'ูุง ูู ุงูุณุจุจ ุงูุฑุฆูุณู ููุจูุท ุงูุณููุ', hint: 'ุงุฎุชุฑ ุงููุตู ุงูุฃูุฑุจ ููุงูุน ุงูุณูู ุงูุญุงูู.', choices: [
ย ย ย ย ย ย { label: '๐ ุงูุณูู ุจุฃูููู ูุงุจุท ูุณููู ุชุฃุซุฑ ุจุงูุชุจุนูุฉ', weight: 3, hint: 'ุงูุชุณููู ูู ููุฌุงุช ุงูุชุตุญูุญ ุงูุนุงูุฉ ููุณูู ูุฑุงุฑ ุฎุงุทุฆ ุชุงุฑูุฎูุงู.' },
ย ย ย ย ย ย { label: '๐ฐ ุฅุนูุงู ุฃู ุฎุจุฑ ุณูุจู ูุฎุต ุงูุดุฑูุฉ', weight: -1, hint: 'ุงูุฃุฎุจุงุฑ ุงูุณูุจูุฉ ุชุชุทูุจ ุชูููู ุงูุฃุซุฑ ุงููุนูู ุนูู ุงูุฃุฑุจุงุญ ูููุณ ุงูุณุนุฑ ููุท.' },
ย ย ย ย ย ย { label: '๐ ุชุฑุงุฌุน ูุนูู ูู ุฃุฑุจุงุญ ุงูุดุฑูุฉ ุฃู ุชูุฒูุนุงุชูุง', weight: -2, hint: 'ุงูุชุฑุงุฌุน ุงูุชุดุบููู ุฅุดุงุฑุฉ ุจููููุฉ ุชุณุชูุฌุจ ูุฑุงุฌุนุฉ ุฌุฏูู ุงูุงุณุชุซูุงุฑ ุจุนูู.' },
ย ย ย ย ย ย { label: 'โ ูุง ุฃุนุฑู ุงูุณุจุจ', weight: 1, hint: 'ุงูุฌูู ุจุงูุณุจุจ ูุนูู ุฃู ุงููุฑุงุฑ ุงููุงุฏู ุณูููู ุนุงุทููุงู. ุงุจุญุซ ุฃููุงู.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q2', type: 'number', text: 'ุจูู ุงุดุชุฑูุช ุงูุณููุ (ูุชูุณุท ุงูุชูููุฉ)', hint: 'ุฃุฏุฎู ูุชูุณุท ุงูุณุนุฑ ุจุฏูุฉ.', placeholder: 'ูุซุงู: 45.50', key: 'costPrice' },
ย ย ย ย { id: 'q3', type: 'number', text: 'ูู ุงูุณุนุฑ ุงูุญุงูู ููุณูู ุจุงูุณููุ', hint: 'ุฃุฏุฎู ุงูุณุนุฑ ุงูุญุงูู.', placeholder: 'ูุซุงู: 38.00', key: 'currentPrice' },
ย ย ย ย { id: 'q4', type: 'choice', text: 'ููู ุชููู ุฑุจุญูุฉ ุงูุดุฑูุฉุ', hint: 'ุฑุงุฌุน ุงูููุงุฆู ุงููุงููุฉ ุงูุฃุฎูุฑุฉ.', choices: [
ย ย ย ย ย ย { label: 'โ ุชุญูู ุฃุฑุจุงุญุงู ูุณุชูุฑุฉ ุฃู ูุชูุงููุฉ', weight: 3, flag: 'profitable', hint: 'ุงูุฑุจุญูุฉ ุงููุณุชูุฑุฉ ูู ุฎุท ุงูุฏูุงุน ุงูุฃูู ุถุฏ ุชููุจุงุช ุงูุฃุณุนุงุฑ.' },
ย ย ย ย ย ย { label: '๐ ุฑุงุจุญุฉ ููู ุงูุฃุฑุจุงุญ ุชุฑุงุฌุนุช ูุคุฎุฑุงู', weight: 0, flag: 'declining', hint: 'ูุฌุจ ุงูุชูุฑูุฉ ุจูู ุงูุชุฑุงุฌุน ุงูููุณูู ูุงูุถุนู ุงูููููู ุงููุณุชูุฑ.' },
ย ย ย ย ย ย { label: 'โ ุชุณุฌู ุฎุณุงุฆุฑ ูุณุชูุฑุฉ ุฃู ุจุงููุงุฏ ุชุชุนุงุฏู', weight: -3, flag: 'losing', hint: 'ุงูุชูุณู ุจุดุฑูุฉ ุฎุงุณุฑุฉ ุจูุง ุฎุทุฉ ุชุนุงูู ูุงุถุญุฉ ูุฏูุฑ ุฑุฃุณ ุงููุงู.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q5', type: 'choice', text: 'ููู ูู ุณุฌู ุชูุฒูุนุงุช ุงูุฃุฑุจุงุญุ', hint: 'ุชูููู ุขุฎุฑ 3 ุฅูู 5 ุณููุงุช.', choices: [
ย ย ย ย ย ย { label: '๐ฐ ุชูุฒูุนุงุช ููุชุธูุฉ ููุณุชูุฑุฉ ุฃู ูุชูุงููุฉ', weight: 3, hint: 'ุงูุชูุฒูุน ุงูููุชุธู ูุซุจุช ุฌูุฏุฉ ุงูุชุฏููุงุช ุงูููุฏูุฉ ูุงูุถุจุงุท ุงูุฅุฏุงุฑุฉ.' },
ย ย ย ย ย ย { label: '๐ ุชูุฒุน ููู ุงููุจุงูุบ ุชุชุฐุจุฐุจ', weight: 1, hint: 'ุชุฐุจุฐุจ ุงูุชูุฒูุน ููุจูู ูู ุงูุดุฑูุงุช ุงูุฏูุฑูุฉ.' },
ย ย ย ย ย ย { label: 'โฌ๏ธ ุชู ุชูููุต ุงูุชูุฒูุนุงุช ุจูุถูุญ', weight: -2, hint: 'ุฎูุถ ุงูุชูุฒูุนุงุช ูู ุฃููู ุฅุดุงุฑุฉ ูู ุงูุฅุฏุงุฑุฉ ุจูุฌูุฏ ุถุงุฆูุฉ ูุงููุฉ.' },
ย ย ย ย ย ย { label: '๐ซ ูุง ุชูุฒุน ุฃุฑุจุงุญุงู', weight: -1, hint: 'ุงูุดุฑูุงุช ุงูุชู ูุง ุชูุฒุน ูุฌุจ ุฃู ุชูุธูุฑ ูููุงู ุงุณุชุซูุงุฆูุงู ูุชุจุฑูุฑ ุงูุงุญุชูุงุธ ุจูุง.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q6', type: 'choice', text: 'ูุง ูู ุญุฌู ุงูุฑุงูุนุฉ ุงููุงููุฉ (ุงูุฏููู) ููุดุฑูุฉุ', hint: 'ุชูุฏูุฑ ุนุงู ููุณุชูู ุงูุฏููู ููุงุณุงู ุจุงูุฃุตูู ูุงูุฃุฑุจุงุญ.', choices: [
ย ย ย ย ย ย { label: 'โ ุฏููู ููุฎูุถุฉ ุฃู ูุนุฏููุฉ', weight: 2, flag: 'lowDebt', hint: 'ุงูุดุฑูุงุช ููุฎูุถุฉ ุงูุฏููู ุชูุฌู ุจุณูููุฉ ูู ุงูุฑููุฏ ุงูุงูุชุตุงุฏู.' },
ย ย ย ย ย ย { label: 'โ๏ธ ุฏููู ูุชูุณุทุฉ ููู ุงูุชุฏููุงุช ุชุบุทููุง', weight: 1, flag: 'midDebt', hint: 'ูุฎุงุทุฑุฉ ููุจููุฉ ุชุดุบูููุงู ุทุงููุง ูู ุชุฑุชูุน ุฃุณุนุงุฑ ุงููุงุฆุฏุฉ ุจุดุฏุฉ.' },
ย ย ย ย ย ย { label: '๐ด ุฏููู ุนุงููุฉ ุฌุฏุงู ูุชุดูู ุนุจุฆุงู', weight: -2, flag: 'highDebt', hint: 'ุงูุฏููู ุงูุนุงููุฉ ูุน ุชุฐุจุฐุจ ุงูุฃุฑุจุงุญ ุชููุฏ ูุฎุทุฑ ุงูุฅููุงุณ ุงููุงูู.' },
ย ย ย ย ย ย { label: 'โ ูุง ุชูุฌุฏ ูุฏู ูุนูููุงุช', weight: -1, flag: 'unknownDebt', hint: 'ุนุฏู ูุนุฑูุฉ ุญุฌู ุฏููู ุดุฑูุชู ูุนุงุฏู ุงูููุงุฏุฉ ุจุนูููู ูุบูุถุชูู.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q13', type: 'choice', text: 'ููู ุชุฑู ุชูููู ุงูุณูู (Valuation) ุญุงููุงูุ', hint: 'ุจูุงุกู ุนูู ููุฑุฑุงุช ุงูุฃุฑุจุงุญ ุฃู ุงููููุฉ ุงูุฏูุชุฑูุฉ ุฃู ุงูููุงุฑูุฉ ุจุงููุทุงุน.', choices: [
ย ย ย ย ย ย { label: '๐ ุฑุฎูุต ุฌุฏุงู ุฃู ูุฑูุจ ูู ุงูุนุงุฏู', weight: 3, hint: 'ุงูุณูู ุฐู ุงูุฃุณุงุณูุงุช ุงููููุฉ ูุงูุชูููู ุงูุฑุฎูุต ูุงุฏุฑุงู ูุง ูููู ูุฑุดุญุงู ููุจูุน.' },
ย ย ย ย ย ย { label: 'โ๏ธ ุชูููู ูุชูุณุท ูููุจูู', weight: 0, hint: 'ุงูุณุนุฑ ูุง ูุดูู ููุฒุฉ ุฅุถุงููุฉ ููุง ุฎุทุฑุงู ุฌุณููุงู.' },
ย ย ย ย ย ย { label: '๐ ุบุงูู ุฌุฏุงู ููุงุฑูุฉ ุจูุชุงุฆุฌ ุงูุดุฑูุฉ', weight: -3, hint: 'ุญุชู ุงูุดุฑูุงุช ุงูููุชุงุฒุฉ ุชุตุจุญ ุงุณุชุซูุงุฑุงุช ุณูุฆุฉ ุฅุฐุง ูุงู ุณุนุฑูุง ูุจุงูุบุงู ููู.' },
ย ย ย ย ย ย { label: 'โ ูู ุฃูู ุจุชููููู', weight: -1, hint: 'ุชุฌุงูู ุงูุชูููู ูุฌุนูู ุนุฑุถุฉ ูุดุฑุงุก ููุงุนุงุช ูุจูุน ููุนุงู.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q7', type: 'choice', text: 'ูู ุชุญุชุงุฌ ูุชุณููู ูุฐุง ุงูุงุณุชุซูุงุฑ ูุบุฑุถ ูุงูู ุทุงุฑุฆุ', hint: 'ุงูุญุงุฌุฉ ุงููุนููุฉ ููุณูููุฉ ุงูููุฏูุฉ ุงูุขู.', choices: [
ย ย ย ย ย ย { label: '๐ด ูุนูุ ุงูุชุฒุงู ุถุฑูุฑู ูุง ููุจู ุงูุชุฃุฌูู', weight: 0, isEmergency: true, hint: 'ุชู ุชูุนูู ุงูุชุฌุงูุฒ: ุงูุญุงุฌุฉ ููุณูููุฉ ุงูุทุงุฑุฆุฉ ุชูุฑุถ ุงูุชุณููู ุงูููุฑู.' },
ย ย ย ย ย ย { label: '๐ก ูุฏ ุฃุญุชุงุฌ ุงูุณูููุฉ ุฎูุงู ุงูุฃุดูุฑ ุงูุณุชุฉ ุงููุงุฏูุฉ', weight: -1, hint: 'ุงูุชุฑุงุจ ููุนุฏ ุงุณุชุญูุงู ูุงูู ูุชุทูุจ ุฎุทุฉ ุชุณููู ุชุฏุฑูุฌูุฉ ูุชุฌูุจ ูุงุน ุงูุณูู.' },
ย ย ย ย ย ย { label: '๐ข ูุงุ ุงููุจูุบ ูุฎุตุต ููุงุณุชุซูุงุฑ ุทููู ุงูุฃุฌู', weight: 2, hint: 'ุนุฏู ุงูุญุงุฌุฉ ููุณูููุฉ ูุนุทูู ููุฒุฉ ุงูุตุจุฑ ุนูู ุชุฐุจุฐุจุงุช ุงูุณูู.' }
ย ย ย ย ]},
ย ย ย ย { id: 'q8', type: 'yn', text: 'ูู ููุช ุจูุฑุงุกุฉ ุงูููุงุฆู ุงููุงููุฉ ุงูุฃุฎูุฑุฉ ููุดุฑูุฉุ', hint: 'ูู ุงุทูุนุช ุนูู ุงูุฃุฑูุงู ุงูุญููููุฉ ุฃู ุชุนุชูุฏ ุนูู ุงูุขุฑุงุกุ', weightYes: 1, weightNo: -1,
ย ย ย ย ย hintYes: 'ุงููุฑุงุฑ ุงููุจูู ุนูู ุงูุฃุฑูุงู ูู ุฃุณุงุณ ุงูุงุณุชุซูุงุฑ ุงููุคุณุณู.',
ย ย ย ย ย hintNo: 'ุนุฏู ูุฑุงุกุฉ ุงูููุงุฆู ูุนูู ุฃู ุฃู ูุฑุงุฑ ุจูุน ุงูุขู ูุจูู ุนูู ุงูุนุงุทูุฉ ููุท.' },
ย ย ย ย // Q9 ูุฒู ูุงูู = ุตูุฑ. ูุณุชุฎุฏู ููุท ููุชุญูู ุงููุชูุงุทุน ูุน Q2 ู Q3.
ย ย ย ย { id: 'q9', type: 'choice', text: 'ูู ุฐูููุ ููู ุชุฑู ูุถุนู ุงูุญุงูู ูุน ุงูุณููุ', hint: 'ููุงุฑูุฉ ูุณุจุฉ ุงูุชุบูุฑ ุจูุงุก ุนูู ุงูุชูููุฉ.', choices: [
ย ย ย ย ย ย { label: '๐ ุฑุงุจุญ ุจูุณุจุฉ ููุญูุธุฉ (+20% ูุฃูุซุฑ)', weight: 0, bucket: 'up_20', hint: '' },
ย ย ย ย ย ย { label: 'โ๏ธ ูุฑูุจ ุฌุฏุงู ูู ุฑุฃุณ ุงููุงู ุฃู ุฑุจุญ/ุฎุณุงุฑุฉ ุทูููุฉ', weight: 0, bucket: 'neutral', hint: '' },
ย ย ย ย ย ย { label: '๐ ุฎุณุฑุงู ุจูุณุจุฉ ูุชูุณุทุฉ (-20% ุฅูู -40%)', weight: 0, bucket: 'down_20_40', hint: '' },
ย ย ย ย ย ย { label: '๐ป ุฎุณุฑุงู ุจูุณุจุฉ ุญุงุฏุฉ (-40% ูุฃูุซุฑ)', weight: 0, bucket: 'down_40', hint: '' }
ย ย ย ย ]},
ย ย ย ย { id: 'q10', type: 'yn', text: 'ูู ููุฌุฏ ุฃุตู ุจุฏูู ูุฏุฑูุณ ุชุฑูุฏ ููู ุงูุณูููุฉ ุฅูููุ', hint: 'ุงูุชุญููู ุงููุฏุฑูุณ ููุงุจู ุงููุงุด ุงููุนุทู.', weightYes: -1, weightNo: 1,
ย ย ย ย ย hintYes: 'ุชุฏููุฑ ุฑุฃุณ ุงููุงู ูุญู ูุฑุต ุฐุงุช ุนุงุฆุฏ ูุชููุน ุฃุนูู ููุงุฑุณุฉ ุงุณุชุซูุงุฑูุฉ ุณูููุฉ.',
ย ย ย ย ย hintNo: 'ุงูุจูุน ููุจูุงุก ุฎุงุฑุฌ ุงูุณูู ุจุฏูู ุฎุทุฉ ูููู ูู ุงูุนุงุฆุฏ ุงูุชุฑุงููู.' },
ย ย ย ย // Q11 ุณูููู ุจุญุช: ูุง ูุฒู ูุงููุ ููุณุชุฎุฏู ููุท ูุงุณุชูุดุงู ุงูุฐุนุฑ ุงูุฃุนูู.
ย ย ย ย { id: 'q11', type: 'yn', text: 'ูู ุชุดุนุฑ ุฃู ุฏุงูุนู ุงูุฑุฆูุณู ููุจูุน ุงูุขู ูู ุงูุฎูู ูุงูุถุบุท ุงูููุณูุ', hint: 'ุชูููู ุฐุงุชู ููุญุงูุฉ ุงูุนุงุทููุฉ.', weightYes: 0, weightNo: 0,
ย ย ย ย ย hintYes: 'ูุฌุจ ุชุฃุฌูู ูุฑุงุฑุงุช ุงูุชุณููู ุนูุฏูุง ูููู ุงูุฎูู ูู ุงููุญุฑู ุงูุฃุณุงุณู.',
ย ย ย ย ย hintNo: 'ุงูุณูุทุฑุฉ ุนูู ุงูุนูุงุทู ูู ุงูุฎุทูุฉ ุงูุฃููู ูุญู ูุฑุงุฑ ูุงูู ุณููู.' },
ย ย ย ย { id: 'q12', type: 'choice', text: 'ูู ูู ุงููุฏุฉ ุงูุชู ูุถูุชูุง ูุณุชุซูุฑุงู ูู ูุฐุง ุงูุณููุ', hint: 'ููุงุณ ุฃูู ุงูุงุณุชุซูุงุฑ ุงููุนูู.', choices: [
ย ย ย ย ย ย { label: '๐ ุฃูู ูู 6 ุฃุดูุฑ', weight: 0, hint: 'ุงูุชููุจุงุช ูู ุงูุฃูุฏ ุงููุตูุฑ ูุง ุชุนูุณ ุงููููุฉ ุงูุฌููุฑูุฉ ููุดุฑูุฉ.' },
ย ย ย ย ย ย { label: '๐ ูู 6 ุฃุดูุฑ ุฅูู ุณูุชูู', weight: 1, hint: 'ูุชุฑุฉ ูุงููุฉ ูุจุฏุก ุธููุฑ ูุชุงุฆุฌ ุงูุฎุทุท ุงูุงุณุชุฑุงุชูุฌูุฉ ููุฅุฏุงุฑุฉ.' },
ย ย ย ย ย ย { label: '๐ ุฃูุซุฑ ูู ุณูุชูู', weight: 2, hint: 'ุงูุงุณุชุซูุงุฑ ุงุฌุชุงุฒ ุงุฎุชุจุงุฑ ุงูุฒูู ููุฑุงุญู ุงูุฏูุฑุงุช ุงูุงูุชุตุงุฏูุฉ.' }
ย ย ย ย ]}
ย ย ];

ย ย let currentQ = 0;
ย ย let scoresย ย= [];
ย ย let answersย = {};
ย ย let pendingValue = null;

ย ย function render() {
ย ย ย ย const qย ย= questions[currentQ];
ย ย ย ย const pct = Math.round((currentQ / questions.length) * 100);

ย ย ย ย document.getElementById('progressBar').style.widthย = pct + '%';
ย ย ย ย document.getElementById('progressText').textContent = `ุงูุณุคุงู ${currentQ + 1} ูู ${questions.length}`;

ย ย ย ย let html = `
ย ย ย ย ย ย <div class="question-number">ุงูุณุคุงู ${currentQ + 1}</div>
ย ย ย ย ย ย <div class="question-text">${q.text}</div>
ย ย ย ย ย ย <div class="question-hint">${q.hint}</div>
ย ย ย ย `;

ย ย ย ย if (q.type === 'choice') {
ย ย ย ย ย ย html += `<div class="choice-buttons">`;
ย ย ย ย ย ย q.choices.forEach((c, idx) => {
ย ย ย ย ย ย ย ย html += `<button class="btn-choice" onclick="SellDecisionApp.selectChoice(${idx})">${c.label}</button>`;
ย ย ย ย ย ย });
ย ย ย ย ย ย html += `</div>
ย ย ย ย ย ย ย ย ย ย ย<div id="choiceHint" style="font-size:0.82rem;color:#c8d6e5;min-height:36px;margin-bottom:10px;"></div>
ย ย ย ย ย ย ย ย ย ย ย<button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>`;
ย ย ย ย } else if (q.type === 'yn') {
ย ย ย ย ย ย html += `
ย ย ย ย ย ย ย ย <div class="yn-buttons">
ย ย ย ย ย ย ย ย ย ย <button class="btn-yes" id="btnYes" onclick="SellDecisionApp.selectYN('yes')">โ ูุนู</button>
ย ย ย ย ย ย ย ย ย ย <button class="btn-no"ย id="btnNo"ย onclick="SellDecisionApp.selectYN('no')">โ ูุง</button>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div id="ynHint" style="font-size:0.82rem;color:#c8d6e5;min-height:36px;margin-bottom:10px;"></div>
ย ย ย ย ย ย ย ย <button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>
ย ย ย ย ย ย `;
ย ย ย ย } else if (q.type === 'number') {
ย ย ย ย ย ย html += `
ย ย ย ย ย ย ย ย <div class="input-group">
ย ย ย ย ย ย ย ย ย ย <input type="number" id="numInput" placeholder="${q.placeholder}" min="0" step="0.01" oninput="SellDecisionApp.validateNum()">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <button class="btn-next" id="btnNext" onclick="SellDecisionApp.next()" disabled>ุงูุชุงูู โ</button>
ย ย ย ย ย ย `;
ย ย ย ย }

ย ย ย ย document.getElementById('questionBody').innerHTML = html;
ย ย ย ย pendingValue = null;
ย ย ย ย if (q.type === 'number') setTimeout(() => document.getElementById('numInput').focus(), 80);
ย ย }

ย ย function selectChoice(idx) {
ย ย ย ย pendingValue = idx;
ย ย ย ย const buttons = document.querySelectorAll('.btn-choice');
ย ย ย ย buttons.forEach((b, i) => b.classList.toggle('selected', i === idx));
ย ย ย ย const q = questions[currentQ];
ย ย ย ย document.getElementById('choiceHint').textContent = q.choices[idx].hint || '';
ย ย ย ย document.getElementById('btnNext').disabled = false;
ย ย }

ย ย function selectYN(val) {
ย ย ย ย pendingValue = val;
ย ย ย ย document.getElementById('btnYes').classList.toggle('selected', val === 'yes');
ย ย ย ย document.getElementById('btnNo').classList.toggle('selected',ย val === 'no');
ย ย ย ย const q = questions[currentQ];
ย ย ย ย document.getElementById('ynHint').textContent = val === 'yes' ? q.hintYes : q.hintNo;
ย ย ย ย document.getElementById('btnNext').disabledย ย= false;
ย ย }

ย ย function validateNum() {
ย ย ย ย const v = parseFloat(document.getElementById('numInput').value);
ย ย ย ย document.getElementById('btnNext').disabled = isNaN(v) || v <= 0;
ย ย }

ย ย function next() {
ย ย ย ย const q = questions[currentQ];

ย ย ย ย if (q.type === 'choice') {
ย ย ย ย ย ย const c = q.choices[pendingValue];
ย ย ย ย ย ย scores.push({
ย ย ย ย ย ย ย ย id: q.id,
ย ย ย ย ย ย ย ย weight: c.weight,
ย ย ย ย ย ย ย ย hint: c.hint,
ย ย ย ย ย ย ย ย flag: c.flag || null,
ย ย ย ย ย ย ย ย isEmergency: c.isEmergency || false,
ย ย ย ย ย ย ย ย bucket: c.bucket || null
ย ย ย ย ย ย });
ย ย ย ย ย ย answers[q.id] = pendingValue;

ย ย ย ย } else if (q.type === 'yn') {
ย ย ย ย ย ย const yes = pendingValue === 'yes';
ย ย ย ย ย ย const wย ย= yes ? q.weightYes : q.weightNo;
ย ย ย ย ย ย const hย ย= yes ? q.hintYesย ย: q.hintNo;
ย ย ย ย ย ย scores.push({ id: q.id, weight: w, hint: h });
ย ย ย ย ย ย answers[q.id] = pendingValue;

ย ย ย ย } else if (q.type === 'number') {
ย ย ย ย ย ย const v = parseFloat(document.getElementById('numInput').value);
ย ย ย ย ย ย answers[q.key] = v;
ย ย ย ย ย ย scores.push({ id: q.id, weight: 0, hint: '' });
ย ย ย ย }

ย ย ย ย currentQ++;
ย ย ย ย if (currentQ < questions.length) render();
ย ย ย ย elseย ย ย ย ย ย ย ย ย ย ย ย ย ย ยcalculateResult();
ย ย }

ย ย function calculateResult() {
ย ย ย ย document.getElementById('questionCard').style.display = 'none';
ย ย ย ย document.getElementById('progressBar').style.widthย ย = '100%';

ย ย ย ย let totalScore = 0;
ย ย ย ย scores.forEach(s => totalScore += s.weight);

ย ย ย ย const costย ย = answers.costPriceย ย || 0;
ย ย ย ย const current = answers.currentPrice || 0;
ย ย ย ย let changePct = 0;
ย ย ย ย let crossCheckWarning = '';

ย ย ย ย if (cost > 0 && current > 0) {
ย ย ย ย ย ย changePct = ((current - cost) / cost) * 100;

ย ย ย ย ย ย // ุชุนุฏูู ุณุนุฑู ุงุณุชุฑุงุชูุฌู
ย ย ย ย ย ย if (changePct > 50)ย totalScore -= 2; // ุฃุฑุจุงุญ ุถุฎูุฉ โ ุญุงูุฒ ูุฌูู ุงูุฃุฑุจุงุญ
ย ย ย ย ย ย if (changePct < -50) totalScore -= 1; // ูุจูุท ุญุงุฏ โ ุงุญุชูุงู ูุดููุฉ ุจููููุฉ

ย ย ย ย ย ย // ุชุญูู ูุชูุงุทุน ุจูู ุงููุงูุน ูุงูุฅุฏุฑุงู (Q2/Q3 vs Q9)
ย ย ย ย ย ย if (answers['q9'] !== undefined) {
ย ย ย ย ย ย ย ย let actualBucket = '';
ย ย ย ย ย ย ย ย if (changePct >= 20)ย ย ย actualBucket = 'up_20';
ย ย ย ย ย ย ย ย else if (changePct <= -40) actualBucket = 'down_40';
ย ย ย ย ย ย ย ย else if (changePct <= -20) actualBucket = 'down_20_40';
ย ย ย ย ย ย ย ย elseย ย ย ย ย ย ย ย ย ย ย ยactualBucket = 'neutral';

ย ย ย ย ย ย ย ย const userChoice = questions.find(q => q.id === 'q9').choices[answers['q9']];
ย ย ย ย ย ย ย ย if (userChoice && userChoice.bucket !== actualBucket) {
ย ย ย ย ย ย ย ย ย ย crossCheckWarning = `
ย ย ย ย ย ย ย ย ย ย ย ย <div class="override-alert" style="background: rgba(243,156,18,0.15); border-color: #f39c12; color: #f39c12;">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ๏ธ <strong>ุชูุงูุถ ุฅุฏุฑุงูู ุฑูุตุฏ:</strong> ุญุณุจ ุงูุฃุฑูุงูุ ุงูุชุบูุฑ ุงูุญูููู ูู ูุฑูุฒู ูู ${changePct > 0 ? '+' : ''}${changePct.toFixed(1)}%ุ
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ููู ูุตูู ุงูุฐููู ูุง ูุชุทุงุจู ูุน ุฐูู. ูุฐุง ูุนูู ุฃู ูุดุงุนุฑู ุชุดููู ุฑุคูุชู ูููุงูุน ุงูุฑููู.
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ุณูุชู ุชุฌุงูู ูุฐุง ุงูุชูููู ุงูุฐูููุ ูุงุนุชูุงุฏ ุงูุฃุฑูุงู ุงููุนููุฉ ูู ุงููุฑุงุฑ.
ย ย ย ย ย ย ย ย ย ย ย ย </div>`;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย // ููุงูุน ูุงุทุนุฉ (Hard Stops)
ย ย ย ย const isLiquidityEmergency = scores.some(s => s.isEmergency === true);

ย ย ย ย const q4Indexย ย= answers['q4'];
ย ย ย ย const q6Indexย ย= answers['q6'];
ย ย ย ย const q4Choiceย = typeof q4Index === 'number' ? questions.find(q => q.id === 'q4').choices[q4Index] : null;
ย ย ย ย const q6Choiceย = typeof q6Index === 'number' ? questions.find(q => q.id === 'q6').choices[q6Index] : null;
ย ย ย ย const isFundamentalRuin = (q4Choice && q4Choice.flag === 'losing') &&
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย (q6Choice && q6Choice.flag === 'highDebt');

ย ย ย ย const isBlindPanic = (answers['q8'] === 'no') && (answers['q11'] === 'yes');

ย ย ย ย let decisionType, icon, titleClass, summary, barColor, pct;
ย ย ย ย let partialExitNote = '';

ย ย ย ย if (isLiquidityEmergency) {
ย ย ย ย ย ย decisionType = 'ุชุณููู ุฅูุฒุงูู';
ย ย ย ย ย ย iconย ย ย ย ย= '๐จ';
ย ย ย ย ย ย titleClassย ย= 'sell';
ย ย ย ย ย ย pctย ย ย ย ย = 10;
ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#c0392b,#e74c3c)';
ย ย ย ย ย ย summaryย ย ย = 'ุงูุงูุชุฒุงูุงุช ุงููุงููุฉ ุงูุถุฑูุฑูุฉ ุชุณุจู ุฌูุฏุฉ ุงูุณูู. ุงููุงุนุฏุฉ ุงููุงููุฉ: ุงูุณูููุฉ ููุทูุงุฑุฆ ูุจู ุฃู ุงุณุชุซูุงุฑ. ุงูุชุณููู ููุง ุฅุฌุฑุงุก ุฏูุงุนู ูุญูุงูุฉ ุญูุงุชู ุงููุงููุฉุ ูุง ุญููุงู ุนูู ุงูุดุฑูุฉ ููุณูุง.';

ย ย ย ย } else if (isFundamentalRuin) {
ย ย ย ย ย ย decisionType = 'ุฎุฑูุฌ ููุงุฆู ูุญูุธ ุฑุฃุณ ุงููุงู';
ย ย ย ย ย ย iconย ย ย ย ย= '๐ด';
ย ย ย ย ย ย titleClassย ย= 'sell';
ย ย ย ย ย ย pctย ย ย ย ย = 20;
ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#c0392b,#e74c3c)';
ย ย ย ย ย ย summaryย ย ย = 'ุงูุฃุณุงุณูุงุช ุชุธูุฑ ุฎุณุงุฆุฑ ูุณุชูุฑุฉ ูุน ุฏููู ูุฑุชูุนุฉ. ุจูุงุก ุฑุฃุณ ุงููุงู ูู ูุฐุง ุงูุณูู ูุดุจู ุฑุจุท ูุตูุฑู ุจุดุฑูุฉ ุชุนุงูู ูุฒููุงู ุชุดุบูููุงู ููุงููุงู ูุนุงู. ุงููุฑุงุฑ ุงูููุทูู ููุง ูู ุชูููุต ุฃู ุชุตููุฉ ุงููุฑูุฒ ูุญูุงูุฉ ูุญูุธุชู.';

ย ย ย ย } else if (isBlindPanic) {
ย ย ย ย ย ย decisionType = 'ุฅููุงู ููุฑู ูููุฑุงุฑ';
ย ย ย ย ย ย iconย ย ย ย ย= 'โ';
ย ย ย ย ย ย titleClassย ย= 'review';
ย ย ย ย ย ย pctย ย ย ย ย = 50;
ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#f39c12,#f1c40f)';
ย ย ย ย ย ย summaryย ย ย = 'ุฃูุช ูู ุญุงูุฉ ุฐุนุฑ ููู ุชูุฑุฃ ุงูููุงุฆู ุงููุงููุฉ. ููููุน ุงุณุชุฎุฏุงู ูุฐู ุงูุขูุฉ ูุชุจุฑูุฑ ุจูุน ุชุญุช ุงูุฎูู ุงูุฃุนูู. ุฃุบูู ุงูุชุทุจููุ ุงูุฏุฃุ ุงูุฑุฃ ุงูุฃุฑูุงู ุฃู ุงุณุชุนู ุจูุฎุชุตุ ุซู ุนุฏ ูููุฑุงุฑ ุจุนูู ุจุงุฑุฏ.';

ย ย ย ย } else {
ย ย ย ย ย ย const maxScore = 20;
ย ย ย ย ย ย const minScore = -20;
ย ย ย ย ย ย pct = Math.min(100, Math.max(0, ((totalScore - minScore) / (maxScore - minScore)) * 100));

ย ย ย ย ย ย if (totalScore >= 7) {
ย ย ย ย ย ย ย ย decisionType = 'ุงุญุชูุงุธ ุงุณุชุฑุงุชูุฌู';
ย ย ย ย ย ย ย ย iconย ย ย ย ย= '๐ข';
ย ย ย ย ย ย ย ย titleClassย ย= 'hold';
ย ย ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#27ae60,#2ecc71)';
ย ย ย ย ย ย ย ย summaryย ย ย = 'ุงููุคุดุฑุงุช ุงูุฃุณุงุณูุฉ (ุฑุจุญูุฉุ ุชูุฒูุนุงุชุ ุฏูููุ ุชูููู) ุชููู ูุตุงูุญ ุงูุดุฑูุฉ. ุงูุชุฐุจุฐุจ ุงูุญุงูู ุฌุฒุก ูู ุถูุถุงุก ุงูุณููุ ูุง ูุจุฑุฑ ููู ููุชุณููู. ุงูููุทูู ููุง ูู ุงูุงุญุชูุงุธ ูุน ูุฑุงูุจุฉ ุฏูุฑูุฉ ููููุงุฆู ุงููุงููุฉ.';

ย ย ย ย ย ย } else if (totalScore >= 1) {
ย ย ย ย ย ย ย ย decisionType = 'ูุฑุงุฌุนุฉ ูุชูููุต ูููุฎุงุทุฑ';
ย ย ย ย ย ย ย ย iconย ย ย ย ย= '๐ก';
ย ย ย ย ย ย ย ย titleClassย ย= 'review';
ย ย ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#f39c12,#f1c40f)';
ย ย ย ย ย ย ย ย summaryย ย ย = 'ุงูุตูุฑุฉ ูุฎุชูุทุฉ: ูุง ููุฌุฏ ุฅูุฐุงุฑ ุฃุญูุฑุ ููู ูุง ุชูุฌุฏ ูุซุงููุฉ ุชุฌุนู ุงูุงุญุชูุงุธ ุงููุงูู ูุฑูุญุงู. ุงูุฃูุถู ููุง ุชุฎููู ุงููุฎุงุทุฑ ูุง ุงููุฑูุจ ุงููุงูู.';
ย ย ย ย ย ย ย ย partialExitNote = `
ย ย ย ย ย ย ย ย ย ย <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-top: 15px; border-right: 3px solid #f39c12; text-align:right;">
ย ย ย ย ย ย ย ย ย ย ย ย ๐ก <strong>ุงูุชุฑุงุญ ุณูููู ููุงูู ูุนุงู:</strong> ูููุฑ ูู ุชุณููู <strong>25โ33%</strong> ูู ูููุชู ูู ุงูุณูู.ย
ย ย ย ย ย ย ย ย ย ย ย ย ูุฐุง ูุนุทูู ููุงูุด ููุณูุฉ ููุงููุฉุ ููุจููู ุดุฑููุงู ูู ุงููุตุฉ ูู ุชุญุณูุช ุงููุชุงุฆุฌ.
ย ย ย ย ย ย ย ย ย ย </div>`;
ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย decisionType = 'ุชุณููู ููุธู ูุฅุนุงุฏุฉ ุชูุฌูู';
ย ย ย ย ย ย ย ย iconย ย ย ย ย= '๐ด';
ย ย ย ย ย ย ย ย titleClassย ย= 'sell';
ย ย ย ย ย ย ย ย barColorย ย ย= 'linear-gradient(90deg,#c0392b,#e74c3c)';
ย ย ย ย ย ย ย ย summaryย ย ย = 'ุงููููุฐุฌ ูุฑู ุฃู ุงููุฎุงุทุฑ ุงููุชุจููุฉ ูุง ุชูุงุจููุง ุนูุงุฆุฏ ูุชููุนุฉ ูุงููุฉ. ุงูุฎุฑูุฌ ุงูุชุฏุฑูุฌู (ุนูู ุนุฏุฉ ุฏูุนุงุช) ุฃู ุงูููู ุฅูู ุฃุตูู ุฃุนูู ุฌูุฏุฉุ ุฎุทูุฉ ููุทููุฉ ูุฅุนุงุฏุฉ ุจูุงุก ูุญูุธุชู ุนูู ุฃุณุณ ุฃููู.';
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย let overrideAlert = '';
ย ย ย ย if (isLiquidityEmergency || isFundamentalRuin || isBlindPanic) {
ย ย ย ย ย ย overrideAlert = `
ย ย ย ย ย ย ย ย <div class="override-alert">
ย ย ย ย ย ย ย ย ย ย ๐จ ุชู ุชูุนูู ุทุจูุฉ ุงูุญูุงูุฉ ุงูุขููุฉ: ุงูุฎูุงุฑุฒููุฉ ุชุฌุงูุฒุช ูุธุงู ุงูููุงุทุ ูุฃููุง ุฑุตุฏุช ูุฏุฎูุงุช ุญุฑุฌุฉย
ย ย ย ย ย ย ย ย ย ย (ุทุงุฑุฆ ุณูููุฉุ ุฃู ุงูููุงุฑ ุฃุณุงุณูุ ุฃู ูุฑุงุฑ ูุจูู ุนูู ุงูุฐุนุฑ ุฏูู ูุฑุงุกุฉ ุงูุฃุฑูุงู).
ย ย ย ย ย ย ย ย </div>`;
ย ย ย ย }

ย ย ย ย let factorsHTML = '';
ย ย ย ย scores.forEach(s => {
ย ย ย ย ย ย if (s.weight === 0 || !s.hint) return;
ย ย ย ย ย ย const dotClass = s.weight > 0 ? 'dot-hold' : 'dot-sell';
ย ย ย ย ย ย factorsHTML += `
ย ย ย ย ย ย ย ย <div class="factor-item">
ย ย ย ย ย ย ย ย ย ย <div class="factor-dot ${dotClass}"></div>
ย ย ย ย ย ย ย ย ย ย <div>${s.hint}</div>
ย ย ย ย ย ย ย ย </div>`;
ย ย ย ย });

ย ย ย ย let priceNote = '';
ย ย ย ย if (cost > 0 && current > 0) {
ย ย ย ย ย ย const signย = changePct >= 0 ? '+' : '';
ย ย ย ย ย ย const color = changePct >= 0 ? '#2ecc71' : '#e74c3c';
ย ย ย ย ย ย priceNote = `
ย ย ย ย ย ย ย ย <p style="font-size:1.05rem;color:${color};font-weight:bold;margin-bottom:20px;direction:ltr;">
ย ย ย ย ย ย ย ย ย ย ุงูุชูููุฉ: ${cost.toFixed(2)} | ุงูุญุงูู: ${current.toFixed(2)} | ุงูุชุบูุฑ: ${sign}${changePct.toFixed(1)}%
ย ย ย ย ย ย ย ย </p>`;
ย ย ย ย }

ย ย ย ย const rc = document.getElementById('resultCard');
ย ย ย ย rc.innerHTML = `
ย ย ย ย ย ย ${crossCheckWarning}
ย ย ย ย ย ย ${overrideAlert}
ย ย ย ย ย ย <div class="result-icon">${icon}</div>
ย ย ย ย ย ย <div class="result-title ${titleClass}">${decisionType}</div>
ย ย ย ย ย ย ${priceNote}
ย ย ย ย ย ย <p class="result-summary">${summary}</p>
ย ย ย ย ย ย ${partialExitNote}

ย ย ย ย ย ย <div class="score-meter" style="margin-top:30px;">
ย ย ย ย ย ย ย ย <div class="score-label"><span>ุชุณููู ููู</span><span>ุงุญุชูุงุธ ุตูุจ</span></div>
ย ย ย ย ย ย ย ย <div class="score-bar-wrap">
ย ย ย ย ย ย ย ย ย ย <div class="score-bar-fill" style="width:${Math.round(pct)}%;background:${barColor};"></div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div class="score-text">ูุคุดุฑ ุงูููุฉ ุงููุงููุฉ: ${Math.round(pct)}%</div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="factors-section" style="margin-top:30px;">
ย ย ย ย ย ย ย ย <h4>๐ ุชุนูููุงุช ุงูุฎูุงุฑุฒููุฉ ุจูุงุกู ุนูู ุฅุฌุงุจุงุชู:</h4>
ย ย ย ย ย ย ย ย ${factorsHTML || '<p style="color:#888;font-size:0.85rem;">ุงูุฅุฌุงุจุงุช ูุชูุงุฒูุฉ ุฌุฏุงูุ ููู ุชุธูุฑ ุนูุงูู ุญุงุณูุฉ ูู ุงุชุฌุงู ูุงุญุฏ.</p>'}
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <button class="btn-restart" onclick="SellDecisionApp.restart()">๐ ุชูููู ุณูู ุฌุฏูุฏ</button>
ย ย ย ย `;

ย ย ย ย rc.style.display = 'block';
ย ย ย ย rc.classList.remove('result-positive','result-negative','result-warning');
ย ย ย ย if (titleClass === 'hold')ย ยrc.classList.add('result-positive');
ย ย ย ย if (titleClass === 'sell')ย ยrc.classList.add('result-negative');
ย ย ย ย if (titleClass === 'review') rc.classList.add('result-warning');
ย ย ย ย if (window.ResultsEngine)ย ย window.ResultsEngine.paint();
ย ย ย ย rc.scrollIntoView({ behavior: 'smooth', block: 'start' });
ย ย }

ย ย function restart() {
ย ย ย ย currentQย ย ย = 0;
ย ย ย ย scoresย ย ย ย = [];
ย ย ย ย answersย ย ย ย= {};
ย ย ย ย pendingValueย = null;

ย ย ย ย const rc = document.getElementById('resultCard');
ย ย ย ย rc.style.display = 'none';
ย ย ย ย rc.classList.remove('result-positive','result-negative','result-warning');

ย ย ย ย document.getElementById('questionCard').style.display = 'block';
ย ย ย ย render();
ย ย ย ย window.scrollTo({ top: 0, behavior: 'smooth' });
ย ย }

ย ย return { init: render, selectChoice, selectYN, validateNum, next, restart };
})();

window.addEventListener('scroll', function () {
ย ย const btn = document.getElementById('backToTop');
ย ย if (btn) btn.classList.toggle('visible', window.scrollY > 300);
});

document.addEventListener('DOMContentLoaded', SellDecisionApp.init);
</script>
</body>
</html>
