<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù‡Ù„ Ø£Ø¨ÙŠØ¹ Ø³Ù‡Ù…ÙŠØŸ â€” Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <style>
        /* ================= Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ================= */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            min-height: 100vh; padding: 20px; color: #f0f4f8;
        }

        .container { max-width: 900px; margin: 0 auto; }

        .page-header { text-align: center; margin-bottom: 30px; }
        .page-header h1 {
            font-size: 2.2rem; color: #ffffff; font-weight: bold;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
        }
        .page-header p {
            font-size: 0.95rem; color: #d0e1f9; margin-top: 8px; line-height: 1.6;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }

        /* ================= Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠØ© ================= */
        .advisor-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1.5px solid rgba(255,255,255,0.15);
            border-radius: 24px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
            margin-bottom: 20px; position: relative; overflow: hidden;
        }
        .advisor-card::before {
            content: ''; position: absolute; top: 0; right: 0; left: 0; height: 5px;
            background: linear-gradient(90deg, #f39c12, #e74c3c, #c0392b);
        }

        /* ================= Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… ================= */
        .progress-bar-wrap {
            background: rgba(255,255,255,0.08); border-radius: 10px;
            height: 8px; margin-bottom: 20px; overflow: hidden;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .progress-bar-fill {
            height: 100%; background: linear-gradient(90deg, #5a7fb5, #5a9d7a);
            border-radius: 10px; transition: width 0.4s ease; width: 0%;
        }
        .progress-label {
            font-size: 0.78rem; color: #d0e1f9; text-align: left;
            margin-bottom: 6px; direction: ltr; font-weight: 500;
        }

        /* ================= Ù†ØµÙˆØµ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ================= */
        .question-number {
            font-size: 0.8rem; color: #ffa726; font-weight: bold;
            margin-bottom: 6px; letter-spacing: 0.5px;
        }
        .question-text {
            font-size: 1.15rem; font-weight: bold; color: #ffffff;
            margin-bottom: 6px; line-height: 1.5; text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }
        .question-hint {
            font-size: 0.82rem; color: #c8d6e5; margin-bottom: 20px; line-height: 1.5;
            border-right: 3px solid #f39c12;
            background: rgba(243,156,18,0.12); padding: 10px 12px;
            border-radius: 0 8px 8px 0; backdrop-filter: blur(6px);
        }

        /* ================= Ø§Ù„Ø£Ø²Ø±Ø§Ø± ================= */
        .yn-buttons { display: flex; gap: 12px; margin-bottom: 10px; }
        .btn-yes, .btn-no {
            flex: 1; padding: 14px; font-size: 1.05rem; font-weight: bold;
            border: none; border-radius: 12px; cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s; font-family: inherit;
        }
        .btn-yes {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white; box-shadow: 0 4px 12px rgba(39,174,96,0.3);
        }
        .btn-yes:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(39,174,96,0.5); }
        .btn-no {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white; box-shadow: 0 4px 12px rgba(192,57,43,0.3);
        }
        .btn-no:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(192,57,43,0.5); }

        .btn-next {
            width: 100%; padding: 13px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: bold; cursor: pointer; font-family: inherit;
            transition: transform 0.15s, box-shadow 0.15s; margin-top: 18px;
        }
        .btn-next:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(90,127,181,0.5); }

        .btn-restart {
            display: inline-block; padding: 12px 30px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 12px;
            font-size: 0.95rem; font-weight: bold; cursor: pointer; font-family: inherit;
            transition: transform 0.15s; margin-top: 20px;
        }
        .btn-restart:hover { transform: translateY(-2px); }

        .back-to-top {
            position: fixed; bottom: 30px; left: 30px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white; border: none; border-radius: 50%;
            width: 48px; height: 48px; font-size: 1.3rem; cursor: pointer;
            box-shadow: 0 4px 15px rgba(90,127,181,0.4);
            transition: transform 0.3s, opacity 0.3s;
            opacity: 0; pointer-events: none;
            display: flex; align-items: center; justify-content: center; z-index: 999;
        }
        .back-to-top.visible { opacity: 1; pointer-events: auto; }
        .back-to-top:hover { transform: translateY(-3px); }

        /* ================= Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ================= */
        .result-card {
            display: none; border-radius: 24px; padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); text-align: center;
            background: rgba(255,255,255,0.08); backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px); border: 1.5px solid rgba(255,255,255,0.15);
        }
        .result-icon { font-size: 4rem; margin-bottom: 15px; }
        .result-title { font-size: 1.6rem; font-weight: bold; margin-bottom: 10px; }
        .result-title.sell   { color: #e74c3c; text-shadow: 0 0 10px rgba(231,76,60,0.5); }
        .result-title.hold   { color: #2ecc71; text-shadow: 0 0 10px rgba(46,204,113,0.5); }
        .result-title.review { color: #f39c12; text-shadow: 0 0 10px rgba(243,156,18,0.5); }

        /* ================= Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ ================= */
        .quant-card {
            margin-top: 25px; padding: 20px; border-radius: 18px;
            background: rgba(15,23,42,0.9); border: 1px solid rgba(148,163,184,0.3);
        }
        .quant-grid {
            display: grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap: 16px; margin-top: 15px;
        }
        .quant-title { font-size: 1rem; font-weight: bold; margin-bottom: 4px; color: #fbbf24; display:block;}
        .quant-input {
            width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #334155;
            background: #020617; color: #e5e7eb; text-align: right; direction: rtl;
        }
        .quant-input:focus { outline: none; border-color: #fbbf24; }
        .quant-result { margin-top: 15px; font-size: 0.9rem; color: #cbd5e1; line-height: 1.6;}
        .quant-badge { display: inline-block; padding: 4px 10px; border-radius: 999px; font-size: 0.8rem; margin-bottom: 6px; }
        .badge-hold   { background: rgba(16,185,129,0.15); color:#6ee7b7; }
        .badge-sell   { background: rgba(239,68,68,0.15); color:#fecaca; }
        .badge-review { background: rgba(250,204,21,0.15); color:#facc15; }

        .disclaimer-box {
            background: rgba(243,156,18,0.12); border: 2px solid rgba(243,156,18,0.3);
            border-radius: 12px; padding: 14px 16px; margin-top: 20px;
            color: #ffa726; font-weight: bold; font-size: 0.85rem; line-height: 1.6;
            backdrop-filter: blur(6px); text-align: center;
        }

        @media (max-width: 600px) {
            .page-header h1 { font-size: 1.7rem; }
            .advisor-card { padding: 20px; }
            .question-text { font-size: 1rem; }
            .yn-buttons { flex-direction: column; }
        }
    </style>
</head>
<body>

<button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰">â†‘</button>

<div class="container">
    
    <div class="page-header">
        <h1>ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ Ø³Ù‡Ù…ÙŠØŸ</h1>
        <p>Ø·Ø¨Ù‚ØªØ§Ù†: Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø³Ù„ÙˆÙƒÙŠ + Ù…Ø­Ø±Ùƒ ÙƒÙ…ÙŠ Ø±Ù‚Ù…ÙŠ. Ù„ØªØªØ®Ø° Ù‚Ø±Ø§Ø±Ùƒ Ø¨ÙˆØ¶ÙˆØ­ ÙˆØªÙˆØ§Ø²Ù†.</p>
    </div>

    <div class="advisor-card" id="questionCard">
        <div class="progress-label"><span id="progressText">Ø§Ù„Ø³Ø¤Ø§Ù„ 1</span></div>
        <div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressBar"></div></div>
        <div id="questionBody">
            </div>
    </div>

    <div class="result-card" id="resultCard">
        <div id="resultIcon" class="result-icon"></div>
        <div id="resultTitle" class="result-title"></div>
        <p id="resultText" style="color: #d0e1f9; line-height: 1.6; margin-bottom: 20px;"></p>
        <button class="btn-restart" onclick="restartApp()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ù‡Ù…</button>
    </div>

    <div class="advisor-card quant-card">
        <h3 style="margin-bottom:6px;">ğŸ“Š Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ (Ø£Ø±Ù‚Ø§Ù… Ø­Ù‚ÙŠÙ‚ÙŠØ©)</h3>
        <p style="font-size:0.85rem;color:#cbd5e1;">Ø§Ø®ØªÙŠØ§Ø±ÙŠ. Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„Ø³Ù‡Ù… Ù„ØªØ­Ù„ÙŠÙ„ ÙƒÙ…ÙŠ Ù…Ø³ØªÙ‚Ù„.</p>
        
        <div class="quant-grid">
            <div><label class="quant-title">Ù…ØªÙˆØ³Ø· Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡</label><input type="number" id="q_cost" class="quant-input quant-save" placeholder="0.00"></div>
            <div><label class="quant-title">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ</label><input type="number" id="q_price" class="quant-input quant-save" placeholder="0.00"></div>
            <div><label class="quant-title">ROE %</label><input type="number" id="q_roe" class="quant-input quant-save" placeholder="Ù…Ø«Ø§Ù„: 18"></div>
            <div><label class="quant-title">Ù†Ù…Ùˆ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª %</label><input type="number" id="q_rev" class="quant-input quant-save" placeholder="Ù…Ø«Ø§Ù„: 10"></div>
            <div><label class="quant-title">Debt/Equity</label><input type="number" id="q_debt" class="quant-input quant-save" placeholder="Ù…Ø«Ø§Ù„: 0.5"></div>
            <div><label class="quant-title">Altman Z</label><input type="number" id="q_z" class="quant-input quant-save" placeholder="Ø£Ù‚Ù„ Ù…Ù† 1.8 Ø®Ø·Ø±"></div>
            <div><label class="quant-title">P/E</label><input type="number" id="q_pe" class="quant-input quant-save" placeholder="0.00"></div>
            <div><label class="quant-title">P/E Ø§Ù„Ù‚Ø·Ø§Ø¹</label><input type="number" id="q_sectorpe" class="quant-input quant-save" placeholder="0.00"></div>
            <div><label class="quant-title">Ù…ØªÙˆØ³Ø· 200 ÙŠÙˆÙ…</label><input type="number" id="q_ma200" class="quant-input quant-save" placeholder="MA200"></div>
        </div>
        
        <button class="btn-next" onclick="runQuantEngine()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ â—€</button>
        <div id="quantResult" class="quant-result"></div>
    </div>

    <div class="disclaimer-box">
        âš ï¸ Ø·Ø¨Ù‚Ø© Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† ÙˆØ§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ Ù‡ÙŠ Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© ÙˆÙ„Ø§ ØªØºÙ†ÙŠ Ø¹Ù† Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø±Ø®ØµØ©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø´Ø±Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØªÙƒ ÙˆØ­Ø¯Ùƒ.
    </div>
</div>

<script>
// ========================================================
// 1. Ù…Ù†Ø·Ù‚ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø§Ù„Ø³Ù„ÙˆÙƒÙŠ (13 Ø³Ø¤Ø§Ù„Ø§Ù‹)
// ========================================================
const questions = [
    { text: "Ù‡Ù„ ØªØºÙŠØ±Øª Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„ØªÙŠ Ø¯ÙØ¹ØªÙƒ Ù„Ø´Ø±Ø§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù… ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©ØŸ", hint: "Ù…Ø«Ø§Ù„: ØªØºÙŠÙŠØ± Ø¬Ø°Ø±ÙŠ ÙÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŒ ÙÙ‚Ø¯Ø§Ù† Ù…ÙŠØ²Ø© ØªÙ†Ø§ÙØ³ÙŠØ©ØŒ ØªØºÙŠØ± ÙÙŠ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø´Ø±ÙƒØ©.", scoreYes: -3, scoreNo: 1 },
    { text: "Ù‡Ù„ ÙˆØ¬Ø¯Øª ÙØ±ØµØ© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø£Ø®Ø±Ù‰ Ø£ÙØ¶Ù„ Ø¨ÙˆØ¶ÙˆØ­ ÙˆÙ…Ø®Ø§Ø·Ø±Ù‡Ø§ Ù…Ø­Ø³ÙˆØ¨Ø©ØŸ", hint: "ÙŠÙØ³Ù…Ù‰ Ù‡Ø°Ø§ (ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ØµØ© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©). Ù„Ø§ ØªØ¨Ø¹ ÙÙ‚Ø· Ù„Ù„Ù…Ù„Ù„ØŒ Ø¨Ù„ Ù…Ù† Ø£Ø¬Ù„ ÙØ±ØµØ© Ø£ÙˆØ¶Ø­.", scoreYes: -2, scoreNo: 0 },
    { text: "Ù‡Ù„ ÙˆØµÙ„ Ø§Ù„Ø³Ù‡Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ø§Ù„Ø°ÙŠ Ø­Ø¯Ø¯ØªÙ‡ Ù…Ø³Ø¨Ù‚Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡ØŸ", hint: "Ø§Ù„Ø·Ù…Ø¹ Ù‚Ø¯ ÙŠØ¶ÙŠØ¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ØŒ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø®Ø·ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ù‡Ùˆ Ø§Ù„Ø£Ø³Ø§Ø³.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ù…ÙˆØ§Ù„ Ø¨Ø´ÙƒÙ„ Ù†Ù‚Ø¯ÙŠ Ø¶Ø±ÙˆØ±ÙŠ ÙˆØ¹Ø§Ø¬Ù„ØŸ", hint: "Ø§Ù„Ø³ÙŠÙˆÙ„Ø© Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ Ø£Ù‡Ù… Ù…Ù† Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø£ÙŠ Ø³Ù‡Ù… Ù…Ù‡Ù…Ø§ ÙƒØ§Ù† Ø¬ÙŠØ¯Ø§Ù‹.", scoreYes: -4, scoreNo: 0 },
    { text: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ù‚Ù„Ù‚ Ù…Ø³ØªÙ…Ø± ÙŠÙ…Ù†Ø¹Ùƒ Ù…Ù† Ø§Ù„Ù†ÙˆÙ… Ø¨Ø³Ø¨Ø¨ ØªØ°Ø¨Ø°Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù…ØŸ", hint: "Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ© Ù„Ø§ ØªÙ‚Ø¯Ø± Ø¨Ø«Ù…Ù†. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ù‡Ù… ÙŠØ±Ù‡Ù‚ÙƒØŒ ÙÙ‚Ø¯ ØªÙƒÙˆÙ† Ù…Ø®Ø§Ø·Ø±ØªÙ‡ Ø£Ø¹Ù„Ù‰ Ù…Ù† Ù‚Ø¯Ø±ØªÙƒ.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ ØªØ±Ø§Ø¬Ø¹Øª Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ø±ÙƒØ© Ø£Ùˆ Ø¥ÙŠØ±Ø§Ø¯Ø§ØªÙ‡Ø§ Ù„Ø¹Ø¯Ø© Ø£Ø±Ø¨Ø§Ø¹ Ù…ØªØªØ§Ù„ÙŠØ© Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…Ø¨Ø±Ø±ØŸ", hint: "Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø¬Ø±Ø³ Ø¥Ù†Ø°Ø§Ø± Ù„Ù…Ø´Ø§ÙƒÙ„ Ù‡ÙŠÙƒÙ„ÙŠØ© Ø£Ø¹Ù…Ù‚ ÙÙŠ Ø§Ù„Ø´Ø±ÙƒØ©.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ Ù‚Ø§Ù…Øª Ø§Ù„Ø´Ø±ÙƒØ© Ø¨ØªØ®ÙÙŠØ¶ Ø£Ùˆ Ø¥Ù„ØºØ§Ø¡ ØªÙˆØ²ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Dividends) Ù…Ø¤Ø®Ø±Ø§Ù‹ØŸ", hint: "Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª ØºØ§Ù„Ø¨Ø§Ù‹ Ù…Ø§ ÙŠÙƒÙˆÙ† Ø¹Ù„Ø§Ù…Ø© Ø¹Ù„Ù‰ Ù†Ù‚Øµ Ø§Ù„Ø³ÙŠÙˆÙ„Ø© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ© Ø£Ùˆ Ø®Ø·Ø· Ø¥Ø¹Ø§Ø¯Ø© Ù‡ÙŠÙƒÙ„Ø© Ù‚Ø§Ø³ÙŠØ©.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ Ø¸Ù‡Ø± Ù…Ù†Ø§ÙØ³ Ø¬Ø¯ÙŠØ¯ ÙˆØ´Ø±Ø³ ÙŠÙ‡Ø¯Ø¯ Ø§Ù„Ø­ØµØ© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ© Ù„Ù„Ø´Ø±ÙƒØ© Ø¨Ø´ÙƒÙ„ Ø¬Ø¯ÙŠØŸ", hint: "ØªØºÙŠØ± Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© Ù‚Ø¯ ÙŠØ¹Ù†ÙŠ ØªØ¢ÙƒÙ„ Ù‡ÙˆØ§Ù…Ø´ Ø§Ù„Ø±Ø¨Ø­ Ù…Ø³ØªÙ‚Ø¨Ù„Ø§Ù‹.", scoreYes: -1, scoreNo: 1 },
    { text: "Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø£Ùˆ ÙØ¶Ø§Ø¦Ø­ Ø¥Ø¯Ø§Ø±ÙŠØ© Ø®Ø·ÙŠØ±Ø© ØªØ­ÙŠØ· Ø¨Ø§Ù„Ø´Ø±ÙƒØ© Ø­Ø§Ù„ÙŠØ§Ù‹ØŸ", hint: "Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„ÙƒØ¨Ø±Ù‰ Ù‚Ø¯ ØªØ³ØªÙ†Ø²Ù Ø£Ù…ÙˆØ§Ù„ Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØªØ¯Ù…Ø± Ø³Ù…Ø¹ØªÙ‡Ø§ Ù„Ø¹Ù‚ÙˆØ¯.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ Ù†Ø³Ø¨Ø© Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù… ÙÙŠ Ù…Ø­ÙØ¸ØªÙƒ Ø£ØµØ¨Ø­Øª ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ ÙˆØªØ®Ù„ Ø¨Ù…Ø¨Ø¯Ø£ Ø§Ù„ØªÙ†ÙˆÙŠØ¹ØŸ", hint: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ§Ø²Ù† (Rebalancing) Ù…Ù‡Ù…Ø©. Ø¥Ø°Ø§ Ø£ØµØ¨Ø­ Ø§Ù„Ø³Ù‡Ù… ÙŠÙ…Ø«Ù„ 40% Ù…Ù† Ù…Ø­ÙØ¸ØªÙƒØŒ ÙÙ‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„ØªØ®ÙÙŠÙÙ‡.", scoreYes: -1, scoreNo: 1 },
    { text: "Ù‡Ù„ ØªÙÙƒØ± ÙÙŠ Ø§Ù„Ø¨ÙŠØ¹ ÙÙ‚Ø· Ù„Ø£Ù†Ùƒ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ù…Ù„Ù„ Ù…Ù† Ø¨Ø·Ø¡ Ø­Ø±ÙƒØ© Ø§Ù„Ø³Ù‡Ù…ØŸ", hint: "Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØµØ¨Ø±. Ø§Ù„Ù…Ù„Ù„ Ù„ÙŠØ³ Ø³Ø¨Ø¨Ø§Ù‹ Ù…Ø§Ù„ÙŠØ§Ù‹ Ù…Ø¨Ø±Ø±Ø§Ù‹ Ù„Ù„Ø¨ÙŠØ¹.", scoreYes: 2, scoreNo: 0 },
    { text: "Ù‡Ù„ Ø§Ù„Ø³Ù‡Ù… ÙŠØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø¢Ù† Ø¨ØªÙ‚ÙŠÙŠÙ… Ù…Ø¨Ø§Ù„Øº ÙÙŠÙ‡ Ø¬Ø¯Ø§Ù‹ (ÙÙ‚Ø§Ø¹Ø©) Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ù…ØªÙˆØ³Ø·Ø§ØªÙ‡ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©ØŸ", hint: "Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ù‚Ø¯ ØªØ³Ø¨Ù‚ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø¹Ø§Ø¯Ù„Ø© Ø¨ÙƒØ«ÙŠØ± ÙˆÙ‚Øª Ø§Ù„Ù†Ø´ÙˆØ©.", scoreYes: -2, scoreNo: 1 },
    { text: "Ù‡Ù„ ÙÙ‚Ø¯Øª Ø«Ù‚ØªÙƒ ØªÙ…Ø§Ù…Ø§Ù‹ ÙÙŠ Ù…ØµØ¯Ø§Ù‚ÙŠØ© ÙˆØ´ÙØ§ÙÙŠØ© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ù„Ù„Ø´Ø±ÙƒØ©ØŸ", hint: "Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù‡ÙŠ Ù‚Ø¨Ø·Ø§Ù† Ø§Ù„Ø³ÙÙŠÙ†Ø©. Ù„Ø§ ØªØ³ØªØ«Ù…Ø± Ù…Ø¹ Ø¥Ø¯Ø§Ø±Ø© Ù„Ø§ ØªØ«Ù‚ Ø¨Ù‡Ø§.", scoreYes: -3, scoreNo: 1 }
];

let currentQuestion = 0;
let behavioralScore = 0;

function renderQuestion() {
    const q = questions[currentQuestion];
    const progressPct = (currentQuestion / questions.length) * 100;
    
    document.getElementById('progressText').innerText = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestion + 1} Ù…Ù† ${questions.length}`;
    document.getElementById('progressBar').style.width = `${progressPct}%`;

    const html = `
        <div class="question-number">Ø³Ø¤Ø§Ù„ ${currentQuestion + 1}</div>
        <div class="question-text">${q.text}</div>
        <div class="question-hint">ğŸ’¡ ${q.hint}</div>
        <div class="yn-buttons">
            <button class="btn-yes" onclick="answerQuestion('yes')">Ù†Ø¹Ù…</button>
            <button class="btn-no" onclick="answerQuestion('no')">Ù„Ø§</button>
        </div>
    `;
    document.getElementById('questionBody').innerHTML = html;
}

function answerQuestion(answer) {
    const q = questions[currentQuestion];
    behavioralScore += (answer === 'yes') ? q.scoreYes : q.scoreNo;
    currentQuestion++;
    
    if (currentQuestion < questions.length) {
        renderQuestion();
    } else {
        showBehavioralResult();
    }
}

function showBehavioralResult() {
    document.getElementById('questionCard').style.display = 'none';
    document.getElementById('resultCard').style.display = 'block';
    document.getElementById('progressBar').style.width = '100%';

    const titleEl = document.getElementById('resultTitle');
    const iconEl = document.getElementById('resultIcon');
    const textEl = document.getElementById('resultText');

    if (behavioralScore <= -5) {
        iconEl.innerText = "ğŸ”´";
        titleEl.innerText = "Ø¥Ø´Ø§Ø±Ø© Ù‚ÙˆÙŠØ© Ù„Ù„Ø¨ÙŠØ¹";
        titleEl.className = "result-title sell";
        textEl.innerText = "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒØŒ ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø£Ø³Ø¨Ø§Ø¨ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø³Ù‡Ù… Ù‚Ø¯ ØªÙ„Ø§Ø´Øª (Ù…Ø«Ù„ ØªØºÙŠØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø£Ùˆ Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ù…Ø§Ø³Ø© Ù„Ù„Ø³ÙŠÙˆÙ„Ø©). ÙÙƒØ± Ø¬Ø¯ÙŠØ§Ù‹ ÙÙŠ Ø¬Ù†ÙŠ Ø£Ø±Ø¨Ø§Ø­Ùƒ Ø£Ùˆ ÙˆÙ‚Ù Ø®Ø³Ø§Ø±ØªÙƒ.";
    } else if (behavioralScore >= 6) {
        iconEl.innerText = "ğŸŸ¢";
        titleEl.innerText = "Ø¥Ø´Ø§Ø±Ø© ØµÙ„Ø¨Ø© Ù„Ù„Ø§Ø­ØªÙØ§Ø¸";
        titleEl.className = "result-title hold";
        textEl.innerText = "Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ù„Ù… ØªØªØºÙŠØ± Ø¨Ø´ÙƒÙ„ Ø¬ÙˆÙ‡Ø±ÙŠØŒ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ø¬Ø© Ù…Ù„Ø­Ø© Ù„Ù„Ø¨ÙŠØ¹. ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ø§Ù„Ø³Ù‡Ù… Ù„Ø§ ÙŠØ²Ø§Ù„ ÙŠØ­Ù‚Ù‚ Ø£Ù‡Ø¯Ø§Ù Ø®Ø·ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©ØŒ Ù„Ø°Ø§ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø®ÙŠØ§Ø± Ø¬ÙŠØ¯.";
    } else {
        iconEl.innerText = "ğŸŸ¡";
        titleEl.innerText = "ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯Ù‚ÙŠÙ‚Ø©";
        titleEl.className = "result-title review";
        textEl.innerText = "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒÙŠ Ù…ØªØ¨Ø§ÙŠÙ† ÙˆØºÙŠØ± Ø­Ø§Ø³Ù…. Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ) ÙÙŠ Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙ„Ø¨Ø©.";
    }
}

function restartApp() {
    currentQuestion = 0;
    behavioralScore = 0;
    document.getElementById('resultCard').style.display = 'none';
    document.getElementById('questionCard').style.display = 'block';
    renderQuestion();
}


// ========================================================
// 2. Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ
// ========================================================
function runQuantEngine() {
    const cost     = parseFloat(document.getElementById('q_cost').value)     || 0;
    const price    = parseFloat(document.getElementById('q_price').value)    || 0;
    const roe      = parseFloat(document.getElementById('q_roe').value)      || 0;
    const rev      = parseFloat(document.getElementById('q_rev').value)      || 0;
    const debt     = parseFloat(document.getElementById('q_debt').value)     || 0;
    const z        = parseFloat(document.getElementById('q_z').value)        || 0;
    const pe       = parseFloat(document.getElementById('q_pe').value)       || 0;
    const sectorPe = parseFloat(document.getElementById('q_sectorpe').value) || 0;
    const ma200    = parseFloat(document.getElementById('q_ma200').value)    || 0;

    const quantDiv = document.getElementById('quantResult');

    if (!cost || !price) {
        quantDiv.innerHTML = "<p style='color:#f97373; font-weight:bold;'>âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.</p>";
        return;
    }

    let score = 0;
    let details = [];

    // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬ÙˆØ¯Ø©
    if (roe > 15) { score += 1; details.push("âœ”ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† (ROE) Ù…Ù…ØªØ§Ø² > 15% (+1)"); }
    else if (roe > 0) { score -= 1; details.push("âŒ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† (ROE) Ø¶Ø¹ÙŠÙ â‰¤ 15% (-1)"); }

    if (rev > 8)  { score += 1; details.push("âœ”ï¸ Ù†Ù…Ùˆ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø¬ÙŠØ¯ > 8% (+1)"); }
    if (roe > 25) { score += 1; details.push("â­ Ø¬ÙˆØ¯Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ© (ROE > 25%) (+1)"); }

    // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ù…Ø§Ù†
    if (debt > 0 && debt < 0.8) { score += 1; details.push("âœ”ï¸ Ø§Ù„Ø¯ÙŠÙˆÙ† ØªØ­Øª Ø§Ù„Ø³ÙŠØ·Ø±Ø© Debt/Equity < 0.8 (+1)"); }
    else if (debt >= 0.8) { score -= 1; details.push("âŒ Ø¯ÙŠÙˆÙ† Ù…Ø±ØªÙØ¹Ø© Debt/Equity â‰¥ 0.8 (-1)"); }

    if (z > 2.99) { score += 1; details.push("âœ”ï¸ Ø£Ù…Ø§Ù† Ù…Ø§Ù„ÙŠ Ø¹Ø§Ù„ÙŠ (Altman Z > 3) (+1)"); }
    else if (z > 0 && z < 1.8) { score -= 3; details.push("ğŸš¨ Ø®Ø·Ø± Ù…Ø§Ù„ÙŠ (Altman Z < 1.8) (-3)"); }

    // Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Valuation)
    if (pe && sectorPe) {
        if (pe > sectorPe * 1.4) {
            score -= 2; details.push("âŒ Ø§Ù„Ø³Ù‡Ù… Ù…Ø¨Ø§Ù„Øº ÙÙŠ ØªÙ‚ÙŠÙŠÙ…Ù‡ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„Ù‚Ø·Ø§Ø¹ (-2)");
        } else if (pe < sectorPe) {
            score += 1; details.push("âœ”ï¸ Ø§Ù„Ø³Ù‡Ù… ÙŠØªØ¯Ø§ÙˆÙ„ Ø¨ØªÙ‚ÙŠÙŠÙ… Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù‚Ø·Ø§Ø¹ (+1)");
        }
    }

    // Ø§Ù„Ø²Ø®Ù… (Momentum)
    let momentum = "ØºÙŠØ± Ù…ØªÙˆÙØ±";
    if (ma200) {
        if (price > ma200) {
            score += 1; momentum = "Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ğŸ“ˆ"; details.push("âœ”ï¸ Ø§Ù„Ø³Ø¹Ø± ÙŠØªØ¯Ø§ÙˆÙ„ ÙÙˆÙ‚ Ù…ØªÙˆØ³Ø· 200 ÙŠÙˆÙ… (+1)");
        } else {
            score -= 2; momentum = "Ø³Ù„Ø¨ÙŠ ğŸ“‰"; details.push("âŒ Ø§Ù„Ø³Ø¹Ø± ÙŠØªØ¯Ø§ÙˆÙ„ ØªØ­Øª Ù…ØªÙˆØ³Ø· 200 ÙŠÙˆÙ… (-2)");
        }
    }

    const retPct = ((price - cost) / cost) * 100;

    let badgeClass = "badge-review";
    let text = "ğŸŸ¡ Ù…Ø±Ø§Ø¬Ø¹Ø© ÙˆØªØ­ÙˆØ·. Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ØºÙŠØ± Ø­Ø§Ø³Ù…Ø© Ø¨Ø´ÙƒÙ„ ÙƒØ§ÙÙ.";

    if (score >= 4) {
        badgeClass = "badge-hold";
        text = "ğŸŸ¢ Ø§Ø­ØªÙØ§Ø¸ ØµÙ„Ø¨. Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ØªÙ…ÙŠÙ„ Ø¨ÙˆØ¶ÙˆØ­ Ù„ØµØ§Ù„Ø­ Ø§Ù„Ø´Ø±ÙƒØ©.";
    } else if (score <= -1) {
        badgeClass = "badge-sell";
        text = "ğŸ”´ ØªØ³ÙŠÙŠÙ„ Ù…Ù†Ø¸Ù…. Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø£Ùˆ Ø§Ù„Ø²Ø®Ù… Ù…Ø±ØªÙØ¹Ø©.";
    }

    let html = `<div class="quant-badge ${badgeClass}">${text}</div>`;
    html += `<p style="margin: 10px 0;">Ø§Ù„Ù†Ù‚Ø§Ø·: <strong style="color:white;">${score}</strong> | Ø§Ù„Ø¹Ø§Ø¦Ø¯: <strong style="color:${retPct >= 0 ? '#2ecc71' : '#e74c3c'};">${retPct.toFixed(1)}%</strong> | Ø§Ù„Ø²Ø®Ù…: <strong>${momentum}</strong></p>`;
    html += "<div style='margin-top:10px; padding:15px; background:rgba(255,255,255,0.05); border-radius:10px; text-align:right;'>";
    details.forEach(d => html += `<div style="margin-bottom:8px;">${d}</div>`);
    html += "</div>";

    quantDiv.innerHTML = html;
}

// ========================================================
// 3. Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ù„Ø­ÙØ¸ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
// ========================================================
window.addEventListener('DOMContentLoaded', () => {
    // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø£ÙˆÙ„
    renderQuestion();

    // 2. Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„ÙƒÙ…ÙŠ (Ø¥Ù† ÙˆØ¬Ø¯Øª)
    const inputs = document.querySelectorAll('.quant-save');
    inputs.forEach(input => {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù‚ÙŠÙ…Ø© Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŒ Ø¶Ø¹Ù‡Ø§ ÙÙŠÙ‡
        if (localStorage.getItem(input.id)) {
            input.value = localStorage.getItem(input.id);
        }
        // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø£ÙŠ Ù‚ÙŠÙ…Ø©ØŒ Ø§Ø­ÙØ¸Ù‡Ø§ ÙÙˆØ±Ø§Ù‹
        input.addEventListener('input', function() {
            localStorage.setItem(this.id, this.value);
        });
    });
});

// Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
window.addEventListener('scroll', function () {
    const btn = document.getElementById('backToTop');
    if (btn) btn.classList.toggle('visible', window.scrollY > 300);
});
</script>
</body>
</html>
