<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚ÙŠÙŠÙ… Ø¬ÙˆØ¯Ø© Ø§Ù„Ø´Ø±ÙƒØ© | Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" defer></script>
    <style>
        /* ===== Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© ===== */
        .legal-banner {
            background: linear-gradient(135deg, #1a1400 0%, #2a1f00 60%, #1a1000) !important;
            border: 2px solid var(--gold) !important;
            border-radius: var(--radius-sm) !important;
            padding: 14px 18px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            box-shadow: var(--shadow-glow-gold), inset 0 0 30px rgba(245,158,11,0.04);
        }
        .legal-banner span:first-child { font-size: 1.3rem; flex-shrink: 0; }
        .legal-banner p { color: #fde68a !important; font-weight: bold; font-size: 0.88rem; line-height: 1.5; flex: 1; }

        h1 { text-align: center; color: var(--text-h) !important; margin-bottom: 8px; font-size: 2rem; }
        p.subtitle { text-align: center; color: var(--text-muted) !important; margin-bottom: 30px; }

        .rule-item {
            background: var(--bg-card2) !important;
            border-radius: var(--radius) !important;
            padding: 25px;
            margin: 20px 0;
            border-right: 4px solid var(--blue) !important;
            box-shadow: var(--shadow-card) !important;
            transition: var(--transition);
        }
        .rule-item:hover {
            border-right-color: var(--blue-light) !important;
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow-b) !important;
        }
        .rule-item h3 { color: var(--blue-light) !important; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px; font-size: 1.1rem; }

        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .input-group label { display: block; font-weight: 600; margin-bottom: 7px; font-size: 0.9rem; color: var(--text-body) !important; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border) !important;
            border-radius: var(--radius-xs) !important;
            font-size: 0.95rem;
            background: var(--bg-input) !important;
            color: var(--text-h) !important;
        }

        /* ===== ØªØ­Ø³ÙŠÙ† Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ ===== */
        .results-section {
            background: var(--bg-card) !important;
            border: 1px solid var(--border) !important;
            border-radius: 20px !important;
            padding: 40px;
            margin-top: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3) !important;
        }
        .results-section.pending { display: none; }

        .result-main-info {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255,255,255,0.03);
            border-radius: 20px;
        }

        .score-box { text-align: center; }
        .score-circle-text {
            font-size: 5.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
        }

        .evaluation-label {
            font-size: 1.4rem;
            font-weight: 800;
            margin-top: 10px;
            padding: 8px 25px;
            border-radius: 50px;
            display: inline-block;
        }

        /* Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (Indicator Cards) */
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 35px;
        }
        .ind-card {
            background: var(--bg-card2);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--border);
            transition: 0.3s;
        }
        .ind-card:hover { border-color: var(--gold); transform: translateY(-3px); }
        .ind-card .ind-icon { font-size: 1.8rem; margin-bottom: 10px; display: block; }
        .ind-card .ind-val { font-size: 1.1rem; font-weight: bold; color: var(--text-h); }
        .ind-card .ind-lbl { font-size: 0.8rem; color: var(--text-muted); display: block; margin-top: 5px; }

        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØªØ­Ù„ÙŠÙ„ */
        .analysis-container {
            background: rgba(59, 130, 246, 0.05);
            border-right: 5px solid var(--blue);
            padding: 25px;
            border-radius: 12px;
        }
        .analysis-container h4 { color: var(--blue-light); margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .analysis-list { list-style: none; padding: 0; }
        .analysis-list li { 
            position: relative; 
            padding-right: 25px; 
            margin-bottom: 12px; 
            color: var(--text-body); 
            line-height: 1.6;
            font-size: 0.95rem;
        }
        .analysis-list li::before { content: "â€¢"; position: absolute; right: 0; color: var(--gold); font-weight: bold; font-size: 1.5rem; line-height: 1; }

        .red-flag-zone {
            margin-top: 25px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--red-light);
            padding: 20px;
            border-radius: 12px;
            color: var(--red-light);
        }
        .red-flag-zone h5 { font-weight: 800; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }

        @media (max-width: 768px) {
            .result-main-info { flex-direction: column; }
            .score-circle-text { font-size: 4rem; }
        }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="navbar-container">
        <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
        <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="index.html" class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="advice.html" class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
            <a href="salary_calculator.html" class="navbar-item salary">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
            <a href="zakat_purification.html" class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
            <a href="financial_freedom.html" class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
            <a href="investor_tips.html" class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
            <a href="snowball_calculator.html" class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
            <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
            <a href="average_calculator.html" class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
            <a href="company_valuation.html" class="navbar-item company active">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
            <a href="retirement_calculator.html" class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
            <a href="portfolio_rating.html" class="navbar-item portfolio">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            <a href="stock_valuation.html" class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
            <a href="dca_calculator.html" class="navbar-item calculator">ğŸ“… DCA</a>
            <a href="sell_decision.html" class="navbar-item calculator">ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ØŸ</a>
            <a href="goal_calculator.html" class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
            <a href="allocation_calculator.html" class="navbar-item allocation">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
        </div>
    </div>
</nav>

<div class="container">
    <div class="legal-banner"><span>âš ï¸</span><p>Ø¥Ù‚Ø±Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ: Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙ‚Ø¯ÙŠØ±ÙŠØ©. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ø§ ØªÙÙ…Ø«Ù‘Ù„ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø§Ù„ÙŠØ© Ù…Ù„Ø²Ù…Ø©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªÙØ§Ø¯Ø© ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….</p></div>
    
    <h1>ğŸ¢ Ù…Ø­Ù„Ù„ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„Ø°ÙƒÙŠ</h1>
    <p class="subtitle">ØªÙ‚ÙŠÙŠÙ… Ø´Ø§Ù…Ù„ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ÙƒÙØ§Ø¡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</p>

    <div class="rule-item">
        <h3>1ï¸âƒ£ Ø§Ù„ÙƒÙØ§Ø¡Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
        <div class="input-grid">
            <div class="input-group"><label>Ù†Ù…Ùˆ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø³Ù†ÙˆÙŠ (%)</label><input type="number" id="growth" placeholder="15" oninput="scheduleUpdate()"></div>
            <div class="input-group"><label>Ø¯ÙˆØ±Ø© ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒØ§Ø´ (Ø£ÙŠØ§Ù…)</label><input type="number" id="cashCycle" placeholder="Ù…Ø«Ø§Ù„: 35" oninput="scheduleUpdate()"></div>
            <div class="input-group"><label>Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ (Ø§Ù„ÙƒØ§Ø´)</label>
                <select id="cashQuality" onchange="scheduleUpdate()">
                    <option value="">â€” Ø§Ø®ØªØ± â€”</option>
                    <option value="high">ÙƒØ§Ø´ Ø§Ù„ØªØ´ØºÙŠÙ„ > ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</option>
                    <option value="low">ÙƒØ§Ø´ Ø§Ù„ØªØ´ØºÙŠÙ„ < ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­</option>
                </select>
            </div>
        </div>
    </div>

    <div class="rule-item">
        <h3>2ï¸âƒ£ Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù…ÙŠØ²Ø©</h3>
        <div class="input-grid">
            <div class="input-group"><label>Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ÙˆÙ‚ ROE (%)</label><input type="number" id="roe" placeholder="18" oninput="scheduleUpdate()"></div>
            <div class="input-group"><label>Ø¯ÙˆØ±Ø§Ù† Ø§Ù„Ø£ØµÙˆÙ„</label>
                <select id="assetTurnover" onchange="scheduleUpdate()">
                    <option value="">â€” Ø§Ø®ØªØ± â€”</option>
                    <option value="high">Ù…Ø±ØªÙØ¹ (ÙƒÙØ§Ø¡Ø©)</option>
                    <option value="mid">Ù…ØªÙˆØ³Ø·</option>
                    <option value="low">Ù…Ù†Ø®ÙØ¶</option>
                </select>
            </div>
            <div class="input-group"><label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙŠÙˆÙ† (%)</label><input type="number" id="debt" placeholder="30" oninput="scheduleUpdate()"></div>
        </div>
    </div>

    <div class="rule-item">
        <h3>3ï¸âƒ£ Ø§Ù„Ù†ÙˆØ¹ÙŠØ© ÙˆØ§Ù„Ù†Ø²Ø§Ù‡Ø©</h3>
        <div class="input-grid">
            <div class="input-group"><label>Ø®Ù†Ø¯Ù‚ ØªÙ†Ø§ÙØ³ÙŠ (Moat)</label>
                <select id="moat" onchange="scheduleUpdate()">
                    <option value="">â€” Ø§Ø®ØªØ± â€”</option>
                    <option value="strong">Ù‚ÙˆÙŠ Ø¬Ø¯Ø§Ù‹</option>
                    <option value="none">Ø¶Ø¹ÙŠÙ / Ù„Ø§ ÙŠÙˆØ¬Ø¯</option>
                </select>
            </div>
            <div class="input-group"><label>Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ (CapEx)</label>
                <select id="capex" onchange="scheduleUpdate()">
                    <option value="light">Ø£ØµÙˆÙ„ Ø®ÙÙŠÙØ© (Ù…Ù…ØªØ§Ø²)</option>
                    <option value="heavy">Ø£ØµÙˆÙ„ Ø«Ù‚ÙŠÙ„Ø©</option>
                </select>
            </div>
            <div class="input-group"><label>Ù†Ø²Ø§Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</label>
                <select id="mgmt" onchange="scheduleUpdate()">
                    <option value="good">Ù…ÙˆØ«ÙˆÙ‚Ø©</option>
                    <option value="bad">Ø´Ø¨Ù‡Ø§Øª / ØªÙ„Ø§Ø¹Ø¨</option>
                </select>
            </div>
        </div>
    </div>

    <div class="results-section pending" id="resultsSection">
        <div class="result-main-info">
            <div class="score-box">
                <div class="score-circle-text" id="totalScore">0</div>
                <div style="color: var(--text-muted); font-weight: bold;">Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</div>
                <div id="evalBadge" class="evaluation-label">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
            </div>
            <div class="chart-box" style="width: 220px; height: 220px;">
                <canvas id="qualityChart"></canvas>
            </div>
        </div>

        <div class="indicators-grid" id="indicatorsGrid">
            </div>

        <div class="analysis-container">
            <h4>ğŸ” Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ:</h4>
            <ul class="analysis-list" id="analysisText">
                </ul>
        </div>

        <div id="redFlagContainer" class="red-flag-zone" style="display:none;">
            <h5 id="redFlagHeader">ğŸ›‘ ØªØ­Ø°ÙŠØ±Ø§Øª Ø­Ø±Ø¬Ø© (Red Flags):</h5>
            <div id="flagMsg"></div>
        </div>
    </div>
</div>

<script>
let qChart = null;
let updateTimer = null;

function toggleNavbar(){document.getElementById('navbarMenu').classList.toggle('open');}

function scheduleUpdate() {
    clearTimeout(updateTimer);
    updateTimer = setTimeout(updateUI, 300);
}

function updateChart(score, color) {
    const ctx = document.getElementById('qualityChart').getContext('2d');
    if (qChart) qChart.destroy();
    qChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            datasets: [{
                data: [score, 100 - score],
                backgroundColor: [color, 'rgba(255,255,255,0.05)'],
                borderWidth: 0
            }]
        },
        options: { cutout: '85%', plugins: { tooltip: { enabled: false }, legend: { display: false } } }
    });
}

function updateUI() {
    if (!isDataComplete()) return;

    const res = calculateSmartScore();
    const section = document.getElementById('resultsSection');
    section.classList.remove('pending');

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªÙŠØ¬Ø©
    document.getElementById('totalScore').textContent = res.total;
    
    // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    let color = '#f59e0b';
    let badge = document.getElementById('evalBadge');
    if(res.total >= 80) { color = '#10b981'; badge.textContent = 'ğŸŒŸ Ø´Ø±ÙƒØ© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©'; badge.style.color = '#10b981'; }
    else if(res.total >= 60) { color = '#3b82f6'; badge.textContent = 'âœ… Ø´Ø±ÙƒØ© Ø¬ÙŠØ¯Ø©'; badge.style.color = '#3b82f6'; }
    else { color = '#ef4444'; badge.textContent = 'ğŸš¨ Ù…Ø®Ø§Ø·Ø± Ø¹Ø§Ù„ÙŠØ©'; badge.style.color = '#ef4444'; }
    
    updateChart(res.total, color);

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
    const indGrid = document.getElementById('indicatorsGrid');
    indGrid.innerHTML = res.indicators.map(i => `
        <div class="ind-card">
            <span class="ind-icon">${i.icon}</span>
            <span class="ind-val">${i.val}</span>
            <span class="ind-lbl">${i.label}</span>
        </div>
    `).join('');

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ­Ù„ÙŠÙ„
    document.getElementById('analysisText').innerHTML = res.analysis.map(a => `<li>${a}</li>`).join('');

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø¹Ù„Ø§Ù… Ø§Ù„Ø­Ù…Ø±Ø§Ø¡
    const flagContainer = document.getElementById('redFlagContainer');
    if(res.flags.length > 0) {
        flagContainer.style.display = 'block';
        document.getElementById('flagMsg').innerHTML = res.flags.map(f => `â€¢ ${f}`).join('<br>');
    } else {
        flagContainer.style.display = 'none';
    }
}

function isDataComplete() {
    const ids = ['growth', 'cashCycle', 'roe', 'debt', 'cashQuality', 'assetTurnover', 'moat', 'mgmt'];
    return ids.every(id => document.getElementById(id).value !== "");
}

function calculateSmartScore() {
    const g = parseFloat(document.getElementById('growth').value);
    const c = parseFloat(document.getElementById('cashCycle').value);
    const roe = parseFloat(document.getElementById('roe').value);
    const d = parseFloat(document.getElementById('debt').value);
    const q = document.getElementById('cashQuality').value;
    const m = document.getElementById('moat').value;
    const mg = document.getElementById('mgmt').value;
    const t = document.getElementById('assetTurnover').value;

    let score = 0;
    let analysis = [];
    let flags = [];

    // Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ù„Ù„ØªØ­Ù„ÙŠÙ„
    if(roe >= 15 && d <= 30) { score += 30; analysis.push("ÙƒÙØ§Ø¡Ø© Ù…Ù…ØªØ§Ø²Ø© ÙÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ù…Ø¹ Ø¯ÙŠÙˆÙ† Ù…Ù†Ø®ÙØ¶Ø©."); }
    else if(roe < 10) { score += 5; analysis.push("Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¹Ù„Ù‰ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ø³Ø§Ù‡Ù…ÙŠÙ† Ø¶Ø¹ÙŠÙ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ø§Ù„ÙØ±Øµ Ø§Ù„Ø£Ø®Ø±Ù‰."); }
    
    if(q === 'high' && c <= 45) { score += 25; analysis.push("Ø¬ÙˆØ¯Ø© Ø£Ø±Ø¨Ø§Ø­ Ø­Ù‚ÙŠÙ‚ÙŠØ© (Cash Cow) Ù…Ø¹ Ø¯ÙˆØ±Ø© ØªØ­ØµÙŠÙ„ Ø³Ø±ÙŠØ¹Ø©."); }
    else if(q === 'low') { score -= 10; flags.push("ØªØ­Ø°ÙŠØ±: Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ù„Ø§ ØªØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ø³ÙŠÙˆÙ„Ø© Ù†Ù‚Ø¯ÙŠØ©."); }

    if(g >= 15) { score += 20; analysis.push("Ù†Ù…Ùˆ Ù‚ÙˆÙŠ ÙŠØªØ¬Ø§ÙˆØ² Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³ÙˆÙ‚."); }
    if(m === 'strong') { score += 15; analysis.push("Ø§Ù„Ø´Ø±ÙƒØ© ØªÙ…ØªÙ„Ùƒ Ø®Ù†Ø¯Ù‚ ØªÙ†Ø§ÙØ³ÙŠ ÙŠØ­Ù…ÙŠ Ù‡ÙˆØ§Ù…Ø´ Ø±Ø¨Ø­Ù‡Ø§."); }
    if(mg === 'bad') { score -= 40; flags.push("Ø®Ø·Ø± Ø¥Ø¯Ø§Ø±ÙŠ Ø­Ø±Ø¬: Ø§Ù„Ù†Ø²Ø§Ù‡Ø© ÙˆØ§Ù„Ø´ÙØ§ÙÙŠØ© Ù…ÙÙ‚ÙˆØ¯Ø©."); }

    return {
        total: Math.max(0, Math.min(score + 20, 100)),
        analysis: analysis,
        flags: flags,
        indicators: [
            {icon: 'ğŸ“ˆ', val: g+'%', label: 'Ø§Ù„Ù†Ù…Ùˆ'},
            {icon: 'ğŸ¦', val: d+'%', label: 'Ø§Ù„Ø¯ÙŠÙˆÙ†'},
            {icon: 'ğŸ”„', val: roe+'%', label: 'ROE'},
            {icon: 'â±ï¸', val: c+' ÙŠÙˆÙ…', label: 'Ø¯ÙˆØ±Ø© Ø§Ù„ÙƒØ§Ø´'}
        ]
    };
}
</script>

</body>
</html>
