<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨ - Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #e8f0f5 0%, #d0e0e8 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container { max-width: 1200px; margin: 0 auto; }

        /* ===== Header ===== */
        .header { text-align: center; color: #2c3e50; margin-bottom: 40px; }
        .header h1 {
            font-size: 2.5rem; font-weight: bold;
            margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header .subtitle { font-size: 1.2rem; opacity: 0.9; margin-bottom: 20px; }
        .header .dua {
            font-style: italic; font-size: 1rem; opacity: 0.9;
            padding: 15px; background: rgba(74,111,165,0.15);
            border-radius: 10px; backdrop-filter: blur(10px);
        }

        /* ===== Cards ===== */
        .calculator-section, .info-section {
            background: white; border-radius: 15px;
            padding: 30px; margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        /* ===== Inputs ===== */
        .input-group { margin-bottom: 20px; }
        .input-group label {
            display: block; margin-bottom: 8px;
            font-weight: bold; color: #333;
        }
        .input-group input,
        .input-group select {
            width: 100%; padding: 12px;
            border: 2px solid #e1e1e1; border-radius: 8px;
            font-size: 1rem; transition: border-color 0.3s;
            background: white;
        }
        .input-group input:focus,
        .input-group select:focus { outline: none; border-color: #5a7fb5; }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø®ØµØµØ© */
        #customRuleInputs {
            background: #f8f9fa; border-radius: 10px;
            padding: 20px; margin-top: 15px; display: none;
        }
        #customRuleInputs h4 { margin-bottom: 15px; color: #5a7fb5; }
        .custom-row {
            display: flex; align-items: center;
            gap: 10px; margin-bottom: 12px;
        }
        .custom-row label { min-width: 160px; font-weight: bold; font-size: 0.9rem; color: #333; }
        .custom-row input { flex: 1; padding: 8px 12px; border: 2px solid #e1e1e1; border-radius: 6px; font-size: 0.95rem; }
        .custom-row input:focus { outline: none; border-color: #5a7fb5; }
        .custom-total {
            text-align: center; font-weight: bold;
            padding: 10px; border-radius: 8px;
            margin-top: 10px; font-size: 1rem;
        }
        .custom-total.valid   { background: #d4edda; color: #155724; }
        .custom-total.invalid { background: #f8d7da; color: #721c24; }

        /* Ø®Ø·Ø£ */
        .input-error { color: #dc3545; font-size: 0.85rem; margin-top: 5px; display: none; }

        /* ===== Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ===== */
        .results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .result-card {
            background: #f8f9fa; border-radius: 10px;
            padding: 20px; text-align: center;
            border-right: 4px solid #5a7fb5; /* âœ… RTL: border-right */
            transition: transform 0.2s;
        }
        .result-card:hover { transform: translateY(-3px); }
        .result-card h3   { color: #333; margin-bottom: 8px; font-size: 1rem; }
        .result-card .amount {
            font-size: 1.6rem; font-weight: bold; color: #5a7fb5;
        }
        .result-card .percent {
            font-size: 0.9rem; color: #888; margin-top: 4px;
        }

        /* Ù„ÙˆÙ† Ø§Ù„Ø²ÙƒØ§Ø© */
        .result-card.zakat-card { border-right-color: #5a9d7a; }
        .result-card.zakat-card .amount { color: #5a9d7a; }

        /* ===== Chart ===== */
        .chart-container {
            margin-top: 30px; display: none; /* âœ… Ù…Ø®ÙÙŠ Ø¨Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        }
        .chart-wrapper {
            position: relative; height: 280px;
        }

        /* ===== Info Section ===== */
        .info-section h2 {
            color: #333; margin-bottom: 20px;
            font-size: 1.8rem; text-align: center;
        }
        .info-section p { line-height: 1.6; margin-bottom: 15px; color: #555; }

        .rule-explanation {
            background: #f8f9fa; padding: 20px;
            border-radius: 10px; margin-bottom: 15px;
        }
        .rule-explanation h3 { color: #5a7fb5; margin-bottom: 8px; }
        .rule-explanation p  { margin-bottom: 0; }

        .tips-list { list-style: none; padding: 0; }
        .tips-list li {
            padding: 10px 0; border-bottom: 1px solid #e1e1e1;
            display: flex; align-items: flex-start;
        }
        .tips-list li::before {
            content: "âœ“"; color: #28a745;
            font-weight: bold; margin-left: 10px;
            flex-shrink: 0;
        }

        /* ===== Responsive ===== */
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .calculator-section { padding: 20px; }
            .results { grid-template-columns: 1fr; }
            .chart-wrapper { height: 240px; }
            .input-row { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            body { padding: 10px; }
            .header h1 { font-size: 1.8rem; }
        }
    </style>
</head>
<body>
<div class="container">

    <link rel="stylesheet" href="navigation.css">
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
            <div class="navbar-menu" id="navbarMenu">
                <a href="index.html"                     class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="advice.html"                    class="navbar-item calculator">ğŸ’° Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø«Ø±ÙˆØ©</a>
                <a href="salary_calculator.html"         class="navbar-item salary">ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨</a>
                <a href="zakat_purification.html"        class="navbar-item zakat">ğŸ•Œ Ø§Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ø²ÙƒØ§Ø©</a>
                <a href="financial_freedom.html"         class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
                <a href="investor_tips.html"             class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</a>
                <a href="snowball_calculator.html"       class="navbar-item calculator">â„ï¸ Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬</a>
                <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
                <a href="average_calculator.html"        class="navbar-item calculator">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
                <a href="company_valuation.html"         class="navbar-item calculator">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
                <a href="retirement_calculator.html"     class="navbar-item calculator">ğŸ–ï¸ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
                <a href="portfolio_rating.html"          class="navbar-item calculator">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
                <a href="stock_valuation.html"           class="navbar-item valuation">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
            </div>
            <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
        </div>
    </nav>
    <script>
        function toggleNavbar() { document.getElementById('navbarMenu').classList.toggle('collapsed'); }
        document.addEventListener('DOMContentLoaded', function () {
            const cur = window.location.pathname.split('/').pop() || 'index.html';
            document.querySelectorAll('.navbar-item').forEach(el => {
                if (el.getAttribute('href') === cur || (cur === '' && el.getAttribute('href') === 'index.html'))
                    el.classList.add('active');
            });
        });
    </script>

    <!-- ===== Header ===== -->
    <div class="header">
        <h1>ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</h1>
        <div class="subtitle">Ù‚Ø³Ù‘Ù… Ø±Ø§ØªØ¨Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© â€” Ù‚ÙˆØ§Ø¹Ø¯ Ø¬Ø§Ù‡Ø²Ø© Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</div>
        <div class="dua">â Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ù†ÙØ§ÙÙØ¹Ù‹Ø§ØŒ ÙˆÙØ±ÙØ²Ù’Ù‚Ù‹Ø§ Ø·ÙÙŠÙÙ‘Ø¨Ù‹Ø§ØŒ ÙˆÙØ¹ÙÙ…ÙÙ„Ù‹Ø§ Ù…ÙØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù‹Ø§ â</div>
    </div>

    <!-- ===== Ø§Ù„Ø­Ø§Ø³Ø¨Ø© ===== -->
    <div class="calculator-section">

        <div class="input-row">
            <div class="input-group">
                <label for="salary">ğŸ’° Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ)</label>
                <input type="number" id="salary" placeholder="Ù…Ø«Ø§Ù„: 10000" min="0" step="100">
                <div class="input-error" id="salaryError">âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§ØªØ¨ Ù…ÙˆØ¬Ø¨</div>
            </div>
            <div class="input-group">
                <label for="rule">ğŸ“ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ø³ÙŠÙ…</label>
                <select id="rule">
                    <option value="">Ø§Ø®ØªØ± Ù‚Ø§Ø¹Ø¯Ø©...</option>
                    <option value="50-30-20">Ù‚Ø§Ø¹Ø¯Ø© 50/30/20 (Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªØŒ Ø±ØºØ¨Ø§ØªØŒ Ø§Ø¯Ø®Ø§Ø±)</option>
                    <option value="70-20-10">Ù‚Ø§Ø¹Ø¯Ø© 70/20/10 (Ù…ØµØ§Ø±ÙŠÙØŒ Ø§Ø¯Ø®Ø§Ø±ØŒ ØªØ¨Ø±Ø¹Ø§Øª)</option>
                    <option value="80-20">Ù‚Ø§Ø¹Ø¯Ø© 80/20 (Ø§Ø¯Ø®Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø§Ù„Ø¥Ù†ÙØ§Ù‚)</option>
                    <option value="custom">âœï¸ Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø®ØµØµØ©</option>
                </select>
            </div>
        </div>

        <!-- Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø®ØµØµØ© -->
        <div id="customRuleInputs">
            <h4>âœï¸ Ø­Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ© (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 100%)</h4>
            <div class="custom-row">
                <label>ğŸ  Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (%)</label>
                <input type="number" id="c1" placeholder="50" min="0" max="100" oninput="validateCustom()">
            </div>
            <div class="custom-row">
                <label>ğŸ‰ Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ (%)</label>
                <input type="number" id="c2" placeholder="20" min="0" max="100" oninput="validateCustom()">
            </div>
            <div class="custom-row">
                <label>ğŸ’° Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (%)</label>
                <input type="number" id="c3" placeholder="20" min="0" max="100" oninput="validateCustom()">
            </div>
            <div class="custom-row">
                <label>ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„ØµØ¯Ù‚Ø§Øª (%)</label>
                <input type="number" id="c4" placeholder="2.5" min="0" max="100" step="0.1" oninput="validateCustom()">
            </div>
            <div class="custom-row">
                <label>ğŸ“¦ Ø£Ø®Ø±Ù‰ (%)</label>
                <input type="number" id="c5" placeholder="0" min="0" max="100" oninput="validateCustom()">
            </div>
            <div class="custom-total" id="customTotal">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0%</div>
        </div>

        <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
        <div id="results" class="results" style="display: none;"></div>

        <!-- Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ -->
        <div class="chart-container" id="chartContainer">
            <div class="chart-wrapper">
                <canvas id="salaryChart"></canvas>
            </div>
        </div>

    </div>

    <!-- ===== Ù„Ù…Ø§Ø°Ø§ Ø§Ù„ØªÙ‚Ø³ÙŠÙ… Ù…Ù‡Ù… ===== -->
    <div class="info-section">
        <h2>Ù„Ù…Ø§Ø°Ø§ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨ Ù…Ù‡Ù…ØŸ</h2>
        <p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø¥Ù†ÙØ§Ù‚Ùƒ ÙˆØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§ÙÙƒ. Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª ØªÙØ¸Ù‡Ø± Ø£Ù† Ù…ØªØ¨Ø¹ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙŠÙˆÙØ±ÙˆÙ† 20% Ø£ÙƒØ«Ø± ÙˆÙŠØ´Ø¹Ø±ÙˆÙ† Ø¨Ø¶ØºØ· Ù…Ø§Ù„ÙŠ Ø£Ù‚Ù„ Ø¨Ù†Ø³Ø¨Ø© 40%.</p>
        <p>Ø§Ù„Ø­Ø§Ø³Ø¨Ø© ØªÙÙ‚ØªØ±Ø­ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²ÙƒØ§Ø© (2.5%) ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ© â€” Ø§Ù„Ø¨Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ÙØ²ÙƒÙ‘Ù‰.</p>
    </div>

    <!-- ===== Ø´Ø±Ø­ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ===== -->
    <div class="info-section">
        <h2>Ø´Ø±Ø­ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h2>
        <div class="rule-explanation">
            <h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 50/30/20</h3>
            <p>50% Ù„Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù…Ø£ÙƒÙ„ØŒ Ù…Ø³ÙƒÙ†ØŒ Ù†Ù‚Ù„) | 30% Ù„Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ | 20% Ù„Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±. Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†.</p>
        </div>
        <div class="rule-explanation">
            <h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 70/20/10</h3>
            <p>70% Ù„Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙˆØ§Ù„Ø­ÙŠØ§ØªÙŠØ© | 20% Ù„Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± | 10% Ù„Ù„ØªØ¨Ø±Ø¹Ø§Øª ÙˆØ§Ù„ØµØ¯Ù‚Ø§Øª. ØªÙÙ†Ø§Ø³Ø¨ Ù…Ù† ÙŠÙØ±ÙŠØ¯ Ø§Ù„ØªÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø¥Ù†ÙØ§Ù‚ ÙˆØ§Ù„Ø¹Ø·Ø§Ø¡.</p>
        </div>
        <div class="rule-explanation">
            <h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 80/20</h3>
            <p>Ø§Ø¨Ø¯Ø£ Ø¨ØªÙˆÙÙŠØ± 20% Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø£Ù†ÙÙ‚ Ø§Ù„Ø¨Ø§Ù‚ÙŠ (80%) Ø¨Ø­Ø±ÙŠØ©. Ø§Ù„Ù…Ø¨Ø¯Ø£: "Ø§Ø¯ÙØ¹ Ù„Ù†ÙØ³Ùƒ Ø£ÙˆÙ„Ø§Ù‹" â€” Ø¨Ø³ÙŠØ·Ø© ÙˆÙØ¹Ù‘Ø§Ù„Ø©.</p>
        </div>
        <div class="rule-explanation">
            <h3>âœï¸ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ©</h3>
            <p>Ø­Ø¯Ø¯ Ù†Ø³Ø¨Ùƒ Ø¨Ù†ÙØ³Ùƒ Ø¨Ù…Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ ÙˆØ¶Ø¹Ùƒ. Ø£Ø¶Ù Ù†Ø³Ø¨Ø© Ø§Ù„Ø²ÙƒØ§Ø© (2.5%) ÙƒØ¨Ù†Ø¯ Ù…Ø³ØªÙ‚Ù„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©.</p>
        </div>
    </div>

    <!-- ===== Ù†ØµØ§Ø¦Ø­ ===== -->
    <div class="info-section">
        <h2>Ù†ØµØ§Ø¦Ø­ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø¨Ø°ÙƒØ§Ø¡</h2>
        <ul class="tips-list">
            <li>Ø§Ø¯ÙØ¹ Ù„Ù†ÙØ³Ùƒ Ø£ÙˆÙ„Ø§Ù‹ â€” Ø¶Ø¹ Ø¬Ø²Ø¡Ø§Ù‹ Ù…Ù† Ø±Ø§ØªØ¨Ùƒ ÙÙŠ Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ù‚Ø¨Ù„ Ø£ÙŠ Ø¥Ù†ÙØ§Ù‚ Ø¢Ø®Ø±</li>
            <li>Ø£Ù†Ø´Ø¦ ØµÙ†Ø¯ÙˆÙ‚ Ø·ÙˆØ§Ø±Ø¦ ÙŠØºØ·ÙŠ 3-6 Ø£Ø´Ù‡Ø± Ù…Ù† Ù…ØµØ§Ø±ÙŠÙÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</li>
            <li>Ø±Ø§Ø¬Ø¹ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ø´Ù‡Ø±ÙŠØ§Ù‹ ÙˆØ¹Ø¯Ù‘Ù„Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ Ø§Ù„Ù…ØªØºÙŠØ±Ø©</li>
            <li>ØªØ¬Ù†Ø¨ Ø§Ù„Ø¯ÙŠÙˆÙ† ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ© ÙˆØ³Ø¯Ù‘Ø¯ Ù…Ø§ Ø¹Ù„ÙŠÙƒ Ø¨Ø§Ù†ØªØ¸Ø§Ù…</li>
            <li>Ø§Ø³ØªØ«Ù…Ø± Ø§Ù„ÙØ§Ø¦Ø¶ ÙÙŠ ÙØ±Øµ Ø¢Ù…Ù†Ø© ÙˆÙ…Ø¯Ø±ÙˆØ³Ø© â€” Ø§Ù„Ø²Ù…Ù† Ø­Ù„ÙŠÙ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø§Ù„ØµØ¨ÙˆØ±</li>
            <li>Ø£Ø®Ø±Ø¬ Ø§Ù„Ø²ÙƒØ§Ø© ÙÙŠ Ù…ÙˆØ¹Ø¯Ù‡Ø§ â€” Ø§Ù„Ø¨Ø±ÙƒØ© ØªØ¹ÙˆÙ‘Ø¶ Ù…Ø§ Ø£ÙØ®Ø° ÙˆØ²ÙŠØ§Ø¯Ø©</li>
        </ul>
    </div>

</div><!-- end .container -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
/* =====================================================
   Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
   ===================================================== */
let salaryChart = null; // âœ… Ù„Ø§ Ù†Ø¨Ù†ÙŠ Chart ÙØ§Ø±ØºØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„

const COLORS = ['#5a7fb5','#e89d5a','#5a9d7a','#d67a6a','#8a7ba8','#6ab0d4'];

/* =====================================================
   Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§ØªØ¨
   ===================================================== */
function validateSalary(value) {
    const errEl = document.getElementById('salaryError');
    if (value <= 0 || isNaN(value)) {
        errEl.style.display = 'block';
        return false;
    }
    errEl.style.display = 'none';
    return true;
}

/* =====================================================
   Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ© â€” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
   ===================================================== */
function validateCustom() {
    const ids   = ['c1','c2','c3','c4','c5'];
    const total = ids.reduce((s, id) => s + (parseFloat(document.getElementById(id).value) || 0), 0);
    const el    = document.getElementById('customTotal');

    el.textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toFixed(1)}%`;
    el.className   = 'custom-total ' + (Math.abs(total - 100) < 0.01 ? 'valid' : 'invalid');

    calculateSalary(); // Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù†Ø³Ø¨
}

/* =====================================================
   Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ©
   ===================================================== */
document.getElementById('rule').addEventListener('change', function () {
    const custom = document.getElementById('customRuleInputs');
    custom.style.display = this.value === 'custom' ? 'block' : 'none';
    calculateSalary();
});

/* =====================================================
   Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
   ===================================================== */
function calculateSalary() {
    const salaryRaw = parseFloat(document.getElementById('salary').value);
    const rule      = document.getElementById('rule').value;

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ùˆ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ù†Ø§Ù‚ØµØ©
    if (!salaryRaw || !rule) {
        document.getElementById('results').style.display = 'none';
        document.getElementById('chartContainer').style.display = 'none';
        return;
    }

    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ø§Ù„Ø¨Ø©
    if (!validateSalary(salaryRaw)) {
        document.getElementById('results').style.display = 'none';
        document.getElementById('chartContainer').style.display = 'none';
        return;
    }

    const salary = salaryRaw;
    let breakdown = {};

    switch (rule) {
        case '50-30-20':
            breakdown = {
                'ğŸ  Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©':  { amount: salary * 0.50, pct: 50 },
                'ğŸ‰ Ø±ØºØ¨Ø§Øª ÙˆØªØ±ÙÙŠÙ‡':      { amount: salary * 0.30, pct: 30 },
                'ğŸ’° Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ø³ØªØ«Ù…Ø§Ø±':    { amount: salary * 0.20, pct: 20 },
            };
            break;
        case '70-20-10':
            breakdown = {
                'ğŸ  Ù…ØµØ§Ø±ÙŠÙ ÙŠÙˆÙ…ÙŠØ©':      { amount: salary * 0.70, pct: 70 },
                'ğŸ’° Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ø³ØªØ«Ù…Ø§Ø±':    { amount: salary * 0.20, pct: 20 },
                'ğŸ•Œ ØªØ¨Ø±Ø¹Ø§Øª ÙˆØµØ¯Ù‚Ø§Øª':     { amount: salary * 0.10, pct: 10 },
            };
            break;
        case '80-20':
            breakdown = {
                'ğŸ’° Ø§Ø¯Ø®Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹':       { amount: salary * 0.20, pct: 20 },
                'ğŸ›’ Ø¥Ù†ÙØ§Ù‚ Ø­Ø±':          { amount: salary * 0.80, pct: 80 },
            };
            break;
        case 'custom': {
            const ids    = ['c1','c2','c3','c4','c5'];
            const names  = ['ğŸ  Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©','ğŸ‰ Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡','ğŸ’° Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±','ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„ØµØ¯Ù‚Ø§Øª','ğŸ“¦ Ø£Ø®Ø±Ù‰'];
            const total  = ids.reduce((s,id) => s + (parseFloat(document.getElementById(id).value)||0), 0);

            if (Math.abs(total - 100) > 0.01) {
                // Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙŠØ³ 100 â€” Ø§Ø¹Ø±Ø¶ ØªÙ†Ø¨ÙŠÙ‡Ø§Ù‹
                document.getElementById('results').style.display = 'none';
                document.getElementById('chartContainer').style.display = 'none';
                return;
            }

            ids.forEach((id, i) => {
                const pct = parseFloat(document.getElementById(id).value) || 0;
                if (pct > 0) breakdown[names[i]] = { amount: salary * pct / 100, pct };
            });
            break;
        }
    }

    if (Object.keys(breakdown).length === 0) return;

    displayResults(breakdown, rule);
    updateChart(breakdown);

    document.getElementById('results').style.display       = 'grid';
    document.getElementById('chartContainer').style.display = 'block';
}

/* =====================================================
   Ø¹Ø±Ø¶ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù†ØªØ§Ø¦Ø¬
   ===================================================== */
function displayResults(breakdown, rule) {
    const container = document.getElementById('results');
    container.innerHTML = '';

    Object.entries(breakdown).forEach(([label, { amount, pct }]) => {
        const isZakat = label.includes('Ø²ÙƒØ§Ø©') || label.includes('ØªØ¨Ø±Ø¹') || label.includes('ØµØ¯Ù‚Ø©');
        const card = document.createElement('div');
        card.className = 'result-card' + (isZakat ? ' zakat-card' : '');
        card.innerHTML = `
            <h3>${label}</h3>
            <div class="amount">${amount.toLocaleString('ar-SA', {maximumFractionDigits: 2})} Ø±ÙŠØ§Ù„</div>
            <div class="percent">${pct}% Ù…Ù† Ø§Ù„Ø±Ø§ØªØ¨</div>
        `;
        container.appendChild(card);
    });
}

/* =====================================================
   Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ â€” âœ… ÙŠÙÙ†Ø´Ø£ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©
   ===================================================== */
function updateChart(breakdown) {
    const labels = Object.keys(breakdown);
    const data   = Object.values(breakdown).map(v => v.amount);
    const ctx    = document.getElementById('salaryChart').getContext('2d');

    if (salaryChart) {
        salaryChart.data.labels                    = labels;
        salaryChart.data.datasets[0].data          = data;
        salaryChart.data.datasets[0].backgroundColor = COLORS.slice(0, labels.length);
        salaryChart.update();
    } else {
        salaryChart = new Chart(ctx, {
            type: 'doughnut', // âœ… Ø¯ÙˆÙ†Ø§Øª Ø£Ø¬Ù…Ù„ Ù…Ù† pie ÙˆÙŠÙØ¸Ù‡Ø± Ø§Ù„Ù†Ø³Ø¨ Ø£ÙˆØ¶Ø­
            data: {
                labels,
                datasets: [{
                    data,
                    backgroundColor: COLORS.slice(0, labels.length),
                    borderWidth: 2,
                    borderColor: '#fff',
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '55%',
                plugins: {
                    legend: { position: 'bottom', rtl: true },
                    tooltip: {
                        callbacks: {
                            label: ctx => {
                                const val = ctx.parsed;
                                const pct = (val / data.reduce((a,b)=>a+b,0) * 100).toFixed(1);
                                return ` ${ctx.label}: ${val.toLocaleString('ar-SA', {maximumFractionDigits:2})} Ø±ÙŠØ§Ù„ (${pct}%)`;
                            }
                        }
                    }
                }
            }
        });
    }
}

/* =====================================================
   Listeners
   ===================================================== */
document.getElementById('salary').addEventListener('input', calculateSalary);
</script>

<script data-goatcounter="https://investornote.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
