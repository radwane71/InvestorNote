<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨ - Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ===== Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© ===== */
        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { 
            font-size: 2.5rem; 
            font-weight: bold; 
            margin-bottom: 10px; 
            color: var(--text-h) !important;
            text-shadow: 0 2px 8px rgba(0,0,0,0.5);
        }
        .header .subtitle { 
            font-size: 1.2rem; 
            color: var(--text-muted) !important;
            margin-bottom: 20px; 
        }
        .header .dua { 
            font-style: italic; 
            font-size: 1rem; 
            color: var(--text-body) !important;
            padding: 15px; 
            background: var(--bg-card2) !important;
            border: 1px solid var(--border) !important;
            border-radius: var(--radius-sm) !important;
        }

        .calculator-section, .info-section { 
            background: var(--bg-card) !important;
            border: 1px solid var(--border) !important;
            border-radius: var(--radius) !important;
            padding: 30px; 
            margin-bottom: 30px; 
            box-shadow: var(--shadow-card) !important;
        }

        .input-group { margin-bottom: 20px; }
        .input-group label { 
            display: block; 
            margin-bottom: 8px; 
            font-weight: 600; 
            color: var(--text-body) !important;
        }
        .input-group input, .input-group select { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid var(--border) !important;
            border-radius: var(--radius-xs) !important; 
            font-size: 1rem; 
            transition: var(--transition); 
            background: var(--bg-input) !important;
            color: var(--text-h) !important;
        }
        .input-group input:focus, .input-group select:focus { 
            outline: none; 
            border-color: var(--blue) !important;
            box-shadow: var(--shadow-glow-b) !important;
        }
        .input-group input::placeholder { color: var(--text-muted) !important; }

        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        #customRuleInputs { 
            background: var(--bg-card2) !important;
            border: 1px solid var(--border) !important;
            border-radius: var(--radius-sm) !important; 
            padding: 20px; 
            margin-top: 15px; 
            display: none; 
        }
        #customRuleInputs h4 { 
            margin-bottom: 15px; 
            color: var(--blue-light) !important; 
        }
        .custom-row { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
        .custom-row label { 
            min-width: 160px; 
            font-weight: 600; 
            font-size: 0.9rem; 
            color: var(--text-body) !important; 
        }
        .custom-row input { 
            flex: 1; 
            padding: 10px 12px; 
            border: 2px solid var(--border) !important;
            border-radius: var(--radius-xs) !important; 
            font-size: 0.95rem;
            background: var(--bg-input) !important;
            color: var(--text-h) !important;
        }
        .custom-row input:focus { 
            outline: none; 
            border-color: var(--blue) !important;
            box-shadow: var(--shadow-glow-b) !important;
        }
        .custom-total { 
            text-align: center; 
            font-weight: bold; 
            padding: 12px; 
            border-radius: var(--radius-xs) !important; 
            margin-top: 15px; 
            font-size: 1rem; 
        }
        .custom-total.valid   { 
            background: rgba(16,185,129,0.15) !important;
            border: 1px solid rgba(16,185,129,0.4) !important;
            color: var(--green-light) !important; 
        }
        .custom-total.invalid { 
            background: rgba(239,68,68,0.15) !important;
            border: 1px solid rgba(239,68,68,0.4) !important;
            color: var(--red-light) !important; 
        }
        .input-error { 
            color: var(--red-light) !important; 
            font-size: 0.85rem; 
            margin-top: 5px; 
            display: none; 
        }

        /* ===== Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ===== */
        .results { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
            gap: 20px; 
            margin-top: 30px; 
        }
        .result-card { 
            background: var(--bg-card2) !important;
            border: 1px solid var(--border) !important;
            border-radius: var(--radius-sm) !important; 
            padding: 25px; 
            text-align: center; 
            border-right: 4px solid var(--blue) !important;
            transition: var(--transition);
        }
        .result-card:hover { 
            transform: translateY(-3px);
            box-shadow: var(--shadow-glow-b) !important;
            border-right-color: var(--blue-light) !important;
        }
        .result-card h3 { 
            color: var(--text-h) !important;
            margin-bottom: 12px; 
            font-size: 1rem; 
        }
        .result-card .amount { 
            font-size: 1.8rem; 
            font-weight: bold; 
            color: var(--blue-light) !important;
            margin-bottom: 5px;
        }
        .result-card .percent { 
            font-size: 0.9rem; 
            color: var(--text-muted) !important; 
            margin-top: 4px; 
        }
        .result-card.zakat-card { 
            border-right-color: var(--green) !important; 
        }
        .result-card.zakat-card .amount { 
            color: var(--green-light) !important; 
        }

        .chart-container { 
            margin-top: 30px; 
            display: none;
            background: var(--bg-card2) !important;
            border: 1px solid var(--border) !important;
            border-radius: var(--radius) !important;
            padding: 20px;
        }
        .chart-wrapper { position: relative; height: 300px; }

        /* ===== Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ===== */
        .info-section h2 { 
            color: var(--text-h) !important;
            margin-bottom: 20px; 
            font-size: 1.6rem; 
            text-align: center; 
        }
        .info-section p { 
            line-height: 1.7; 
            margin-bottom: 15px; 
            color: var(--text-body) !important; 
        }
        .rule-explanation { 
            background: var(--bg-card2) !important;
            border: 1px solid var(--border) !important;
            padding: 20px; 
            border-radius: var(--radius-sm) !important;
            margin-bottom: 15px; 
            transition: var(--transition);
        }
        .rule-explanation:hover {
            border-color: var(--blue) !important;
        }
        .rule-explanation h3 { 
            color: var(--blue-light) !important;
            margin-bottom: 8px; 
        }
        .rule-explanation p { 
            margin-bottom: 0; 
            color: var(--text-body) !important;
        }
        .tips-list { 
            list-style: none; 
            padding: 0; 
        }
        .tips-list li { 
            padding: 12px 0; 
            border-bottom: 1px solid var(--border) !important;
            display: flex; 
            align-items: flex-start; 
            color: var(--text-body) !important;
        }
        .tips-list li::before { 
            content: "âœ“"; 
            color: var(--green-light) !important; 
            font-weight: bold; 
            margin-left: 10px; 
            flex-shrink: 0; 
        }

        @media (max-width: 768px) { 
            .header h1 { font-size: 2rem; } 
            .calculator-section { padding: 20px; } 
            .results { grid-template-columns: 1fr; } 
            .chart-wrapper { height: 240px; } 
            .input-row { grid-template-columns: 1fr; } 
        }
    </style>
</head>
<body>
<div class="container">
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
            <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
            <div class="navbar-menu" id="navbarMenu">
                <a href="index.html"                     class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="advice.html"                    class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
                <a href="salary_calculator.html"         class="navbar-item salary active">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
                <a href="zakat_purification.html"        class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
                <a href="financial_freedom.html"         class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
                <a href="investor_tips.html"             class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
                <a href="snowball_calculator.html"       class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
                <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
                <a href="average_calculator.html"        class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
                <a href="company_valuation.html"         class="navbar-item company">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
                <a href="retirement_calculator.html"     class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
                <a href="portfolio_rating.html"          class="navbar-item portfolio">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
                <a href="stock_valuation.html"           class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
                <a href="dca_calculator.html"            class="navbar-item calculator">ğŸ“… DCA</a>
                <a href="sell_decision.html"             class="navbar-item calculator">ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ØŸ</a>
                <a href="goal_calculator.html"           class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
                <a href="allocation_calculator.html"     class="navbar-item allocation">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            </div>
        </div>
    </nav>
    <script>
        function toggleNavbar(){document.getElementById('navbarMenu').classList.toggle('open');}
        document.addEventListener('DOMContentLoaded',function(){
            const page=(window.location.pathname.split('/').pop()||'index.html').split('?')[0]||'index.html';
            document.querySelectorAll('.navbar-item').forEach(function(el){
                el.classList.remove('active');
                if((el.getAttribute('href')||'').split('?')[0]===page)el.classList.add('active');
            });
        });
    </script>

    <div class="header">
        <h1>ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</h1>
        <div class="subtitle">Ù‚Ø³Ù‘Ù… Ø±Ø§ØªØ¨Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© â€” Ù‚ÙˆØ§Ø¹Ø¯ Ø¬Ø§Ù‡Ø²Ø© Ù„ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</div>
        <div class="dua">â Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ Ù†ÙØ§ÙÙØ¹Ù‹Ø§ØŒ ÙˆÙØ±ÙØ²Ù’Ù‚Ù‹Ø§ Ø·ÙÙŠÙÙ‘Ø¨Ù‹Ø§ØŒ ÙˆÙØ¹ÙÙ…ÙÙ„Ù‹Ø§ Ù…ÙØªÙÙ‚ÙØ¨ÙÙ‘Ù„Ù‹Ø§ â</div>
    </div>

    <div class="calculator-section">
        <div class="input-row">
            <div class="input-group"><label for="salary">ğŸ’° Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø±ÙŠØ§Ù„)</label><input type="number" id="salary" placeholder="Ù…Ø«Ø§Ù„: 10000" min="0" step="100"><div class="input-error" id="salaryError">âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§ØªØ¨ Ù…ÙˆØ¬Ø¨</div></div>
            <div class="input-group"><label for="rule">ğŸ“ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ø³ÙŠÙ…</label><select id="rule"><option value="">Ø§Ø®ØªØ± Ù‚Ø§Ø¹Ø¯Ø©...</option><option value="50-30-20">Ù‚Ø§Ø¹Ø¯Ø© 50/30/20</option><option value="70-20-10">Ù‚Ø§Ø¹Ø¯Ø© 70/20/10</option><option value="80-20">Ù‚Ø§Ø¹Ø¯Ø© 80/20</option><option value="custom">âœï¸ Ù…Ø®ØµØµØ©</option></select></div>
        </div>
        <div id="customRuleInputs">
            <h4>âœï¸ Ø­Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø¨ (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ 100%)</h4>
            <div class="custom-row"><label>ğŸ  Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (%)</label><input type="number" id="c1" placeholder="50" min="0" max="100" oninput="validateCustom()"></div>
            <div class="custom-row"><label>ğŸ‰ Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ (%)</label><input type="number" id="c2" placeholder="20" min="0" max="100" oninput="validateCustom()"></div>
            <div class="custom-row"><label>ğŸ’° Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (%)</label><input type="number" id="c3" placeholder="20" min="0" max="100" oninput="validateCustom()"></div>
            <div class="custom-row"><label>ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„ØµØ¯Ù‚Ø§Øª (%)</label><input type="number" id="c4" placeholder="2.5" min="0" max="100" step="0.1" oninput="validateCustom()"></div>
            <div class="custom-row"><label>ğŸ“¦ Ø£Ø®Ø±Ù‰ (%)</label><input type="number" id="c5" placeholder="0" min="0" max="100" oninput="validateCustom()"></div>
            <div class="custom-total" id="customTotal">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0%</div>
        </div>
        <div id="results" class="results" style="display:none;"></div>
        <div class="chart-container" id="chartContainer"><div class="chart-wrapper"><canvas id="salaryChart"></canvas></div></div>
    </div>

    <div class="info-section">
        <h2>Ù„Ù…Ø§Ø°Ø§ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨ Ù…Ù‡Ù…ØŸ</h2>
        <p>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø¥Ù†ÙØ§Ù‚Ùƒ ÙˆØªØ­Ù‚ÙŠÙ‚ Ø£Ù‡Ø¯Ø§ÙÙƒ. Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª ØªÙØ¸Ù‡Ø± Ø£Ù† Ù…ØªØ¨Ø¹ÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ÙŠÙˆÙØ±ÙˆÙ† 20% Ø£ÙƒØ«Ø±.</p>
        <p>Ø§Ù„Ø­Ø§Ø³Ø¨Ø© ØªÙÙ‚ØªØ±Ø­ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø²ÙƒØ§Ø© (2.5%) ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ© â€” Ø§Ù„Ø¨Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ÙØ²ÙƒÙ‘Ù‰.</p>
    </div>
    <div class="info-section">
        <h2>Ø´Ø±Ø­ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h2>
        <div class="rule-explanation"><h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 50/30/20</h3><p>50% Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª | 30% Ø±ØºØ¨Ø§Øª | 20% Ø§Ø¯Ø®Ø§Ø±. Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ†.</p></div>
        <div class="rule-explanation"><h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 70/20/10</h3><p>70% Ù…ØµØ§Ø±ÙŠÙ | 20% Ø§Ø¯Ø®Ø§Ø± | 10% ØªØ¨Ø±Ø¹Ø§Øª.</p></div>
        <div class="rule-explanation"><h3>ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© 80/20</h3><p>ÙˆÙÙ‘Ø± 20% Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Ø£Ù†ÙÙ‚ 80% Ø¨Ø­Ø±ÙŠØ©.</p></div>
        <div class="rule-explanation"><h3>âœï¸ Ù…Ø®ØµØµØ©</h3><p>Ø­Ø¯Ø¯ Ù†Ø³Ø¨Ùƒ Ø¨Ù…Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ ÙˆØ¶Ø¹Ùƒ.</p></div>
    </div>
    <div class="info-section">
        <h2>Ù†ØµØ§Ø¦Ø­ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø±Ø§ØªØ¨ Ø¨Ø°ÙƒØ§Ø¡</h2>
        <ul class="tips-list">
            <li>Ø§Ø¯ÙØ¹ Ù„Ù†ÙØ³Ùƒ Ø£ÙˆÙ„Ø§Ù‹ â€” Ø¶Ø¹ Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ù‚Ø¨Ù„ Ø£ÙŠ Ø¥Ù†ÙØ§Ù‚</li>
            <li>Ø£Ù†Ø´Ø¦ ØµÙ†Ø¯ÙˆÙ‚ Ø·ÙˆØ§Ø±Ø¦ ÙŠØºØ·ÙŠ 3-6 Ø£Ø´Ù‡Ø±</li>
            <li>Ø±Ø§Ø¬Ø¹ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ Ø´Ù‡Ø±ÙŠØ§Ù‹ ÙˆØ¹Ø¯Ù‘Ù„Ù‡Ø§</li>
            <li>ØªØ¬Ù†Ø¨ Ø§Ù„Ø¯ÙŠÙˆÙ† ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©</li>
            <li>Ø§Ø³ØªØ«Ù…Ø± Ø§Ù„ÙØ§Ø¦Ø¶ ÙÙŠ ÙØ±Øµ Ù…Ø¯Ø±ÙˆØ³Ø©</li>
            <li>Ø£Ø®Ø±Ø¬ Ø§Ù„Ø²ÙƒØ§Ø© ÙÙŠ Ù…ÙˆØ¹Ø¯Ù‡Ø§</li>
        </ul>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="results-engine.js"></script>
<script>
let salaryChart=null;
// Ø£Ù„ÙˆØ§Ù† Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø³Ù…Ø© Ø§Ù„Ø¯Ø§ÙƒÙ†Ø©
const COLORS=['#3b82f6','#f59e0b','#10b981','#ef4444','#8b5cf6','#06b6d4'];
function validateSalary(v){const e=document.getElementById('salaryError');if(v<=0||isNaN(v)){e.style.display='block';return false;}e.style.display='none';return true;}
function validateCustom(){const ids=['c1','c2','c3','c4','c5'];const total=ids.reduce((s,id)=>s+(parseFloat(document.getElementById(id).value)||0),0);const el=document.getElementById('customTotal');el.textContent='Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: '+total.toFixed(1)+'%';el.className='custom-total '+(Math.abs(total-100)<0.01?'valid':'invalid');calculateSalary();}
document.getElementById('rule').addEventListener('change',function(){document.getElementById('customRuleInputs').style.display=this.value==='custom'?'block':'none';calculateSalary();});
function calculateSalary(){
    const salaryRaw=parseFloat(document.getElementById('salary').value);
    const rule=document.getElementById('rule').value;
    if(!salaryRaw||!rule){document.getElementById('results').style.display='none';document.getElementById('chartContainer').style.display='none';return;}
    if(!validateSalary(salaryRaw)){document.getElementById('results').style.display='none';document.getElementById('chartContainer').style.display='none';return;}
    const salary=salaryRaw;
    let breakdown={};
    switch(rule){
        case '50-30-20':breakdown={'ğŸ  Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©':{amount:salary*0.50,pct:50},'ğŸ‰ Ø±ØºØ¨Ø§Øª ÙˆØªØ±ÙÙŠÙ‡':{amount:salary*0.30,pct:30},'ğŸ’° Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ø³ØªØ«Ù…Ø§Ø±':{amount:salary*0.20,pct:20}};break;
        case '70-20-10':breakdown={'ğŸ  Ù…ØµØ§Ø±ÙŠÙ ÙŠÙˆÙ…ÙŠØ©':{amount:salary*0.70,pct:70},'ğŸ’° Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ø³ØªØ«Ù…Ø§Ø±':{amount:salary*0.20,pct:20},'ğŸ•Œ ØªØ¨Ø±Ø¹Ø§Øª ÙˆØµØ¯Ù‚Ø§Øª':{amount:salary*0.10,pct:10}};break;
        case '80-20':breakdown={'ğŸ’° Ø§Ø¯Ø®Ø§Ø± Ø£ÙˆÙ„Ø§Ù‹':{amount:salary*0.20,pct:20},'ğŸ›’ Ø¥Ù†ÙØ§Ù‚ Ø­Ø±':{amount:salary*0.80,pct:80}};break;
        case 'custom':{const ids=['c1','c2','c3','c4','c5'];const names=['ğŸ  Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©','ğŸ‰ Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡','ğŸ’° Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±','ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø© ÙˆØ§Ù„ØµØ¯Ù‚Ø§Øª','ğŸ“¦ Ø£Ø®Ø±Ù‰'];const total=ids.reduce((s,id)=>s+(parseFloat(document.getElementById(id).value)||0),0);if(Math.abs(total-100)>0.01){document.getElementById('results').style.display='none';document.getElementById('chartContainer').style.display='none';return;}ids.forEach((id,i)=>{const pct=parseFloat(document.getElementById(id).value)||0;if(pct>0)breakdown[names[i]]={amount:salary*pct/100,pct};});break;}
    }
    if(Object.keys(breakdown).length===0)return;
    displayResults(breakdown);
    updateChart(breakdown);
    document.getElementById('results').style.display='grid';
    document.getElementById('chartContainer').style.display='block';
    if(window.ResultsEngine)window.ResultsEngine.paint();
}
function displayResults(breakdown){
    const container=document.getElementById('results');container.innerHTML='';
    Object.entries(breakdown).forEach(([label,{amount,pct}])=>{
        const isZakat=label.includes('Ø²ÙƒØ§Ø©')||label.includes('ØªØ¨Ø±Ø¹')||label.includes('ØµØ¯Ù‚Ø©');
        const card=document.createElement('div');card.className='result-card'+(isZakat?' zakat-card':'');
        card.innerHTML='<h3>'+label+'</h3><div class="amount">'+amount.toLocaleString('ar-SA',{maximumFractionDigits:2})+' Ø±ÙŠØ§Ù„</div><div class="percent">'+pct+'% Ù…Ù† Ø§Ù„Ø±Ø§ØªØ¨</div>';
        container.appendChild(card);
    });
}
function updateChart(breakdown){
    const labels=Object.keys(breakdown);const data=Object.values(breakdown).map(v=>v.amount);
    const ctx=document.getElementById('salaryChart').getContext('2d');
    if(salaryChart){salaryChart.data.labels=labels;salaryChart.data.datasets[0].data=data;salaryChart.data.datasets[0].backgroundColor=COLORS.slice(0,labels.length);salaryChart.update();}
    else{salaryChart=new Chart(ctx,{type:'doughnut',data:{labels,datasets:[{data,backgroundColor:COLORS.slice(0,labels.length),borderWidth:2,borderColor:'#1e293b'}]},options:{responsive:true,maintainAspectRatio:false,cutout:'55%',plugins:{legend:{position:'bottom',rtl:true,labels:{color:'#94a3b8',font:{size:12}}},tooltip:{callbacks:{label:ctx=>{const val=ctx.parsed;const pct=(val/data.reduce((a,b)=>a+b,0)*100).toFixed(1);return ' '+ctx.label+': '+val.toLocaleString('ar-SA',{maximumFractionDigits:2})+' Ø±ÙŠØ§Ù„ ('+pct+'%)';}}}}}}});}
}
document.getElementById('salary').addEventListener('input',calculateSalary);
</script>
<script data-goatcounter="https://investornote.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
