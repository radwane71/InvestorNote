<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø±ÙŠ - Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .calculator-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ecf0f1;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #ecf0f1;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input::placeholder {
            color: rgba(236, 240, 241, 0.6);
        }

        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            background: rgba(255, 255, 255, 0.2);
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(39, 174, 96, 0.3);
        }

        .results-section {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .result-card {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .result-card.new-average {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            font-size: 1.2rem;
        }

        .result-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .result-amount {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .alert-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }

        .education-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .education-section h3 {
            color: #ecf0f1;
            margin-bottom: 15px;
        }

        .education-section p {
            color: #ecf0f1;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .calculator-section {
                padding: 20px;
            }

            .input-grid {
                grid-template-columns: 1fr;
            }

            .result-amount {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ù…ÙˆØ­Ø¯ -->
        <link rel="stylesheet" href="navigation.css">
        <nav class="navbar">
            <div class="navbar-container">
                <a href="index.html" class="navbar-brand">
                    ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±
                </a>
                <div class="navbar-menu" id="navbarMenu">
                    <a href="index.html" class="navbar-item">
                        ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </a>
                    <a href="snowball_calculator.html" class="navbar-item calculator">
                        â„ï¸ Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬
                    </a>
                    <a href="advice.html" class="navbar-item calculator">
                        ğŸ’° Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø«Ø±ÙˆØ©
                    </a>
                    <a href="investor_tips.html" class="navbar-item tips">
                        âš ï¸ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±
                    </a>
                    <a href="emergency_fund_calculator.html" class="navbar-item emergency">
                        ğŸ›¡ï¸ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
                    </a>
                    <a href="salary_calculator.html" class="navbar-item salary">
                        ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨
                    </a>
                    <a href="rebalancing.html" class="navbar-item rebalance">
                        âš–ï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ§Ø²Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©
                    </a>
                    <a href="zakat_purification.html" class="navbar-item zakat">
                        ğŸ•Œ Ø§Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ø²ÙƒØ§Ø©
                    </a>
                    <a href="financial_freedom.html" class="navbar-item fire">
                        ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©
                    </a>
                    <a href="sector_analysis.html" class="navbar-item sector">
                        ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù‚Ø·Ø§Ø¹ÙŠ
                    </a>
                    <a href="portfolio_risk_grader.html" class="navbar-item risk">
                        ğŸ“ˆ Ù…Ù‚ÙŠÙ… Ø®Ø·ÙˆØ±Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©
                    </a>
                    <a href="roi_calculator.html" class="navbar-item roi">
                        ğŸ“ˆ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
                    </a>
                    <a href="average_down.html" class="navbar-item average">
                        ğŸ“‰ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø·
                    </a>
                </div>
                <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
            </div>
        </nav>

        <script>
        function toggleNavbar() {
            const menu = document.getElementById('navbarMenu');
            menu.classList.toggle('collapsed');
        }

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ø´Ø·Ø©
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navItems = document.querySelectorAll('.navbar-item');
            
            navItems.forEach(item => {
                const itemPage = item.getAttribute('href');
                if (itemPage === currentPage || 
                    (currentPage === '' && itemPage === 'index.html')) {
                    item.classList.add('active');
                }
            });
        });
        </script>

        <div class="header">
            <h1>ğŸ“‰ Ø­Ø§Ø³Ø¨Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø±ÙŠ</h1>
            <p>Ø­ÙˆÙ„ Ø§Ù„Ø§Ù†Ø®ÙØ§Ø¶Ø§Øª Ø¥Ù„Ù‰ ÙØ±Øµ - Ø®ÙØ¶ Ù…ØªÙˆØ³Ø· ØªÙƒÙ„ÙØªÙƒ ÙˆØ§Ø³ØªØºÙ„ "Ù…ÙˆØ³Ù… Ø§Ù„ØªØ®ÙÙŠØ¶Ø§Øª"</p>
        </div>

        <div class="calculator-section">
            <h2 class="section-title">ğŸ“Š Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±ÙƒØ²Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</h2>
            
            <div class="input-grid">
                <div class="input-group">
                    <label for="currentShares">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù…)</label>
                    <input type="number" id="currentShares" placeholder="Ù…Ø«Ø§Ù„: 100" min="1">
                </div>

                <div class="input-group">
                    <label for="currentPrice">Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø±ÙŠØ§Ù„ Ù„Ù„Ø³Ù‡Ù…)</label>
                    <input type="number" id="currentPrice" placeholder="Ù…Ø«Ø§Ù„: 50" min="0" step="0.01">
                </div>
            </div>

            <h2 class="section-title">ğŸ›’ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h2>

            <div class="input-grid">
                <div class="input-group">
                    <label for="newShares">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø±Ø§Ø¯ Ø´Ø±Ø§Ø¤Ù‡Ø§</label>
                    <input type="number" id="newShares" placeholder="Ù…Ø«Ø§Ù„: 50" min="1">
                </div>

                <div class="input-group">
                    <label for="newPrice">Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ø±ÙŠØ§Ù„ Ù„Ù„Ø³Ù‡Ù…)</label>
                    <input type="number" id="newPrice" placeholder="Ù…Ø«Ø§Ù„: 40" min="0" step="0.01">
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateAverageDown()">Ø§Ø­Ø³Ø¨ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±ÙŠ</button>
        </div>

        <div id="resultsSection" class="results-section">
            <h2 class="section-title">ğŸ“ˆ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±ÙŠ</h2>

            <div class="result-card new-average">
                <h3>Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø¹Ø±ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h3>
                <div class="result-amount" id="newAverage">-</div>
                <p>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø¹Ø¯Ù„ Ù„Ù„Ø³Ù‡Ù… Ø§Ù„ÙˆØ§Ø­Ø¯</p>
            </div>

            <div class="result-card">
                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h3>
                <div class="result-amount" id="totalCost">-</div>
                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù…</p>
            </div>

            <div class="result-card">
                <h3>Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù†Ø®ÙØ§Ø¶ ÙÙŠ Ø§Ù„Ù…ØªÙˆØ³Ø·</h3>
                <div class="result-amount" id="decreasePercentage">-</div>
                <p>Ù…Ù‚Ø¯Ø§Ø± Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ù…Ø­Ù‚Ù‚Ø©</p>
            </div>

            <div id="safetyAlert" class="alert alert-warning" style="display: none;">
                <strong>âš ï¸ ØªØ°ÙƒÙŠØ± Ø¨Ø§Ù„Ø£Ù…Ø§Ù†:</strong> ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ØªØ¬Ø§ÙˆØ² Ù‡Ø°Ø§ Ø§Ù„Ø³Ù‡Ù… Ù†Ø³Ø¨Ø© 6-8% Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø­ÙØ¸ØªÙƒ Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±ÙŠ. Ø±Ø§Ø¬Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ØªÙ†ÙˆÙŠØ¹ ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù†ØµØ§Ø¦Ø­.
            </div>
        </div>

        <div class="education-section">
            <h3>ğŸ“ ÙÙ‡Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±ÙŠ</h3>
            <p>Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø±ÙŠ Ù‡Ùˆ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø°ÙƒÙŠØ© ØªØ­ÙˆÙ„ Ø§Ù„ØªÙ‚Ù„Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø¥Ù„Ù‰ Ù…ÙŠØ²Ø©. Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†Ø®ÙØ¶ Ø³Ø¹Ø± Ø³Ù‡Ù… Ù…Ù…ØªØ§Ø²ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù…Ù„ÙˆÙƒØ© Ù„Ø®ÙØ¶ Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙƒÙ„ÙØ©.</p>
            <p><strong>âš ï¸ ØªØ­Ø°ÙŠØ± Ù‡Ø§Ù…:</strong> Ù„Ø§ ØªØ·Ø¨Ù‚ Ù‡Ø°Ù‡ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø¥Ù„Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„ØªÙŠ Ø£Ø¬Ø±Øª ØªØ­Ù„ÙŠÙ„Ø§Ù‹ Ø£Ø³Ø§Ø³ÙŠØ§Ù‹ Ø´Ø§Ù…Ù„Ø§Ù‹ Ù„Ù‡Ø§. ØªØ£ÙƒØ¯ Ù…Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù‚Ø¨Ù„ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø³Ø¹Ø±ÙŠ.</p>
            <p>ØªØ°ÙƒØ±: Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø®ÙØ¶ ÙˆØ­Ø¯Ù‡ Ù„ÙŠØ³ Ø¶Ù…Ø§Ù†Ø§Ù‹ Ù„Ù„Ø¬ÙˆØ¯Ø©. Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø´Ø±ÙƒØ© Ø±Ø¯ÙŠØ¦Ø© Ø¨Ø³Ø¨Ø¨ Ø³Ø¹Ø±Ù‡Ø§ Ø§Ù„Ù…Ù†Ø®ÙØ¶ Ù‡Ùˆ Ø®Ø·Ø£ ÙƒØ¨ÙŠØ±.</p>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ar-SA', {
                style: 'currency',
                currency: 'SAR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function calculateAverageDown() {
            const currentShares = parseFloat(document.getElementById('currentShares').value);
            const currentPrice = parseFloat(document.getElementById('currentPrice').value);
            const newShares = parseFloat(document.getElementById('newShares').value);
            const newPrice = parseFloat(document.getElementById('newPrice').value);

            if (!currentShares || !currentPrice || !newShares || !newPrice ||
                currentShares <= 0 || currentPrice <= 0 || newShares <= 0 || newPrice <= 0) {
                alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­');
                return;
            }

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø±Ø¬Ø­ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            const currentValue = currentShares * currentPrice;
            const newValue = newShares * newPrice;
            const totalShares = currentShares + newShares;
            const newAverage = (currentValue + newValue) / totalShares;

            // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            const totalCost = currentValue + newValue;

            // Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù†Ø®ÙØ§Ø¶
            const decreasePercentage = ((currentPrice - newAverage) / currentPrice) * 100;

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('newAverage').textContent = formatCurrency(newAverage);
            document.getElementById('totalCost').textContent = formatCurrency(totalCost);
            document.getElementById('decreasePercentage').textContent = decreasePercentage.toFixed(1) + '%';

            // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø£Ù…Ø§Ù†
            document.getElementById('safetyAlert').style.display = 'block';

            document.getElementById('resultsSection').style.display = 'block';

            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
    <script data-goatcounter="https://investornote.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
