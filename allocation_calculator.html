<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø© | Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" defer></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #134e5e 0%, #71b280 100%);
            min-height: 100vh; padding: 20px; color: #2c3e50;
        }

        .navbar-wrapper { max-width: 950px; margin: 0 auto 15px; }

        .container {
            max-width: 950px; margin: 0 auto;
            background: white; border-radius: 20px;
            padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        /* ===== Legal Banner ===== */
        .legal-banner {
            background: #fff3cd; border: 2px solid #ffc107;
            border-radius: 8px; padding: 11px 15px;
            margin-bottom: 25px;
            display: flex; align-items: flex-start; gap: 10px;
        }
        .legal-banner p {
            color: #856404; font-size: 0.83rem;
            font-weight: bold; line-height: 1.5; flex: 1;
        }

        h1 { text-align: center; color: #134e5e; font-size: 2rem; margin-bottom: 6px; }
        .subtitle { text-align: center; color: #7f8c8d; margin-bottom: 30px; font-size: 0.92rem; }

        /* ===== Rule Item ===== */
        .rule-item {
            background: #f8f9fa; border-radius: 15px;
            padding: 25px; margin: 20px 0;
            border-right: 5px solid #134e5e;
        }
        .rule-item h3 {
            color: #134e5e; margin-bottom: 18px;
            font-size: 1rem; border-bottom: 1px solid #e0e0e0;
            padding-bottom: 10px;
        }

        /* ===== Input Grid ===== */
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 18px;
        }
        .input-group { display: flex; flex-direction: column; }
        .input-group label {
            font-weight: bold; font-size: 0.85rem;
            color: #34495e; margin-bottom: 7px;
        }
        .input-group input, .input-group select {
            padding: 11px; border: 2px solid #e0e0e0;
            border-radius: 8px; font-size: 0.95rem;
            transition: border-color 0.3s; background: white;
        }
        .input-group input:focus,
        .input-group select:focus { border-color: #134e5e; outline: none; background: #f0fff4; }
        .input-hint { font-size: 0.75rem; color: #95a5a6; margin-top: 4px; }

        /* ===== Profile Selector ===== */
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px; margin-bottom: 20px;
        }
        .profile-btn {
            padding: 12px 8px; border: 2px solid #e0e0e0;
            border-radius: 10px; cursor: pointer;
            background: white; font-size: 0.82rem;
            font-weight: bold; text-align: center;
            transition: all 0.25s; color: #555;
        }
        .profile-btn:hover { border-color: #134e5e; color: #134e5e; }
        .profile-btn.selected {
            background: #134e5e; color: white;
            border-color: #134e5e;
            box-shadow: 0 4px 12px rgba(19,78,94,0.3);
        }
        .profile-btn .p-icon { font-size: 1.4rem; display: block; margin-bottom: 4px; }

        /* ===== Stock Rows ===== */
        .stocks-header {
            display: grid;
            grid-template-columns: 2fr 2fr 1.5fr 1.5fr auto;
            gap: 10px; padding: 8px 12px;
            background: #134e5e; color: white;
            border-radius: 8px; font-size: 0.8rem;
            font-weight: bold; margin-bottom: 8px;
        }
        .stock-row {
            display: grid;
            grid-template-columns: 2fr 2fr 1.5fr 1.5fr auto;
            gap: 10px; margin-bottom: 8px;
            align-items: center; padding: 8px;
            background: white; border-radius: 8px;
            border: 1px solid #e8f5e9;
            transition: box-shadow 0.2s;
        }
        .stock-row:hover { box-shadow: 0 2px 8px rgba(19,78,94,0.12); }
        .stock-row input, .stock-row select {
            padding: 9px; border: 1.5px solid #e0e0e0;
            border-radius: 6px; font-size: 0.88rem;
            width: 100%; background: white;
            transition: border-color 0.3s;
        }
        .stock-row input:focus,
        .stock-row select:focus { border-color: #71b280; outline: none; }

        .remove-btn {
            background: #e74c3c; color: white;
            border: none; padding: 9px 13px;
            border-radius: 7px; cursor: pointer;
            font-size: 0.9rem; transition: background 0.2s;
            white-space: nowrap;
        }
        .remove-btn:hover { background: #c0392b; }

        .add-btn {
            background: #71b280; color: white;
            border: none; padding: 12px 22px;
            border-radius: 9px; cursor: pointer;
            font-size: 0.95rem; font-weight: bold;
            margin-top: 12px; transition: background 0.2s, transform 0.2s;
        }
        .add-btn:hover { background: #5a9d6a; transform: translateY(-1px); }

        /* ===== Calc Button ===== */
        .calc-btn {
            display: block; width: 100%; padding: 16px;
            background: linear-gradient(135deg, #134e5e, #71b280);
            color: white; border: none; border-radius: 12px;
            font-size: 1.1rem; font-weight: bold;
            cursor: pointer; margin: 25px 0;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(19,78,94,0.35);
        }

        /* ===== Results ===== */
        .results-section { display: none; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù„Ø®Øµ */
        .portfolio-summary {
            background: linear-gradient(135deg, #134e5e, #1a6b80);
            color: white; border-radius: 16px;
            padding: 25px; margin-bottom: 20px;
            display: flex; flex-wrap: wrap;
            gap: 20px; justify-content: space-around; text-align: center;
        }
        .ps-item .ps-label { font-size: 0.8rem; opacity: 0.8; margin-bottom: 6px; }
        .ps-item .ps-value { font-size: 1.6rem; font-weight: bold; color: #a8e6cf; }

        /* ===== Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… ===== */
        .allocation-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 14px; margin-bottom: 20px;
        }
        .alloc-card {
            border-radius: 12px; padding: 18px;
            border: 2px solid #e8f5e9; position: relative;
            overflow: hidden; transition: transform 0.2s;
        }
        .alloc-card:hover { transform: translateY(-2px); }

        .alloc-card.status-ok     { border-color: #27ae60; background: #f0fdf4; }
        .alloc-card.status-warn   { border-color: #f39c12; background: #fffde7; }
        .alloc-card.status-danger { border-color: #e74c3c; background: #fdf0f0; }
        .alloc-card.status-low    { border-color: #95a5a6; background: #f8f9fa; }

        .alloc-card .stock-name {
            font-weight: bold; font-size: 1rem;
            color: #134e5e; margin-bottom: 4px;
        }
        .alloc-card .sector-tag {
            display: inline-block; font-size: 0.72rem;
            padding: 2px 8px; border-radius: 10px;
            background: rgba(19,78,94,0.1); color: #134e5e;
            margin-bottom: 10px;
        }
        .alloc-card .pct-bar-wrap {
            background: #e0e0e0; border-radius: 10px;
            height: 8px; margin-bottom: 10px; overflow: hidden;
        }
        .alloc-card .pct-bar {
            height: 100%; border-radius: 10px;
            transition: width 0.6s ease;
        }
        .alloc-card.status-ok     .pct-bar { background: #27ae60; }
        .alloc-card.status-warn   .pct-bar { background: #f39c12; }
        .alloc-card.status-danger .pct-bar { background: #e74c3c; }
        .alloc-card.status-low    .pct-bar { background: #95a5a6; }

        .alloc-card .row {
            display: flex; justify-content: space-between;
            font-size: 0.82rem; margin-bottom: 4px; color: #555;
        }
        .alloc-card .row strong { color: #2c3e50; }

        .status-badge {
            position: absolute; top: 14px; left: 14px;
            font-size: 0.7rem; font-weight: bold;
            padding: 3px 9px; border-radius: 10px;
        }
        .status-ok     .status-badge { background: #d4edda; color: #155724; }
        .status-warn   .status-badge { background: #fff3cd; color: #856404; }
        .status-danger .status-badge { background: #f8d7da; color: #721c24; }
        .status-low    .status-badge { background: #e2e3e5; color: #383d41; }

        /* ===== Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ===== */
        .sector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px; margin-top: 5px;
        }
        .sector-card {
            border-radius: 10px; padding: 14px;
            border: 2px solid #e0e0e0; text-align: center;
        }
        .sector-card.sector-ok     { border-color: #27ae60; background: #f0fdf4; }
        .sector-card.sector-warn   { border-color: #f39c12; background: #fffde7; }
        .sector-card.sector-danger { border-color: #e74c3c; background: #fdf0f0; }
        .sector-card .sec-name { font-weight: bold; font-size: 0.9rem; color: #134e5e; margin-bottom: 6px; }
        .sector-card .sec-pct  { font-size: 1.4rem; font-weight: bold; color: #2c3e50; }
        .sector-card .sec-hint { font-size: 0.75rem; color: #7f8c8d; margin-top: 4px; }

        /* ===== Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ===== */
        .charts-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 20px; margin-top: 5px;
        }
        .chart-box {
            background: #f8f9fa; border-radius: 12px; padding: 16px;
        }
        .chart-box h4 { color: #134e5e; font-size: 0.9rem; margin-bottom: 12px; }
        .chart-container { position: relative; height: 240px; }

        /* ===== ØªÙˆØµÙŠØ§Øª ===== */
        .recommendations {
            background: linear-gradient(135deg, #e8f5e9, #f0fff4);
            border: 2px solid #71b280; border-radius: 12px;
            padding: 20px; margin-top: 20px;
        }
        .recommendations h4 { color: #1e8449; margin-bottom: 12px; font-size: 0.95rem; }
        .rec-item {
            display: flex; align-items: flex-start;
            gap: 10px; margin-bottom: 10px;
            font-size: 0.88rem; line-height: 1.6; color: #2c3e50;
        }
        .rec-item:last-child { margin-bottom: 0; }

        /* ===== Reset ===== */
        .reset-btn {
            display: block; margin: 20px auto 0;
            padding: 11px 28px; background: #95a5a6;
            color: white; border: none; border-radius: 10px;
            cursor: pointer; font-size: 0.95rem;
            transition: background 0.3s;
        }
        .reset-btn:hover { background: #7f8c8d; }

        /* ===== Responsive ===== */
        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 1.6rem; }
            .stocks-header { display: none; }
            .stock-row {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto;
            }
            .stock-row .remove-btn { grid-column: 1 / -1; }
            .charts-grid { grid-template-columns: 1fr; }
            .allocation-cards { grid-template-columns: 1fr; }
        }
        @media (max-width: 480px) {
            body { padding: 10px; }
            .stock-row { grid-template-columns: 1fr; }
            .profile-grid { grid-template-columns: repeat(3, 1fr); }
        }
    </style>
</head>
<body>

<div class="navbar-wrapper">
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
            <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
            <div class="navbar-menu" id="navbarMenu">
                <a href="index.html"                     class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="advice.html"                    class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
                <a href="salary_calculator.html"         class="navbar-item salary">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
                <a href="zakat_purification.html"        class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
                <a href="financial_freedom.html"         class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
                <a href="investor_tips.html"             class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
                <a href="snowball_calculator.html"       class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
                <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
                <a href="average_calculator.html"        class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
                <a href="company_valuation.html"         class="navbar-item company">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
                <a href="retirement_calculator.html"     class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
                <a href="portfolio_rating.html"          class="navbar-item portfolio">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
                <a href="stock_valuation.html"           class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
                <a href="dca_calculator.html"            class="navbar-item calculator">ğŸ“… DCA</a>
                <a href="goal_calculator.html"           class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
                <a href="allocation_calculator.html"     class="navbar-item calculator active">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            </div>
        </div>
    </nav>
</div>

<div class="container">

    <div class="legal-banner">
        <span>âš ï¸</span>
        <p>Ø¥Ù‚Ø±Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ: Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙ‚Ø¯ÙŠØ±ÙŠØ©. Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ù„Ø§ ÙŠÙØ¹Ø¯Ù‘ ØªÙˆØµÙŠØ© Ù…Ø§Ù„ÙŠØ© Ù…Ù„Ø²Ù…Ø©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ­Ø¯Ù‡.</p>
    </div>

    <h1>âš–ï¸ Ø­Ø§Ø³Ø¨Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</h1>
    <p class="subtitle">Ø£Ø¯Ø®Ù„ Ø£Ø³Ù‡Ù…Ùƒ â€” Ù†Ø­Ø³Ø¨ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ ÙˆÙ†ÙƒØ´Ù Ø§Ù„Ø§Ø®ØªÙ„Ø§Ù„Ø§Øª</p>

    <!-- ===== Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ===== -->
    <div class="rule-item">
        <h3>ğŸ‘¤ Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± â€” ÙŠØ­Ø¯Ø¯ Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</h3>
        <div class="profile-grid">
            <button class="profile-btn selected" id="prof-conservative"
                    onclick="selectProfile('conservative')">
                <span class="p-icon">ğŸ›¡ï¸</span>
                Ù…ØªØ­ÙØ¸
                <small style="display:block;font-size:0.7rem;opacity:0.8;margin-top:3px;">5-6% / Ø³Ù‡Ù…</small>
            </button>
            <button class="profile-btn" id="prof-moderate"
                    onclick="selectProfile('moderate')">
                <span class="p-icon">âš–ï¸</span>
                Ù…Ø¹ØªØ¯Ù„
                <small style="display:block;font-size:0.7rem;opacity:0.8;margin-top:3px;">6-8% / Ø³Ù‡Ù…</small>
            </button>
            <button class="profile-btn" id="prof-growth"
                    onclick="selectProfile('growth')">
                <span class="p-icon">ğŸ“ˆ</span>
                Ù†Ù…Ùˆ
                <small style="display:block;font-size:0.7rem;opacity:0.8;margin-top:3px;">8-10% / Ø³Ù‡Ù…</small>
            </button>
            <button class="profile-btn" id="prof-aggressive"
                    onclick="selectProfile('aggressive')">
                <span class="p-icon">ğŸš€</span>
                Ø¹Ø¯ÙˆØ§Ù†ÙŠ
                <small style="display:block;font-size:0.7rem;opacity:0.8;margin-top:3px;">10-15% / Ø³Ù‡Ù…</small>
            </button>
            <button class="profile-btn" id="prof-custom"
                    onclick="selectProfile('custom')">
                <span class="p-icon">âœï¸</span>
                Ù…Ø®ØµØµ
                <small style="display:block;font-size:0.7rem;opacity:0.8;margin-top:3px;">Ø£Ø¯Ø®Ù„ Ø­Ø¯ÙˆØ¯Ùƒ</small>
            </button>
        </div>

        <!-- Ø­Ø¯ÙˆØ¯ Ù…Ø®ØµØµØ© â€” ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ custom -->
        <div id="customLimits" style="display:none;">
            <div class="input-grid" style="margin-top:12px;">
                <div class="input-group">
                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø³Ù‡Ù… Ø§Ù„ÙˆØ§Ø­Ø¯ (%)</label>
                    <input type="number" id="maxStock" value="8" min="1" max="50" step="0.5">
                </div>
                <div class="input-group">
                    <label>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„ÙˆØ§Ø­Ø¯ (%)</label>
                    <input type="number" id="maxSector" value="20" min="5" max="80" step="1">
                </div>
                <div class="input-group">
                    <label>Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ (%)</label>
                    <input type="number" id="cashReserve" value="5" min="0" max="30" step="1">
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø© ===== -->
    <div class="rule-item">
        <h3>ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
        <div class="input-grid">
            <div class="input-group">
                <label>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ÙƒÙ„ÙŠØ© Ù„Ù„Ù…Ø­ÙØ¸Ø©</label>
                <input type="number" id="totalPortfolio"
                       placeholder="Ù…Ø«Ø§Ù„: 500000" min="1">
                <span class="input-hint">Ø¨Ø£ÙŠ Ø¹Ù…Ù„Ø© ØªØ±ÙŠØ¯</span>
            </div>
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ù…Ø­ØªÙØ¸ Ø¨Ù‡ (%)</label>
                <input type="number" id="cashPct"
                       value="5" min="0" max="50" step="1">
                <span class="input-hint">5-10% Ù…ÙˆØµÙ‰ Ø¨Ù‡ Ø¯Ø§Ø¦Ù…Ø§Ù‹</span>
            </div>
        </div>
    </div>

    <!-- ===== Ø§Ù„Ø£Ø³Ù‡Ù… ===== -->
    <div class="rule-item">
        <h3>ğŸ“‹ Ø£Ø³Ù‡Ù… Ù…Ø­ÙØ¸ØªÙƒ</h3>

        <div class="stocks-header">
            <span>Ø§Ø³Ù… Ø§Ù„Ø³Ù‡Ù… / Ø§Ù„Ø±Ù…Ø²</span>
            <span>Ø§Ù„Ù‚Ø·Ø§Ø¹</span>
            <span>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
            <span>Ù†ÙˆØ¹ Ø§Ù„Ø£ØµÙ„</span>
            <span>Ø­Ø°Ù</span>
        </div>

        <div id="stocksContainer">
            <!-- ØµÙ Ø£ÙˆÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ -->
        </div>

        <button class="add-btn" onclick="addStockRow()">â• Ø¥Ø¶Ø§ÙØ© Ø³Ù‡Ù…</button>
    </div>

    <button class="calc-btn" onclick="calculate()">âš–ï¸ Ø§Ø­Ø³Ø¨ Ø§Ù„ØªÙˆØ²ÙŠØ¹</button>

    <!-- ===== Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ===== -->
    <div class="results-section" id="resultsSection">

        <!-- Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø­ÙØ¸Ø© -->
        <div class="portfolio-summary" id="portfolioSummary"></div>

        <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… -->
        <div class="rule-item">
            <h3>ğŸ“Š ØªÙØ§ØµÙŠÙ„ ØªÙˆØ²ÙŠØ¹ ÙƒÙ„ Ø³Ù‡Ù…</h3>
            <div class="allocation-cards" id="allocationCards"></div>
        </div>

        <!-- Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª -->
        <div class="rule-item">
            <h3>ğŸ­ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h3>
            <div class="sector-grid" id="sectorGrid"></div>
        </div>

        <!-- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© -->
        <div class="rule-item">
            <h3>ğŸ“ˆ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©</h3>
            <div class="charts-grid">
                <div class="chart-box">
                    <h4>ğŸ¥§ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø³Ù‡Ù…</h4>
                    <div class="chart-container">
                        <canvas id="stocksChart"></canvas>
                    </div>
                </div>
                <div class="chart-box">
                    <h4>ğŸ­ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h4>
                    <div class="chart-container">
                        <canvas id="sectorsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ø§Ù„ØªÙˆØµÙŠØ§Øª -->
        <div class="recommendations" id="recommendationsBox">
            <h4>ğŸ’¡ ØªÙˆØµÙŠØ§Øª Ø§Ù„ØªÙˆØ²ÙŠØ¹</h4>
            <div id="recommendationsContent"></div>
        </div>

        <button class="reset-btn" onclick="resetAll()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
    </div>

</div>

<script>
    /* ===== Navbar ===== */
    function toggleNavbar() {
        document.getElementById('navbarMenu').classList.toggle('open');
    }
    document.addEventListener('DOMContentLoaded', function () {
        const raw  = window.location.pathname.split('/').pop() || 'index.html';
        const page = raw.split('?')[0].split('#')[0] || 'index.html';
        document.querySelectorAll('.navbar-item').forEach(function (item) {
            item.classList.remove('active');
            const href = (item.getAttribute('href') || '').split('?')[0].split('#')[0];
            if (href === page) item.classList.add('active');
        });
    });

    /* ===== Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ===== */
    const SECTORS = [
        'Ø§Ù„Ù…ØµØ§Ø±Ù ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©',
        'Ø§Ù„Ø¨ØªØ±ÙˆÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª',
        'Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª ÙˆØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª',
        'Ø§Ù„ØªØ¬Ø²Ø¦Ø©',
        'Ø§Ù„Ø·Ø§Ù‚Ø©',
        'Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©',
        'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©',
        'Ø§Ù„ØµÙ†Ø§Ø¹Ø©',
        'Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª',
        'Ø§Ù„Ø£ØºØ°ÙŠØ© ÙˆØ§Ù„Ù…Ø´Ø±ÙˆØ¨Ø§Øª',
        'Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙˆØ§Ù„ØªÙ…ÙˆÙŠÙ„',
        'Ø§Ù„ØªØ£Ù…ÙŠÙ†',
        'Ø§Ù„Ù†Ù‚Ù„',
        'Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡',
        'Ù‚Ø·Ø§Ø¹ Ø¢Ø®Ø±'
    ];

    /* ===== Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ===== */
    const PROFILES = {
        conservative: { maxStock: 6,  maxSector: 15, label: 'Ù…ØªØ­ÙØ¸'  },
        moderate:     { maxStock: 8,  maxSector: 20, label: 'Ù…Ø¹ØªØ¯Ù„'  },
        growth:       { maxStock: 10, maxSector: 25, label: 'Ù†Ù…Ùˆ'    },
        aggressive:   { maxStock: 15, maxSector: 35, label: 'Ø¹Ø¯ÙˆØ§Ù†ÙŠ' },
        custom:       { maxStock: 8,  maxSector: 20, label: 'Ù…Ø®ØµØµ'  }
    };
    let currentProfile = 'conservative';

    function selectProfile(p) {
        currentProfile = p;
        Object.keys(PROFILES).forEach(k => {
            document.getElementById('prof-' + k).classList.toggle('selected', k === p);
        });
        document.getElementById('customLimits').style.display = p === 'custom' ? '' : 'none';
    }

    function getLimits() {
        if (currentProfile === 'custom') {
            return {
                maxStock:  parseFloat(document.getElementById('maxStock').value)  || 8,
                maxSector: parseFloat(document.getElementById('maxSector').value) || 20
            };
        }
        return PROFILES[currentProfile];
    }

    /* ===== Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£ØµÙˆÙ„ ===== */
    const ASSET_TYPES = ['Ø³Ù‡Ù… Ù†Ù…Ùˆ', 'Ø³Ù‡Ù… ØªÙˆØ²ÙŠØ¹Ø§Øª', 'Ø³Ù‡Ù… Ø¯ÙØ§Ø¹ÙŠ', 'ØµÙ†Ø¯ÙˆÙ‚ ETF', 'ØµÙƒ / Ø³ÙƒÙˆÙƒ', 'Ø£Ø®Ø±Ù‰'];

    /* ===== Ø¥Ø¶Ø§ÙØ© ØµÙ Ø³Ù‡Ù… ===== */
    let rowCount = 0;

    function addStockRow(name = '', sector = '', value = '', type = '') {
        rowCount++;
        const id = rowCount;
        const container = document.getElementById('stocksContainer');

        const row = document.createElement('div');
        row.className = 'stock-row';
        row.id = 'row-' + id;

        const sectorOptions = SECTORS.map(s =>
            `<option value="${s}" ${s === sector ? 'selected' : ''}>${s}</option>`
        ).join('');
        const typeOptions = ASSET_TYPES.map(t =>
            `<option value="${t}" ${t === type ? 'selected' : ''}>${t}</option>`
        ).join('');

        row.innerHTML = `
            <input type="text" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø±Ø§Ù…ÙƒÙˆ / 2222"
                   value="${name}" id="name-${id}">
            <select id="sector-${id}">
                <option value="">â€” Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø·Ø§Ø¹ â€”</option>
                ${sectorOptions}
            </select>
            <input type="number" placeholder="Ø§Ù„Ù‚ÙŠÙ…Ø©" min="0" step="0.01"
                   value="${value}" id="value-${id}">
            <select id="type-${id}">
                ${typeOptions}
            </select>
            <button class="remove-btn" onclick="removeRow(${id})">ğŸ—‘</button>
        `;
        container.appendChild(row);
    }

    function removeRow(id) {
        const row = document.getElementById('row-' + id);
        const total = document.getElementById('stocksContainer')
                              .querySelectorAll('.stock-row').length;
        if (total <= 1) {
            /* Ø§Ù…Ø³Ø­ Ø§Ù„Ù‚ÙŠÙ… ÙÙ‚Ø· */
            document.getElementById('name-' + id).value  = '';
            document.getElementById('value-' + id).value = '';
            return;
        }
        row.remove();
    }

    /* ===== Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ===== */
    let stocksChart  = null;
    let sectorsChart = null;

    function calculate() {
        const totalPortfolio = parseFloat(document.getElementById('totalPortfolio').value) || 0;
        const cashPct        = parseFloat(document.getElementById('cashPct').value) || 0;
        const limits         = getLimits();

        if (!totalPortfolio) { alert('âš ï¸ Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©.'); return; }

        /* ---- Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… ---- */
        const rows   = document.getElementById('stocksContainer').querySelectorAll('.stock-row');
        const stocks = [];

        rows.forEach(row => {
            const id    = row.id.replace('row-', '');
            const name  = document.getElementById('name-' + id).value.trim() || 'Ø³Ù‡Ù… ' + id;
            const sec   = document.getElementById('sector-' + id).value || 'Ù‚Ø·Ø§Ø¹ Ø¢Ø®Ø±';
            const val   = parseFloat(document.getElementById('value-' + id).value) || 0;
            const type  = document.getElementById('type-' + id).value;
            if (val > 0) stocks.push({ name, sector: sec, value: val, type });
        });

        if (stocks.length === 0) { alert('âš ï¸ Ø£Ø¯Ø®Ù„ Ù‚ÙŠÙ…Ø© Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.'); return; }

        const investedTotal = stocks.reduce((s, st) => s + st.value, 0);
        const cashValue     = totalPortfolio * cashPct / 100;
        const stocksPct     = investedTotal / totalPortfolio * 100;

        /* ---- Ø­Ø³Ø§Ø¨ Ù†Ø³Ø¨ Ø§Ù„Ø£Ø³Ù‡Ù… ---- */
        stocks.forEach(st => {
            st.pct = st.value / totalPortfolio * 100;
        });

        /* ---- ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ---- */
        const sectorMap = {};
        stocks.forEach(st => {
            if (!sectorMap[st.sector]) sectorMap[st.sector] = 0;
            sectorMap[st.sector] += st.pct;
        });

        /* ---- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ---- */
        document.getElementById('resultsSection').style.display = 'block';
        document.getElementById('resultsSection')
                .scrollIntoView({ behavior: 'smooth', block: 'start' });

        /* Ù…Ù„Ø®Øµ */
        const fmt = n => Number(n.toFixed(0)).toLocaleString('ar-SA');
        const fmtP = n => n.toFixed(1) + '%';

        const okStocks     = stocks.filter(s => s.pct <= limits.maxStock && s.pct >= 1).length;
        const warnStocks   = stocks.filter(s => s.pct > limits.maxStock).length;

        document.getElementById('portfolioSummary').innerHTML = `
            <div class="ps-item">
                <div class="ps-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>
                <div class="ps-value">${fmt(totalPortfolio)}</div>
            </div>
            <div class="ps-item">
                <div class="ps-label">Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± ÙÙŠ Ø§Ù„Ø£Ø³Ù‡Ù…</div>
                <div class="ps-value">${fmtP(stocksPct)}</div>
            </div>
            <div class="ps-item">
                <div class="ps-label">Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ</div>
                <div class="ps-value">${fmt(cashValue)}</div>
            </div>
            <div class="ps-item">
                <div class="ps-label">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù…</div>
                <div class="ps-value">${stocks.length}</div>
            </div>
            <div class="ps-item">
                <div class="ps-label">Ø£Ø³Ù‡Ù… Ø¶Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯</div>
                <div class="ps-value" style="color:${warnStocks > 0 ? '#f1c40f' : '#a8e6cf'}">${okStocks} / ${stocks.length}</div>
            </div>
        `;

        /* ---- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù… ---- */
        document.getElementById('allocationCards').innerHTML = stocks
            .sort((a, b) => b.pct - a.pct)
            .map(st => {
                let status, badge;
                if (st.pct > limits.maxStock) {
                    status = 'status-danger'; badge = 'ğŸš¨ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯';
                } else if (st.pct > limits.maxStock * 0.85) {
                    status = 'status-warn'; badge = 'âš ï¸ Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„Ø­Ø¯';
                } else if (st.pct < 1) {
                    status = 'status-low'; badge = 'ğŸ“‰ ÙˆØ²Ù† Ø¶Ø¦ÙŠÙ„';
                } else {
                    status = 'status-ok'; badge = 'âœ… Ø¶Ù…Ù† Ø§Ù„Ø­Ø¯';
                }

                const idealMin = limits.maxStock * 0.6;
                const idealMax = limits.maxStock;
                const suggestedVal = totalPortfolio * (idealMin + idealMax) / 2 / 100;

                return `
                    <div class="alloc-card ${status}">
                        <span class="status-badge">${badge}</span>
                        <div class="stock-name">${st.name}</div>
                        <span class="sector-tag">${st.sector}</span>
                        <div class="pct-bar-wrap">
                            <div class="pct-bar"
                                 style="width:${Math.min(st.pct / limits.maxStock * 100, 100)}%">
                            </div>
                        </div>
                        <div class="row">
                            <span>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                            <strong>${fmt(st.value)}</strong>
                        </div>
                        <div class="row">
                            <span>Ø§Ù„Ù†Ø³Ø¨Ø© Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</span>
                            <strong>${fmtP(st.pct)}</strong>
                        </div>
                        <div class="row">
                            <span>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­</span>
                            <strong>${fmtP(limits.maxStock)}</strong>
                        </div>
                        <div class="row">
                            <span>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ©</span>
                            <strong>${fmt(suggestedVal)}</strong>
                        </div>
                        <div class="row">
                            <span>Ù†ÙˆØ¹ Ø§Ù„Ø£ØµÙ„</span>
                            <strong>${st.type}</strong>
                        </div>
                    </div>
                `;
            }).join('');

        /* ---- Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ---- */
        document.getElementById('sectorGrid').innerHTML = Object.entries(sectorMap)
            .sort((a, b) => b[1] - a[1])
            .map(([sec, pct]) => {
                let cls;
                if (pct > limits.maxSector)           cls = 'sector-danger';
                else if (pct > limits.maxSector * 0.8) cls = 'sector-warn';
                else                                   cls = 'sector-ok';
                return `
                    <div class="sector-card ${cls}">
                        <div class="sec-name">${sec}</div>
                        <div class="sec-pct">${fmtP(pct)}</div>
                        <div class="sec-hint">
                            ${pct > limits.maxSector
                                ? `ğŸš¨ ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ (${limits.maxSector}%)`
                                : `Ø­Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹: ${limits.maxSector}%`}
                        </div>
                    </div>
                `;
            }).join('');

        /* ---- Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© ---- */
        const colors = [
            '#134e5e','#71b280','#27ae60','#2980b9','#8e44ad',
            '#e67e22','#e74c3c','#f1c40f','#1abc9c','#34495e',
            '#3498db','#d35400','#16a085','#c0392b','#7f8c8d'
        ];

        if (stocksChart)  { stocksChart.destroy();  stocksChart  = null; }
        if (sectorsChart) { sectorsChart.destroy();  sectorsChart = null; }

        /* Doughnut â€” Ø§Ù„Ø£Ø³Ù‡Ù… */
        const stockLabels = stocks.map(s => s.name);
        const stockVals   = stocks.map(s => +s.pct.toFixed(2));
        if (cashPct > 0) { stockLabels.push('ÙƒØ§Ø´'); stockVals.push(+cashPct.toFixed(2)); }

        stocksChart = new Chart(
            document.getElementById('stocksChart').getContext('2d'), {
            type: 'doughnut',
            data: {
                labels: stockLabels,
                datasets: [{ data: stockVals, backgroundColor: colors, borderWidth: 2 }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'bottom', labels: { font: { size: 10 } } },
                    tooltip: {
                        callbacks: {
                            label: ctx => ` ${ctx.label}: ${ctx.parsed.toFixed(1)}%`
                        }
                    }
                }
            }
        });

        /* Bar â€” Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª */
        const secLabels = Object.keys(sectorMap);
        const secVals   = Object.values(sectorMap).map(v => +v.toFixed(2));
        const secColors = secVals.map(v =>
            v > limits.maxSector ? '#e74c3c' :
            v > limits.maxSector * 0.8 ? '#f39c12' : '#71b280'
        );

        sectorsChart = new Chart(
            document.getElementById('sectorsChart').getContext('2d'), {
            type: 'bar',
            data: {
                labels: secLabels,
                datasets: [{
                    label: 'Ù†Ø³Ø¨Ø© Ø§Ù„Ù‚Ø·Ø§Ø¹ %',
                    data: secVals,
                    backgroundColor: secColors,
                    borderRadius: 6
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: true, max: Math.max(...secVals, limits.maxSector) + 5 },
                    x: { ticks: { font: { size: 9 } } }
                }
            }
        });

        /* ---- Ø§Ù„ØªÙˆØµÙŠØ§Øª ---- */
        const recs = [];

        /* ØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… */
        const overStocks = stocks.filter(s => s.pct > limits.maxStock);
        if (overStocks.length) {
            overStocks.forEach(s => {
                const excess = s.value - totalPortfolio * limits.maxStock / 100;
                recs.push({
                    icon: 'ğŸš¨',
                    text: `<strong>${s.name}</strong> ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø¨Ù€ <strong>${fmt(excess)}</strong> â€” ÙÙƒÙ‘Ø± ÙÙŠ ØªØ®ÙÙŠÙ Ø§Ù„Ù…Ø±ÙƒØ² Ø£Ùˆ ØªÙ†ÙˆÙŠØ¹ Ø¬Ø²Ø¡ Ù…Ù†Ù‡.`
                });
            });
        }

        /* ØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª */
        Object.entries(sectorMap).forEach(([sec, pct]) => {
            if (pct > limits.maxSector) {
                recs.push({
                    icon: 'ğŸ­',
                    text: `Ù‚Ø·Ø§Ø¹ <strong>${sec}</strong> ÙŠÙ…Ø«Ù„ ${fmtP(pct)} â€” ÙŠØªØ¬Ø§ÙˆØ² Ø­Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹ (${limits.maxSector}%). ÙÙƒÙ‘Ø± ÙÙŠ ØªÙ†ÙˆÙŠØ¹ Ø®Ø§Ø±Ø¬Ù‡.`
                });
            }
        });

        /* ÙƒØ§Ø´ Ù…Ù†Ø®ÙØ¶ */
        if (cashPct < 5) {
            recs.push({
                icon: 'ğŸ’µ',
                text: `Ø§Ù„ÙƒØ§Ø´ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ (${fmtP(cashPct)}) Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡ (5%). Ø²ÙŠØ§Ø¯ØªÙ‡ ØªÙ…Ù†Ø­Ùƒ Ù…Ø±ÙˆÙ†Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø£Ø²Ù…Ø§Øª.`
            });
        }

        /* Ø£Ø³Ù‡Ù… Ø¨ÙˆØ²Ù† Ø¶Ø¦ÙŠÙ„ */
        const lowStocks = stocks.filter(s => s.pct < 1);
        if (lowStocks.length) {
            recs.push({
                icon: 'ğŸ“‰',
                text: `${lowStocks.map(s => s.name).join('ØŒ ')} â€” Ø£ÙˆØ²Ø§Ù† Ø¶Ø¦ÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹ (< 1%). Ø¥Ù…Ø§ Ø²ÙŠØ§Ø¯ØªÙ‡Ø§ Ù„Ù…Ø³ØªÙˆÙ‰ Ù…Ø¤Ø«Ø± Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù†Ø¸Ø± ÙÙŠ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§.`
            });
        }

        /* ØªÙˆØ²ÙŠØ¹ Ù…Ø«Ø§Ù„ÙŠ */
        if (!overStocks.length && cashPct >= 5) {
            recs.push({
                icon: 'âœ…',
                text: `Ù…Ø­ÙØ¸ØªÙƒ Ø¶Ù…Ù† Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù„Ù…Ù„Ù <strong>${PROFILES[currentProfile].label}</strong>. Ø±Ø§Ø¬Ø¹ Ø§Ù„ØªÙˆØ²ÙŠØ¹ ÙƒÙ„ Ø±Ø¨Ø¹ Ø³Ù†Ø©.`
            });
        }

        /* Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… */
        if (stocks.length < 5) {
            recs.push({
                icon: 'âš ï¸',
                text: `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… (${stocks.length}) Ù…Ù†Ø®ÙØ¶ â€” Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø¹Ø§Ù„ÙŠ ÙŠØ±ÙØ¹ Ø§Ù„Ù…Ø®Ø§Ø·Ø±. ${PROFILES[currentProfile].label === 'Ø¹Ø¯ÙˆØ§Ù†ÙŠ' ? 'Ù…Ù‚Ø¨ÙˆÙ„ Ù†Ø³Ø¨ÙŠØ§Ù‹ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù.' : 'ÙÙƒÙ‘Ø± ÙÙŠ Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ.'}`
            });
        } else if (stocks.length > 20) {
            recs.push({
                icon: 'ğŸ“Š',
                text: `Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… (${stocks.length}) Ù…Ø±ØªÙØ¹ â€” Ø§Ù„ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ù…ÙØ±Ø· ÙŠØµØ¹Ù‘Ø¨ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© ÙˆÙŠÙØ®ÙÙ‘Ù Ø§Ù„Ø¹ÙˆØ§Ø¦Ø¯. ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø³ØªØ«Ù…Ø±ÙŠÙ† Ø§Ù„Ù†Ø§Ø¬Ø­ÙŠÙ† ÙŠÙƒØªÙÙˆÙ† Ø¨Ù€ 10-15 Ø³Ù‡Ù…Ø§Ù‹.`
            });
        }

        document.getElementById('recommendationsContent').innerHTML =
            recs.map(r => `
                <div class="rec-item">
                    <span style="font-size:1.1rem;flex-shrink:0;">${r.icon}</span>
                    <span>${r.text}</span>
                </div>
            `).join('');
    }

    /* ===== Reset ===== */
    function resetAll() {
        if (!confirm('Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) return;
        document.getElementById('totalPortfolio').value = '';
        document.getElementById('cashPct').value = '5';
        document.getElementById('stocksContainer').innerHTML = '';
        rowCount = 0;
        addStockRow();
        document.getElementById('resultsSection').style.display = 'none';
        if (stocksChart)  { stocksChart.destroy();  stocksChart  = null; }
        if (sectorsChart) { sectorsChart.destroy();  sectorsChart = null; }
        selectProfile('conservative');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    /* ===== Init ===== */
    document.addEventListener('DOMContentLoaded', function () {
        /* 3 Ø£Ø³Ù‡Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„ØªÙˆØ¶ÙŠØ­ */
        addStockRow('Ø£Ø±Ø§Ù…ÙƒÙˆ 2222',      'Ø§Ù„Ø·Ø§Ù‚Ø©',                     '', 'Ø³Ù‡Ù… ØªÙˆØ²ÙŠØ¹Ø§Øª');
        addStockRow('Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ 1120',     'Ø§Ù„Ù…ØµØ§Ø±Ù ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©',   '', 'Ø³Ù‡Ù… ØªÙˆØ²ÙŠØ¹Ø§Øª');
        addStockRow('stc 7010',         'Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª ÙˆØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª', '', 'Ø³Ù‡Ù… Ù†Ù…Ùˆ');
    });
</script>
</body>
</html>
