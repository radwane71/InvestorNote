<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ - Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #e8f0f5 0%, #d0e0e8 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #5a7fb5;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #5a7fb5;
        }

        .select-group {
            margin-bottom: 20px;
        }

        .select-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }

        .select-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .select-group select:focus {
            outline: none;
            border-color: #5a7fb5;
        }

        .info-box {
            background: rgba(90, 127, 181, 0.1);
            border: 2px solid #5a7fb5;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .info-box h4 {
            color: #4a6fa5;
            margin-bottom: 10px;
        }

        .info-box p {
            color: #424242;
            line-height: 1.6;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(90, 127, 181, 0.3);
        }

        .results-section {
            display: none;
        }

        .result-card {
            background: linear-gradient(135deg, #5a9d7a, #4a8d6a);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(90, 157, 122, 0.2);
            margin-bottom: 30px;
        }

        .result-card h2 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .result-amount {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-period {
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            max-height: 400px;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .advice-card {
            background: linear-gradient(135deg, #e89d5a, #d88d4a);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(232, 157, 90, 0.2);
        }

        .advice-card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .advice-card ul {
            list-style: none;
            padding: 0;
        }

        .advice-card li {
            margin-bottom: 12px;
            padding-right: 20px;
            position: relative;
            line-height: 1.6;
        }

        .advice-card li:before {
            content: "âœ“";
            position: absolute;
            right: 0;
            color: #fff;
            font-weight: bold;
        }

        .breakdown-table {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .breakdown-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .breakdown-table th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: bold;
        }

        .breakdown-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            text-align: right;
        }

        .breakdown-table tr:hover {
            background: #f8f9fa;
        }

        .percentage-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-top: 5px;
        }

        .percentage-fill {
            height: 100%;
            background: linear-gradient(90deg, #5a7fb5, #4a6fa5);
            transition: width 0.5s ease;
        }

        @media (max-width: 968px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .result-amount {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <link rel="stylesheet" href="navigation.css">
        <nav class="navbar">
            <div class="navbar-container">
                <a href="index.html" class="navbar-brand">
                    ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±
                </a>
                <div class="navbar-menu" id="navbarMenu">
                    <a href="index.html" class="navbar-item">
                        ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </a>
                    <a href="advice.html" class="navbar-item calculator">
                        ğŸ’° Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø«Ø±ÙˆØ©
                    </a>
                    <a href="salary_calculator.html" class="navbar-item salary">
                        ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ØªØ¨
                    </a>
                    <a href="zakat_purification.html" class="navbar-item zakat">
                        ğŸ•Œ Ø§Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ø²ÙƒØ§Ø©
                    </a>
                    <a href="financial_freedom.html" class="navbar-item fire">
                        ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©
                    </a>
                    <a href="investor_tips.html" class="navbar-item tips">
                        âš ï¸ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±
                    </a>
                    <a href="snowball_calculator.html" class="navbar-item calculator">
                        â„ï¸ Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬
                    </a>
                    <a href="emergency_fund_calculator.html" class="navbar-item emergency">
                        ğŸ›¡ï¸ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
                    </a>
                    <a href="stock_valuation.html" class="navbar-item valuation">
                        ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…
                    </a>
                </div>
                <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
            </div>
        </nav>

        <script>
        function toggleNavbar() {
            const menu = document.getElementById('navbarMenu');
            menu.classList.toggle('collapsed');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navItems = document.querySelectorAll('.navbar-item');
            
            navItems.forEach(item => {
                const itemPage = item.getAttribute('href');
                if (itemPage === currentPage || 
                    (currentPage === '' && itemPage === 'index.html')) {
                    item.classList.add('active');
                }
            });
        });
        </script>

        <div class="header">
            <h1>ğŸ›¡ï¸ Ø­Ø§Ø³Ø¨Ø© ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h1>
            <p>Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø°ÙŠ ØªØ­ØªØ§Ø¬Ù‡ Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ù…ØµØ§Ø±ÙŠÙÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</p>
        </div>

        <div class="calculator-grid">
            <div class="card">
                <h2 class="section-title">ğŸ“Š Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h2>
                
                <div class="input-group">
                    <label for="housing">ğŸ  Ø§Ù„Ø³ÙƒÙ† (Ø¥ÙŠØ¬Ø§Ø± Ø£Ùˆ Ù‚Ø³Ø· Ø¹Ù‚Ø§Ø±ÙŠ)</label>
                    <input type="number" id="housing" value="3000" min="0" step="100">
                </div>

                <div class="input-group">
                    <label for="utilities">ğŸ’¡ Ø§Ù„ÙÙˆØ§ØªÙŠØ± (ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ù…ÙŠØ§Ù‡ØŒ Ø§ØªØµØ§Ù„ØŒ Ø¥Ù†ØªØ±Ù†Øª)</label>
                    <input type="number" id="utilities" value="500" min="0" step="50">
                </div>

                <div class="input-group">
                    <label for="living">ğŸ›’ Ø§Ù„Ù…Ø¹ÙŠØ´Ø© (Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©ØŒ Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„)</label>
                    <input type="number" id="living" value="1500" min="0" step="100">
                </div>

                <div class="input-group">
                    <label for="transport">ğŸš— Ø§Ù„Ù†Ù‚Ù„ (ÙˆÙ‚ÙˆØ¯ØŒ ØµÙŠØ§Ù†Ø©ØŒ ØªØ£Ù…ÙŠÙ†ØŒ Ø£Ù‚Ø³Ø§Ø· Ø³ÙŠØ§Ø±Ø©)</label>
                    <input type="number" id="transport" value="800" min="0" step="50">
                </div>

                <div class="input-group">
                    <label for="commitments">ğŸ’³ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª (Ø£Ù‚Ø³Ø§Ø· Ù‚Ø±ÙˆØ¶ Ø´Ø®ØµÙŠØ© Ø£Ùˆ Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©)</label>
                    <input type="number" id="commitments" value="600" min="0" step="50">
                </div>

                <div class="input-group">
                    <label for="others">ğŸ“š Ø£Ø®Ø±Ù‰ (Ù…ØµØ§Ø±ÙŠÙ ØªØ¹Ù„ÙŠÙ…ØŒ ØªØ£Ù…ÙŠÙ† Ø·Ø¨ÙŠØŒ Ù…ØµØ§Ø±ÙŠÙ Ø¯ÙˆØ±ÙŠØ©)</label>
                    <input type="number" id="others" value="400" min="0" step="50">
                </div>
            </div>

            <div class="card">
                <h2 class="section-title">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù‡Ø¯Ù Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h2>
                
                <div class="select-group">
                    <label for="coveragePeriod">Ù…Ø¯Ø© Ø§Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
                    <select id="coveragePeriod" onchange="updateSecurityLevel()">
                        <option value="3">3 Ø£Ø´Ù‡Ø±</option>
                        <option value="6" selected>6 Ø£Ø´Ù‡Ø±</option>
                        <option value="9">9 Ø£Ø´Ù‡Ø±</option>
                        <option value="12">12 Ø´Ù‡Ø±Ù‹Ø§</option>
                    </select>
                </div>

                <div class="info-box">
                    <h4>ğŸ“‹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡</h4>
                    <p id="securityLevelInfo">6 Ø£Ø´Ù‡Ø± - Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø± ÙˆØ§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ°Ø¨Ø°Ø¨Ø©</p>
                </div>

                <div class="info-box">
                    <h4>ğŸ’¡ Ù†ØµÙŠØ­Ø© Ù…Ù‡Ù…Ø©</h4>
                    <p>ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ Ù…Ù†ÙØµÙ„ØŒ Ø³Ù‡Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡ØŒ ÙˆÙ„Ø§ ÙŠØ³ØªØ«Ù…Ø± ÙÙŠ Ø£ØµÙˆÙ„ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø®Ø§Ø·Ø±. Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº Ù‡Ùˆ ØµÙ…Ø§Ù… Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø§Ù„ÙŠ Ù„Ùƒ.</p>
                </div>

                <button class="calculate-btn" onclick="calculateEmergencyFund()">
                    Ø§Ø­Ø³Ø¨ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
                </button>
            </div>
        </div>

        <div class="results-section" id="resultsSection">
            <div class="result-card">
                <h2>ğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h2>
                <div class="result-amount" id="targetAmount">-</div>
                <div class="result-period" id="coverageInfo">-</div>
            </div>

            <div class="chart-container">
                <h2 class="section-title">ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h2>
                <div class="chart-wrapper">
                    <canvas id="expensesChart"></canvas>
                </div>
            </div>

            <div class="advice-card">
                <h3>ğŸ¯ Ù†ØµØ§Ø¦Ø­ Ù…Ø§Ù„ÙŠØ© Ø°ÙƒÙŠØ©</h3>
                <ul id="adviceList">
                </ul>
            </div>

            <div class="breakdown-table">
                <h2 class="section-title">ğŸ“‹ ØªÙØµÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ø¨Ù†Ø¯</th>
                            <th>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø´Ù‡Ø±ÙŠ</th>
                            <th>Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©</th>
                            <th>Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ØµØ±ÙŠ</th>
                        </tr>
                    </thead>
                    <tbody id="breakdownBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let expensesChart = null;

        function formatCurrency(amount) {
            return new Intl.NumberFormat('ar-SA', {
                style: 'currency',
                currency: 'SAR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function updateSecurityLevel() {
            const period = document.getElementById('coveragePeriod').value;
            const infoElement = document.getElementById('securityLevelInfo');
            
            switch(period) {
                case '3':
                    infoElement.textContent = '3 Ø£Ø´Ù‡Ø± - Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³ØªÙ‚Ø± Ù…Ø¹ Ø¯Ø®Ù„ Ø«Ø§Ø¨Øª';
                    break;
                case '6':
                    infoElement.textContent = '6 Ø£Ø´Ù‡Ø± - Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø­Ø± ÙˆØ§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ°Ø¨Ø°Ø¨Ø©';
                    break;
                case '9':
                    infoElement.textContent = '9 Ø£Ø´Ù‡Ø± - Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© ÙˆØ§Ù„Ø¯Ø®Ù„ ØºÙŠØ± Ø§Ù„Ù…Ù†ØªØ¸Ù…';
                    break;
                case '12':
                    infoElement.textContent = '12 Ø´Ù‡Ø±Ù‹Ø§ - Ù…Ù†Ø§Ø³Ø¨ Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ÙˆØ§Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‚Ø±Ø©';
                    break;
            }
        }

        function calculateEmergencyFund() {
            // Ø¬Ù…Ø¹ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
            const expenses = {
                housing: parseFloat(document.getElementById('housing').value) || 0,
                utilities: parseFloat(document.getElementById('utilities').value) || 0,
                living: parseFloat(document.getElementById('living').value) || 0,
                transport: parseFloat(document.getElementById('transport').value) || 0,
                commitments: parseFloat(document.getElementById('commitments').value) || 0,
                others: parseFloat(document.getElementById('others').value) || 0
            };

            const totalMonthlyExpenses = Object.values(expenses).reduce((sum, val) => sum + val, 0);
            const coveragePeriod = parseInt(document.getElementById('coveragePeriod').value);
            const targetAmount = totalMonthlyExpenses * coveragePeriod;

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            document.getElementById('targetAmount').textContent = formatCurrency(targetAmount);
            document.getElementById('coverageInfo').textContent = `Ù„ØªØºØ·ÙŠØ© ${coveragePeriod} Ø£Ø´Ù‡Ø± Ù…Ù† Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© (${formatCurrency(totalMonthlyExpenses)})`;

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ
            createExpensesChart(expenses);

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†ØµØ§Ø¦Ø­
            generateAdvice(totalMonthlyExpenses, targetAmount, coveragePeriod);

            // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙØµÙŠÙ„
            createBreakdownTable(expenses, totalMonthlyExpenses);

            // Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('resultsSection').style.display = 'block';
            
            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function createExpensesChart(expenses) {
            const ctx = document.getElementById('expensesChart').getContext('2d');
            
            const labels = {
                housing: 'Ø§Ù„Ø³ÙƒÙ†',
                utilities: 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',
                living: 'Ø§Ù„Ù…Ø¹ÙŠØ´Ø©',
                transport: 'Ø§Ù„Ù†Ù‚Ù„',
                commitments: 'Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª',
                others: 'Ø£Ø®Ø±Ù‰'
            };

            const data = Object.values(expenses);
            const chartLabels = Object.keys(expenses).map(key => labels[key]);

            // ØªØ¯Ù…ÙŠØ± Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ ÙˆØ¬Ø¯
            if (expensesChart) {
                expensesChart.destroy();
            }

            expensesChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#5a7fb5',
                            '#d67a6a',
                            '#e89d5a',
                            '#5a9d7a',
                            '#8a7ba8',
                            '#9a9fb5'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                font: {
                                    size: 14
                                },
                                padding: 20
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((sum, val) => sum + val, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return context.label + ': ' + formatCurrency(context.parsed) + ' (' + percentage + '%)';
                                }
                            }
                        }
                    }
                }
            });
        }

        function generateAdvice(monthlyExpenses, targetAmount, coveragePeriod) {
            const adviceList = document.getElementById('adviceList');
            const advice = [];

            // Ù†ØµØ§Ø¦Ø­ Ø£Ø³Ø§Ø³ÙŠØ©
            advice.push(`Ø§Ø­ØªÙØ¸ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº (${formatCurrency(targetAmount)}) ÙÙŠ Ø­Ø³Ø§Ø¨ ØªÙˆÙÙŠØ± Ù…Ù†ÙØµÙ„ Ø¹Ù† Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ`);
            
            // Ù†ØµØ§Ø¦Ø­ Ø­Ø³Ø¨ Ø­Ø¬Ù… Ø§Ù„Ù…Ø¨Ù„Øº
            if (targetAmount > 50000) {
                advice.push('Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ø¨Ù„ØºØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ø³ÙŠÙ…Ù‡ Ø¨ÙŠÙ† Ø­Ø³Ø§Ø¨ ØªÙˆÙÙŠØ± ÙˆÙˆØ¯Ø§Ø¦Ø¹ Ù‚ØµÙŠØ±Ø© Ø§Ù„Ø£Ø¬Ù„ Ù„ØªØ­Ù‚ÙŠÙ‚ Ø¨Ø¹Ø¶ Ø§Ù„Ø¹Ø§Ø¦Ø¯');
            } else if (targetAmount < 10000) {
                advice.push('Ø­Ø§ÙˆÙ„ ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø¨Ù„Øº Ø®Ù„Ø§Ù„ 6-12 Ø´Ù‡Ø±Ù‹Ø§ Ø¹Ø¨Ø± ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©');
            }

            // Ù†ØµØ§Ø¦Ø­ Ø­Ø³Ø¨ Ù…Ø¯Ø© Ø§Ù„ØªØºØ·ÙŠØ©
            if (coveragePeriod >= 9) {
                advice.push('Ù…Ø¯Ø© Ø§Ù„ØªØºØ·ÙŠØ© Ø·ÙˆÙŠÙ„Ø© Ø¬Ø¯Ù‹Ø§ - ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø§Ø³ØªØ«Ù…Ø§Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº ÙÙŠ Ø£ØµÙˆÙ„ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø®Ø§Ø·Ø±');
            } else if (coveragePeriod <= 3) {
                advice.push('Ù…Ø¯Ø© Ø§Ù„ØªØºØ·ÙŠØ© Ù‚ØµÙŠØ±Ø© - ÙÙƒØ± ÙÙŠ Ø²ÙŠØ§Ø¯ØªÙ‡Ø§ Ø¥Ù„Ù‰ 6 Ø£Ø´Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø§Ù„ÙŠ');
            }

            // Ù†ØµØ§Ø¦Ø­ Ø­Ø³Ø¨ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ
            if (monthlyExpenses > 10000) {
                advice.push('Ù…ØµØ§Ø±ÙŠÙÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù…Ø±ØªÙØ¹Ø© - Ø±Ø§Ø¬Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ØªÙ‚Ù„ÙŠÙ„ Ø¨Ø¹Ø¶ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ù„Ø²ÙŠØ§Ø¯Ø© Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø¯Ø®Ø§Ø±');
            }

            advice.push('Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø¥Ù„Ø§ Ù„Ù„Ø¸Ø±ÙˆÙ Ø§Ù„Ø·Ø§Ø±Ø¦Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (ÙÙ‚Ø¯Ø§Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ©ØŒ Ù…Ø´Ø§ÙƒÙ„ ØµØ­ÙŠØ©ØŒ Ø¥ØµÙ„Ø§Ø­Ø§Øª Ø¹Ø§Ø¬Ù„Ø©)');
            advice.push('Ø£Ø¹Ø¯ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙÙˆØ±Ù‹Ø§ Ø¥Ø°Ø§ Ø³Ø­Ø¨Øª Ù…Ù†Ù‡ Ø£ÙŠ Ù…Ø¨Ù„Øº');

            adviceList.innerHTML = advice.map(item => `<li>${item}</li>`).join('');
        }

        function createBreakdownTable(expenses, total) {
            const tbody = document.getElementById('breakdownBody');
            const labels = {
                housing: 'ğŸ  Ø§Ù„Ø³ÙƒÙ†',
                utilities: 'ğŸ’¡ Ø§Ù„ÙÙˆØ§ØªÙŠØ±',
                living: 'ğŸ›’ Ø§Ù„Ù…Ø¹ÙŠØ´Ø©',
                transport: 'ğŸš— Ø§Ù„Ù†Ù‚Ù„',
                commitments: 'ğŸ’³ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª',
                others: 'ğŸ“š Ø£Ø®Ø±Ù‰'
            };

            let rows = '';
            for (const [key, value] of Object.entries(expenses)) {
                const percentage = total > 0 ? (value / total * 100).toFixed(1) : 0;
                rows += `
                    <tr>
                        <td><strong>${labels[key]}</strong></td>
                        <td>${formatCurrency(value)}</td>
                        <td>${percentage}%</td>
                        <td>
                            <div class="percentage-bar">
                                <div class="percentage-fill" style="width: ${percentage}%"></div>
                            </div>
                        </td>
                    </tr>
                `;
            }

            // Ø¥Ø¶Ø§ÙØ© ØµÙ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹
            rows += `
                <tr style="background: #f8f9fa; font-weight: bold;">
                    <td>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</td>
                    <td>${formatCurrency(total)}</td>
                    <td>100%</td>
                    <td>
                        <div class="percentage-bar">
                            <div class="percentage-fill" style="width: 100%"></div>
                        </div>
                    </td>
                </tr>
            `;

            tbody.innerHTML = rows;
        }

        // Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            updateSecurityLevel();
            calculateEmergencyFund();
        });
    </script>
    <script data-goatcounter="https://investornote.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
