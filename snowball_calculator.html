<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬ - Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ù…Ø±ÙƒØ¨</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #e8f0f5 0%, #d0e0e8 100%);
            min-height: 100vh;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-panel, .results-panel {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #5a9d7a;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #5a9d7a;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin-left: 10px;
            transform: scale(1.2);
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #5a9d7a, #6aad8a);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(90, 157, 122, 0.3);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: linear-gradient(135deg, #5a7fb5 0%, #6a8fc5 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .summary-card.deposits {
            background: linear-gradient(135deg, #5a7fb5, #4a6fa5);
        }

        .summary-card.earnings {
            background: linear-gradient(135deg, #5a9d7a, #4a8d6a);
        }

        .summary-card.final {
            background: linear-gradient(135deg, #d67a6a, #c66a5a);
        }

        .summary-card h3 {
            font-size: 0.9rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .summary-card .amount {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            max-height: 500px;
            overflow: hidden;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
            width: 100%;
        }

        .timeline-table {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .timeline-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .timeline-table th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: right;
            font-weight: bold;
        }

        .timeline-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e0e0e0;
            text-align: right;
        }

        .timeline-table tr:hover {
            background: #f8f9fa;
        }

        .hidden {
            display: none;
        }

        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 968px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ù…ÙˆØ­Ø¯ -->
        <link rel="stylesheet" href="navigation.css">
        <nav class="navbar">
            <div class="navbar-container">
                <a href="index.html" class="navbar-brand">
                    ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±
                </a>
                <div class="navbar-menu" id="navbarMenu">
                    <a href="index.html" class="navbar-item">
                        ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                    </a>
                    <a href="snowball_calculator.html" class="navbar-item calculator">
                        â„ï¸ Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬
                    </a>
                    <a href="advice.html" class="navbar-item calculator">
                        ğŸ’° Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø«Ø±ÙˆØ©
                    </a>
                    <a href="investor_tips.html" class="navbar-item tips">
                        âš ï¸ Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±
                    </a>
                    <a href="emergency_fund_calculator.html" class="navbar-item emergency">
                        ğŸ›¡ï¸ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
                    </a>
                    <a href="salary_calculator.html" class="navbar-item salary">
                        ğŸ’¼ Ø­Ø§Ø³Ø¨Ø© ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨
                    </a>
                    <a href="zakat_purification.html" class="navbar-item zakat">
                        ğŸ•Œ Ø§Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ø²ÙƒØ§Ø©
                    </a>
                    <a href="financial_freedom.html" class="navbar-item fire">
                        ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©
                    </a>
                </div>
                <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
            </div>
        </nav>

        <script>
        function toggleNavbar() {
            const menu = document.getElementById('navbarMenu');
            menu.classList.toggle('collapsed');
        }

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù†Ø´Ø·Ø©
        document.addEventListener('DOMContentLoaded', function() {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const navItems = document.querySelectorAll('.navbar-item');
            
            navItems.forEach(item => {
                const itemPage = item.getAttribute('href');
                if (itemPage === currentPage || 
                    (currentPage === '' && itemPage === 'index.html')) {
                    item.classList.add('active');
                }
            });
        });
        </script>
        
        <div class="header">
            <h1>â„ï¸ Ø­Ø§Ø³Ø¨Ø© ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬</h1>
            <p>Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ Ø§Ù„Ù…Ø±ÙƒØ¨ ÙˆØ´Ø§Ù‡Ø¯ ÙƒÙŠÙ ØªÙ†Ù…Ùˆ Ø«Ø±ÙˆØªÙƒ Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª</p>
        </div>

        <div class="calculator-container">
            <div class="input-panel">
                <h2 class="section-title">ğŸ“Š Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª</h2>
                
                <div class="form-group">
                    <label for="principal">Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± (Ø±ÙŠØ§Ù„)</label>
                    <input type="number" id="principal" value="10000" min="0" step="100">
                </div>

                <div class="form-group">
                    <label for="additionalDeposit">Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ø¥Ø¶Ø§ÙÙŠ (Ø±ÙŠØ§Ù„)</label>
                    <input type="number" id="additionalDeposit" value="500" min="0" step="50">
                </div>

                <div class="form-group">
                    <label for="depositFrequency">ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</label>
                    <select id="depositFrequency">
                        <option value="monthly">Ø´Ù‡Ø±ÙŠ</option>
                        <option value="quarterly">Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ</option>
                        <option value="semiannually">Ù†ØµÙ Ø³Ù†ÙˆÙŠ</option>
                        <option value="annually">Ø³Ù†ÙˆÙŠ</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="returnRate">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ø¦Ø¯ (%)</label>
                        <input type="number" id="returnRate" value="8" min="0" max="100" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="rateType">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø§Ø¦Ø¯</label>
                        <select id="rateType">
                            <option value="annually">Ø³Ù†ÙˆÙŠ</option>
                            <option value="monthly">Ø´Ù‡Ø±ÙŠ</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="years">Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (Ø³Ù†ÙˆØ§Øª)</label>
                    <input type="number" id="years" value="10" min="1" max="50" step="1">
                </div>

                <div class="checkbox-group">
                    <label for="dripEnabled">
                        <input type="checkbox" id="dripEnabled">
                        ØªÙØ¹ÙŠÙ„ Ø®Ø§ØµÙŠØ© DRIP (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª)
                    </label>
                </div>

                <div class="form-group">
                    <label for="inflationRate">Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ¶Ø®Ù… (%) - Ø§Ø®ØªÙŠØ§Ø±ÙŠ</label>
                    <input type="number" id="inflationRate" value="2" min="0" max="50" step="0.1">
                </div>

                <div class="form-group">
                    <label for="depositIncrease">Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ (%) - Ø§Ø®ØªÙŠØ§Ø±ÙŠ</label>
                    <input type="number" id="depositIncrease" value="0" min="0" max="100" step="1">
                </div>

                <button class="calculate-btn" onclick="calculateCompoundInterest()">
                    Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ
                </button>

                <div class="note">
                    ğŸ’¡ <strong>Ù†ØµÙŠØ­Ø©:</strong> Ø®Ø§ØµÙŠØ© DRIP ØªØ²ÙŠØ¯ Ù…Ù† ÙØ¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨ Ø¹Ø¨Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙÙˆØ±Ø§Ù‹.
                </div>
            </div>

            <div class="results-panel">
                <h2 class="section-title">ğŸ“ˆ Ù…Ù„Ø®Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
                
                <div class="summary-cards">
                    <div class="summary-card deposits">
                        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</h3>
                        <div class="amount" id="totalDeposits">-</div>
                    </div>
                    <div class="summary-card earnings">
                        <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</h3>
                        <div class="amount" id="totalEarnings">-</div>
                    </div>
                    <div class="summary-card final">
                        <h3>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
                        <div class="amount" id="finalValue">-</div>
                    </div>
                </div>

                <div class="summary-cards">
                    <div class="summary-card">
                        <h3>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¶Ø®Ù…)</h3>
                        <div class="amount" id="realValue">-</div>
                    </div>
                    <div class="summary-card">
                        <h3>Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (%)</h3>
                        <div class="amount" id="totalReturn">-</div>
                    </div>
                    <div class="summary-card">
                        <h3>Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø§Ù„Ù…Ø±ÙƒØ¨</h3>
                        <div class="amount" id="cagr">-</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container hidden" id="chartSection">
            <h2 class="section-title">ğŸ“Š Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ù„Ù†Ù…Ùˆ Ø§Ù„Ø«Ø±ÙˆØ©</h2>
            <div class="chart-wrapper">
                <canvas id="wealthChart"></canvas>
            </div>
        </div>

        <div class="timeline-table hidden" id="timelineSection">
            <h2 class="section-title">ğŸ“… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ù„Ù†Ù…Ùˆ Ø§Ù„Ø«Ø±ÙˆØ©</h2>
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ø³Ù†Ø©</th>
                        <th>Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ø³Ù†ÙˆÙŠ</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª</th>
                        <th>Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø³Ù†ÙˆÙŠØ©</th>
                        <th>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</th>
                        <th>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
                        <th>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©</th>
                    </tr>
                </thead>
                <tbody id="timelineBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        let wealthChart = null;

        function formatCurrency(amount) {
            return new Intl.NumberFormat('ar-SA', {
                style: 'currency',
                currency: 'SAR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function formatPercent(value) {
            return value.toFixed(2) + '%';
        }

        function getDepositsPerYear(frequency) {
            switch(frequency) {
                case 'monthly': return 12;
                case 'quarterly': return 4;
                case 'semiannually': return 2;
                case 'annually': return 1;
                default: return 12;
            }
        }

        function calculateCompoundInterest() {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            const principal = parseFloat(document.getElementById('principal').value) || 0;
            const additionalDeposit = parseFloat(document.getElementById('additionalDeposit').value) || 0;
            const depositFrequency = document.getElementById('depositFrequency').value;
            const returnRate = parseFloat(document.getElementById('returnRate').value) || 0;
            const rateType = document.getElementById('rateType').value;
            const years = parseInt(document.getElementById('years').value) || 0;
            const dripEnabled = document.getElementById('dripEnabled').checked;
            const inflationRate = parseFloat(document.getElementById('inflationRate').value) || 0;
            const depositIncrease = parseFloat(document.getElementById('depositIncrease').value) || 0;

            // ØªØ­ÙˆÙŠÙ„ Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø¥Ù„Ù‰ Ù…Ø¹Ø¯Ù„ Ø³Ù†ÙˆÙŠ
            let annualRate = rateType === 'monthly' ? Math.pow(1 + returnRate/100, 12) - 1 : returnRate/100;
            
            // Ø¹Ø¯Ø¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©
            const depositsPerYear = getDepositsPerYear(depositFrequency);
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØ¹Ù„ÙŠ Ø§Ù„ÙØµÙ„ÙŠ/Ø´Ù‡Ø±ÙŠ
            const effectiveRate = annualRate / depositsPerYear;
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ØµÙÙˆÙØ§Øª
            const timelineData = [];
            let currentBalance = principal;
            let totalDeposits = principal;
            let totalEarnings = 0;
            let currentDeposit = additionalDeposit;
            
            // Ø­Ø³Ø§Ø¨ Ù„ÙƒÙ„ Ø³Ù†Ø©
            for (let year = 0; year <= years; year++) {
                const yearlyDeposits = year === 0 ? 0 : currentDeposit * depositsPerYear;
                const yearlyEarnings = year === 0 ? 0 : currentBalance * annualRate;
                
                if (year > 0) {
                    // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹
                    currentDeposit = currentDeposit * (1 + depositIncrease/100);
                    
                    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ Ù…Ø¹ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª ÙˆØ§Ù„Ø£Ø±Ø¨Ø§Ø­
                    for (let deposit = 0; deposit < depositsPerYear; deposit++) {
                        currentBalance = currentBalance * (1 + effectiveRate) + currentDeposit;
                    }
                    
                    totalDeposits += yearlyDeposits;
                    totalEarnings += yearlyEarnings;
                }
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© (Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¶Ø®Ù…)
                const realValue = currentBalance / Math.pow(1 + inflationRate/100, year);
                
                timelineData.push({
                    year: year,
                    yearlyDeposits: yearlyDeposits,
                    totalDeposits: totalDeposits,
                    yearlyEarnings: yearlyEarnings,
                    totalEarnings: totalEarnings,
                    balance: currentBalance,
                    realValue: realValue
                });
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            displayResults(timelineData, principal, years);
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ ÙˆØ§Ù„Ø¬Ø¯ÙˆÙ„
            displayChart(timelineData);
            displayTimeline(timelineData);
        }

        function displayResults(data, principal, years) {
            const finalData = data[data.length - 1];
            const totalDeposits = finalData.totalDeposits;
            const totalEarnings = finalData.totalEarnings;
            const finalValue = finalData.balance;
            const realValue = finalData.realValue;
            
            const totalReturn = ((finalValue - totalDeposits) / totalDeposits * 100);
            const cagr = Math.pow(finalValue / principal, 1/years) - 1;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
            document.getElementById('totalDeposits').textContent = formatCurrency(totalDeposits);
            document.getElementById('totalEarnings').textContent = formatCurrency(totalEarnings);
            document.getElementById('finalValue').textContent = formatCurrency(finalValue);
            document.getElementById('realValue').textContent = formatCurrency(realValue);
            document.getElementById('totalReturn').textContent = formatPercent(totalReturn);
            document.getElementById('cagr').textContent = formatPercent(cagr * 100);
        }

        function displayChart(data) {
            const ctx = document.getElementById('wealthChart').getContext('2d');
            
            const labels = data.map(d => `Ø§Ù„Ø³Ù†Ø© ${d.year}`);
            const deposits = data.map(d => d.totalDeposits);
            const earnings = data.map(d => d.totalEarnings);
            const total = data.map(d => d.balance);
            
            // ØªØ¯Ù…ÙŠØ± Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ø°Ø§ ÙˆØ¬Ø¯
            if (wealthChart) {
                wealthChart.destroy();
            }
            
            wealthChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹Ø§Øª',
                            data: deposits,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­',
                            data: earnings,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ',
                            data: total,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 3,
                            fill: false,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ù†Ù…Ùˆ Ø§Ù„Ø«Ø±ÙˆØ© Ù…Ø¹ Ø§Ù„ÙˆÙ‚Øª (ØªØ£Ø«ÙŠØ± ÙƒØ±Ø© Ø§Ù„Ø«Ù„Ø¬)',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value);
                                }
                            }
                        }
                    }
                }
            });
            
            document.getElementById('chartSection').classList.remove('hidden');
        }

        function displayTimeline(data) {
            const tbody = document.getElementById('timelineBody');
            tbody.innerHTML = '';
            
            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.year}</td>
                    <td>${formatCurrency(row.yearlyDeposits)}</td>
                    <td>${formatCurrency(row.totalDeposits)}</td>
                    <td>${formatCurrency(row.yearlyEarnings)}</td>
                    <td>${formatCurrency(row.totalEarnings)}</td>
                    <td><strong>${formatCurrency(row.balance)}</strong></td>
                    <td>${formatCurrency(row.realValue)}</td>
                `;
                tbody.appendChild(tr);
            });
            
            document.getElementById('timelineSection').classList.remove('hidden');
        }

        // Ø­Ø³Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', function() {
            calculateCompoundInterest();
        });
    </script>
    <script data-goatcounter="https://investornote.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
