<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚ÙŠÙŠÙ… Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© | Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <style>
        /* ===== ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¯Ø§ÙƒÙ† ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: var(--bg-body) !important; /* Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø£ØµÙ„ÙŠØ© */
            color: var(--text-body);
            padding: 20px; 
        }

        .container { 
            max-width: 850px; 
            margin: 0 auto; 
            background: var(--bg-card) !important; 
            border-radius: 20px; 
            padding: 40px; 
            box-shadow: var(--shadow-card); 
            border: 1px solid var(--border);
        }

        h1 { text-align: center; color: var(--gold) !important; margin-bottom: 40px; font-size: 2.2rem; }

        /* ===== ØªØµÙ…ÙŠÙ… Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ (Input Cards) ===== */
        .rule-item { 
            background: var(--bg-card2) !important; 
            border-radius: 15px; 
            padding: 25px; 
            margin: 20px 0; 
            border-right: 4px solid var(--gold); 
            box-shadow: var(--shadow-sm); 
        }
        .rule-item h3 { color: var(--gold-light) !important; margin-bottom: 20px; font-size: 1.2rem; }

        .input-group label { display: block; color: var(--text-h); font-weight: 600; margin-bottom: 10px; font-size: 0.95rem; }
        .input-group input, .input-group select { 
            width: 100%; 
            padding: 12px; 
            background: var(--bg-input) !important; 
            border: 1px solid var(--border) !important; 
            border-radius: 8px; 
            color: var(--text-h) !important; 
            font-size: 1rem; 
        }

        /* ===== Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ø°ÙŠØ±ÙŠØ© (Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ©) ===== */
        .leverage-warning { 
            display: none; 
            background: linear-gradient(135deg, #2c2100 0%, #4d3d00 100%); 
            border: 1px solid var(--gold); 
            border-radius: 10px; 
            padding: 15px; 
            margin-top: 15px; 
            color: #fde68a; 
            font-weight: bold; 
            box-shadow: var(--shadow-glow-gold);
        }

        /* ===== ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ø§Ù„Ù…ØªØ¯Ø±Ø¬ Ø§Ù„Ø¯Ø§ÙƒÙ†) ===== */
        .results-section { 
            background: linear-gradient(145deg, #1a1a1a, #2d2d2d) !important; 
            border: 1px solid var(--border);
            color: white; 
            border-radius: 20px; 
            padding: 35px; 
            margin: 35px 0; 
            text-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .progress-container { 
            background: rgba(0,0,0,0.3) !important; 
            border-radius: 15px; 
            padding: 25px; 
            margin: 20px 0; 
            border: 1px solid rgba(255,255,255,0.05);
        }
        
        .progress-bar { height: 12px; background: #333; border-radius: 20px; overflow: hidden; margin-bottom: 20px; }
        .progress-fill { height: 100%; background: var(--gold); transition: width 0.8s ease; }

        .score-display { font-size: 3.5rem; font-weight: 900; color: var(--gold); text-shadow: var(--shadow-glow-gold); }
        
        .evaluation-text { 
            font-size: 1.2rem; 
            margin: 20px 0; 
            color: #eee; 
            background: rgba(255,255,255,0.03); 
            padding: 20px; 
            border-radius: 12px; 
            border-right: 4px solid var(--gold); 
        }

        /* ===== Ù†Ø§ÙØ°Ø© Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© (Ø°Ù‡Ø¨ÙŠ Ù…Ù„ÙƒÙŠ) ===== */
        .legal-modal { 
            position: fixed; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.9); display:flex; justify-content:center; align-items:center; z-index:99999; 
        }
        .modal-content { 
            background: #1a1a1a; 
            border: 2px solid var(--gold); 
            border-radius: 20px; 
            padding: 40px; 
            max-width: 500px; 
            width: 90%; 
            text-align: center; 
            box-shadow: var(--shadow-glow-gold);
        }
        .modal-content h2 { color: var(--gold); margin-bottom: 25px; font-size: 1.8rem; }
        .modal-content p { color: #ccc; line-height: 1.8; margin-bottom: 20px; }
        
        .modal-btn { 
            background: linear-gradient(135deg, var(--gold), #b48608); 
            color: #000; 
            font-weight: bold; 
            border: none; 
            padding: 15px 40px; 
            border-radius: 10px; 
            cursor: pointer; 
            font-size: 1.1rem; 
            transition: 0.3s;
        }
        .modal-btn:disabled { background: #444; color: #888; cursor: not-allowed; }

        .reset-btn { 
            background: transparent; 
            color: var(--text-muted); 
            border: 1px solid var(--border); 
            padding: 10px 20px; 
            border-radius: 8px; 
            cursor: pointer; 
            margin: 20px auto; 
            display: block; 
        }
        .reset-btn:hover { color: var(--red-light); border-color: var(--red-light); }

        .score-breakdown { background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-top: 20px; text-align: right; }
        .breakdown-item { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.9rem; }
        .positive { color: #4ade80; }
        .negative { color: #f87171; }

        @media (max-width:768px) { .container { padding: 20px; } }
    </style>
</head>
<body>

<div class="legal-modal" id="legalModal">
    <div class="modal-content">
        <h2>âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…</h2>
        <p>Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù‚Ø¯Ù… ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ù‡Ùˆ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ¥Ø±Ø´Ø§Ø¯ÙŠØ© ÙÙ‚Ø·.</p>
        <p>Ù„Ø§ ØªØ¹Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØªÙˆØµÙŠØ© Ù…Ø§Ù„ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©. ØªØ°ÙƒØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£Ù† Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± Ù‡ÙŠ Ù…Ø³Ø¤ÙˆÙ„ÙŠØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.</p>
        <div style="margin: 20px 0;">
            <label style="color: var(--gold); cursor: pointer;">
                <input type="checkbox" id="acceptCheckbox"> Ø£Ù‚Ø± Ø¨Ù‚Ø±Ø§Ø¡Ø© Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©
            </label>
        </div>
        <button class="modal-btn" id="enterBtn" disabled>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø­Ù„Ù„</button>
    </div>
</div>

<nav class="navbar">
    <div class="navbar-container">
        <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
        <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="index.html" class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="advice.html" class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
            <a href="salary_calculator.html" class="navbar-item salary">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
            <a href="zakat_purification.html" class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
            <a href="financial_freedom.html" class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
            <a href="investor_tips.html" class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
            <a href="snowball_calculator.html" class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
            <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
            <a href="average_calculator.html" class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
            <a href="company_valuation.html" class="navbar-item company">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
            <a href="retirement_calculator.html" class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
            <a href="portfolio_rating.html" class="navbar-item portfolio active">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            <a href="stock_valuation.html" class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
            <a href="dca_calculator.html" class="navbar-item calculator">ğŸ“… DCA</a>
            <a href="sell_decision.html" class="navbar-item calculator">ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ØŸ</a>
            <a href="goal_calculator.html" class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
            <a href="allocation_calculator.html" class="navbar-item allocation">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
        </div>
    </div>
</nav>

<div class="container">
    <h1>ğŸ›¡ï¸ Ù…Ø­Ù„Ù„ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ</h1>

    <div class="rule-item">
        <h3>ğŸ“Š ØªØ±ÙƒØ² Ø§Ù„Ø£ØµÙˆÙ„</h3>
        <div class="input-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ø³Ù‡Ù… (%)</label>
                <input type="number" id="largestStockPercentage" placeholder="Ù…Ø«Ø§Ù„: 15" oninput="updateResults()">
            </div>
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ù‚Ø·Ø§Ø¹ (%)</label>
                <input type="number" id="largestSectorPercentage" placeholder="Ù…Ø«Ø§Ù„: 30" oninput="updateResults()">
            </div>
        </div>
    </div>

    <div class="rule-item">
        <h3>ğŸ§± Ø§Ù„ØªÙ†ÙˆØ¹ ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Øª</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
            <div class="input-group"><label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù…</label><input type="number" id="individualStocks" placeholder="0" oninput="updateResults()"></div>
            <div class="input-group"><label>ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø±ÙŠØª</label><input type="number" id="reitCount" placeholder="0" oninput="updateResults()"></div>
            <div class="input-group"><label>ØµÙ†Ø§Ø¯ÙŠÙ‚ ETFs</label><input type="number" id="etfCount" placeholder="0" oninput="updateResults()"></div>
        </div>
    </div>

    <div class="rule-item">
        <h3>ğŸŒ Ø§Ù„Ù†Ø·Ø§Ù‚ ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©</h3>
        <div class="input-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="input-group">
                <label>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</label>
                <select id="geographicDistribution" onchange="updateResults()">
                    <option value="">Ø§Ø®ØªØ±</option>
                    <option value="local-only">Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·</option>
                    <option value="diversified">Ù…ØªÙ†ÙˆØ¹Ø© (Ù…Ø­Ù„ÙŠ + Ø¯ÙˆÙ„ÙŠ)</option>
                </select>
            </div>
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨</label>
                <select id="goldPercentage" onchange="updateResults()">
                    <option value="none">Ù„Ø§ ÙŠÙˆØ¬Ø¯</option>
                    <option value="low">Ø£Ù‚Ù„ Ù…Ù† 5%</option>
                    <option value="medium">5% - 10%</option>
                    <option value="high">Ø£ÙƒØ«Ø± Ù…Ù† 10%</option>
                </select>
            </div>
        </div>
    </div>

    <div class="rule-item">
        <h3>â³ Ø§Ù„Ø£ÙÙ‚ Ø§Ù„Ø²Ù…Ù†ÙŠ ÙˆØ§Ù„Ø±Ø§ÙØ¹Ø©</h3>
        <div class="input-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="input-group">
                <label>Ù‡Ù„ ØªØ³ØªØ®Ø¯Ù… Ø±Ø§ÙØ¹Ø©/Ù…Ø§Ø±Ø¬Ù†ØŸ</label>
                <select id="usesLeverage" onchange="updateResults()">
                    <option value="no">Ù„Ø§</option>
                    <option value="yes">Ù†Ø¹Ù…</option>
                </select>
            </div>
            <div class="input-group">
                <label>Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙƒØ§Ø´ (5%+)</label>
                <select id="hasCash" onchange="updateResults()">
                    <option value="no">Ù„Ø§</option>
                    <option value="yes">Ù†Ø¹Ù…</option>
                </select>
            </div>
        </div>
        <div id="leverageWarning" class="leverage-warning">
            âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù„ÙƒÙŠ: Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªØ²ÙŠØ¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø£Ø²Ù…Ø§Øª. ØªÙ… Ø®ØµÙ… 2.5 Ù†Ù‚Ø·Ø© Ù…Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ….
        </div>
    </div>

    <div class="results-section" id="resultsArea">
        <div class="score-display" id="safetyScore">0/10</div>
        <div style="color: var(--gold); font-weight: bold; margin-bottom: 20px;">Ù…Ø¤Ø´Ø± Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>
        
        <div class="progress-container">
            <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 0%"></div></div>
            <div id="evaluationText">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙØ¸ØªÙƒ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„</div>
        </div>

        <div class="evaluation-text" id="smartFeedback" style="display:none; text-align: right;"></div>
        
        <div class="score-breakdown" id="scoreBreakdown" style="display:none;">
            <h4 style="color: var(--gold); margin-bottom: 10px;">ğŸ“Š ØªÙØµÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</h4>
            <div id="breakdownItems"></div>
        </div>
    </div>

    <button class="reset-btn" onclick="resetCalculator()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>

<script>
// Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
document.getElementById('acceptCheckbox').addEventListener('change', function() {
    document.getElementById('enterBtn').disabled = !this.checked;
});
document.getElementById('enterBtn').addEventListener('click', function() {
    document.getElementById('legalModal').style.fadeOut = "slow";
    document.getElementById('legalModal').style.display = 'none';
});

function updateResults() {
    const lev = document.getElementById('usesLeverage').value;
    document.getElementById('leverageWarning').style.display = lev === 'yes' ? 'block' : 'none';

    let score = 0;
    let breakdown = [];
    
    // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… (0-2.5 Ù†Ù‚Ø·Ø©)
    const is = parseInt(document.getElementById('individualStocks').value) || 0;
    let s_is = is >= 15 ? 2.5 : is >= 10 ? 1.5 : is >= 5 ? 1.0 : 0.5;
    score += s_is;
    breakdown.push({label: 'ØªÙ†ÙˆØ¹ Ø§Ù„Ø£Ø³Ù‡Ù…', value: s_is});

    // Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (0-1.5 Ù†Ù‚Ø·Ø©)
    const geo = document.getElementById('geographicDistribution').value;
    let s_geo = geo === 'diversified' ? 1.5 : 0.5;
    score += s_geo;
    breakdown.push({label: 'Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ', value: s_geo});

    // Ø§Ù„Ø°Ù‡Ø¨ ÙˆØ§Ù„ÙƒØ§Ø´ (0-2 Ù†Ù‚Ø·Ø©)
    const gold = document.getElementById('goldPercentage').value;
    const cash = document.getElementById('hasCash').value;
    let s_assets = (gold !== 'none' ? 1 : 0) + (cash === 'yes' ? 1 : 0);
    score += s_assets;
    breakdown.push({label: 'Ø£ØµÙˆÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ© (Ø°Ù‡Ø¨/ÙƒØ§Ø´)', value: s_assets});

    // Ø®ØµÙ… Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©
    if (lev === 'yes') {
        score -= 2.5;
        breakdown.push({label: 'Ø®ØµÙ… Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©', value: -2.5, penalty: true});
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    const finalScore = Math.max(0, Math.min(10, score));
    document.getElementById('safetyScore').textContent = finalScore.toFixed(1) + '/10';
    document.getElementById('progressFill').style.width = (finalScore * 10) + '%';
    
    let evalMsg = "";
    if(finalScore >= 8) evalMsg = "ğŸŸ¢ Ù…Ø­ÙØ¸Ø© Ù†Ù…ÙˆØ°Ø¬ÙŠØ© Ø°Ø§Øª Ø£Ù…Ø§Ù† Ø¹Ø§Ù„Ù";
    else if(finalScore >= 6) evalMsg = "ğŸŸ¡ Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¯Ø© ÙˆÙ„ÙƒÙ† ØªØ­ØªØ§Ø¬ Ø¨Ø¹Ø¶ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª";
    else evalMsg = "ğŸ”´ Ù…Ø­ÙØ¸Ø© Ø°Ø§Øª Ù…Ø®Ø§Ø·Ø± Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹";
    
    document.getElementById('evaluationText').textContent = evalMsg;
    
    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªÙØ§ØµÙŠÙ„
    document.getElementById('scoreBreakdown').style.display = 'block';
    document.getElementById('breakdownItems').innerHTML = breakdown.map(item => `
        <div class="breakdown-item">
            <span>${item.label}</span>
            <span class="${item.penalty ? 'negative' : 'positive'}">${item.value > 0 ? '+' : ''}${item.value}</span>
        </div>
    `).join('');
}

function resetCalculator() {
    location.reload();
}

function toggleNavbar(){document.getElementById('navbarMenu').classList.toggle('open');}
</script>
</body>
</html>
