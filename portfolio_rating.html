<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚ÙŠÙŠÙ… Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© | Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f172a;
            color: #f8fafc;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 820px;
            margin: 0 auto;
            background: #1e293b;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 1px solid #334155;
        }
        h1 { text-align: center; color: #fbbf24; margin-bottom: 10px; font-size: 2.3rem; }
        .subtitle { text-align: center; color: #94a3b8; margin-bottom: 35px; font-size: 0.95rem; }

        /* ===== Rule Items ===== */
        .rule-item {
            background: #334155;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-right: 4px solid #fbbf24;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .rule-item.warning-item { border-right: 4px solid #ef4444; background: #450a0a; }
        .rule-item h3 { color: #fbbf24; margin-bottom: 20px; font-size: 1.2rem; }
        .rule-item.warning-item h3 { color: #f87171; }

        /* ===== Inputs ===== */
        .input-group { margin-bottom: 18px; }
        .input-group label { display: block; color: #e2e8f0; font-weight: bold; margin-bottom: 8px; font-size: 0.9rem; }
        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #475569;
            border-radius: 8px;
            font-size: 1rem;
            background: #1e293b;
            color: white;
            transition: border-color 0.3s;
        }
        .input-group input:focus,
        .input-group select:focus { outline: none; border-color: #fbbf24; }
        .field-hint { font-size: 0.78rem; color: #64748b; margin-top: 5px; line-height: 1.4; }

        /* ===== Grid ===== */
        .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

        /* ===== Warnings ===== */
        .leverage-warning {
            display: none;
            background: linear-gradient(135deg, #451a03, #92400e);
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            color: #fef3c7;
            font-weight: bold;
            line-height: 1.6;
            box-shadow: 0 0 15px rgba(251,191,36,0.2);
        }
        .conflict-warning {
            display: none;
            background: #450a0a;
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 12px 15px;
            margin-top: 10px;
            color: #fca5a5;
            font-size: 0.88rem;
            font-weight: bold;
        }

        /* ===== Results ===== */
        .results-section {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            border: 1px solid #334155;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }
        .results-section h3 { color: #fbbf24; margin-bottom: 20px; font-size: 1.3rem; }

        .progress-container {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #334155;
        }
        .progress-bar { height: 30px; background: #334155; border-radius: 10px; overflow: hidden; position: relative; }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444, #991b1b);
            border-radius: 10px;
            width: 0%;
            transition: width 0.6s cubic-bezier(0.4,0,0.2,1);
            position: relative;
        }
        .progress-text {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%,-50%);
            color: white; font-weight: bold; font-size: 1.1rem; z-index: 10;
        }
        .score-info {
            display: flex; justify-content: space-between;
            align-items: center; margin-top: 20px; gap: 20px;
        }
        .score-display { font-size: 3rem; font-weight: bold; color: #fbbf24; }
        .percentage-display {
            font-size: 2rem; font-weight: bold;
            padding: 10px 20px; border-radius: 10px; min-width: 120px;
        }

        .evaluation-text {
            font-size: 1.05rem;
            margin: 15px 0;
            line-height: 1.6;
            color: #f1f5f9;
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            border-right: 4px solid #fbbf24;
            text-align: right;
        }

        /* ===== Breakdown ===== */
        .score-breakdown {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            text-align: right;
            display: none;
            border: 1px solid #334155;
        }
        .score-breakdown h4 { color: #fbbf24; margin-bottom: 12px; border-bottom: 2px solid #334155; padding-bottom: 8px; }
        .breakdown-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 7px 0; border-bottom: 1px solid #1e293b;
            font-size: 0.88rem; color: #cbd5e1;
        }
        .breakdown-item:last-child { border-bottom: none; }
        .breakdown-value.positive { color: #4ade80; }
        .breakdown-value.negative { color: #f87171; }
        .breakdown-value.neutral  { color: #94a3b8; }

        /* ===== ETF Notice ===== */
        .etf-notice {
            background: rgba(59,130,246,0.1);
            border: 1px solid #3b82f6;
            border-radius: 8px;
            padding: 12px 15px;
            margin-top: 10px;
            color: #93c5fd;
            font-size: 0.85rem;
            display: none;
        }

        /* ===== Legal ===== */
        .legal-banner {
            background: #451a03;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 20px;
            color: #fbbf24;
            font-weight: bold;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .legal-modal {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.85);
            display: flex; justify-content: center; align-items: center;
            z-index: 99999;
        }
        .modal-content {
            background: #1e293b;
            border: 2px solid #fbbf24;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px; width: 90%;
            max-height: 80vh; overflow-y: auto;
            text-align: center;
            box-shadow: 0 0 30px rgba(251,191,36,0.3);
        }
        .modal-content h2 { color: #fbbf24; margin-bottom: 20px; }
        .modal-content p  { color: #e2e8f0; line-height: 1.6; margin-bottom: 15px; }
        .modal-btn { background: #fbbf24; color: #0f172a; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: background 0.3s; }
        .modal-btn:disabled { background: #475569; color: #94a3b8; cursor: not-allowed; }

        .reset-btn {
            background: #ef4444; color: white; border: none;
            padding: 12px 24px; border-radius: 8px; cursor: pointer;
            font-size: 1rem; margin: 20px auto; display: block; transition: background 0.3s;
        }
        .reset-btn:hover { background: #dc2626; }

        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 1.8rem; }
            .two-col { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<!-- ===== Legal Modal ===== -->
<div class="legal-modal" id="legalModal">
    <div class="modal-content">
        <h2>âš ï¸ Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ù‚Ø§Ù†ÙˆÙ†ÙŠ</h2>
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ¥Ø±Ø´Ø§Ø¯ÙŠØ© ÙÙ‚Ø·ØŒ ÙˆÙ„Ø§ ØªØ¹Ø¯ ØªÙˆØµÙŠØ© Ø¨Ø§Ù„Ø¨ÙŠØ¹ Ø£Ùˆ Ø§Ù„Ø´Ø±Ø§Ø¡ Ø£Ùˆ Ø¯Ø¹ÙˆØ© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø£ÙŠ Ø£ÙˆØ±Ø§Ù‚ Ù…Ø§Ù„ÙŠØ©.</p>
        <p>Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø±. Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© ØªÙ‚Ø¯Ù‘Ù… Ù…Ø¤Ø´Ø±Ø§Ù‹ Ø¹Ø§Ù…Ø§Ù‹ ÙÙ‚Ø· â€” Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ­Ø¯Ù‡.</p>
        <div style="margin:15px 0;">
            <label style="color:#fbbf24;">
                <input type="checkbox" id="acceptCheckbox" style="margin-left:8px;transform:scale(1.2);">
                Ø£Ù‚Ø± Ø¨Ø£Ù†Ù†ÙŠ ÙÙ‡Ù…Øª Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ£ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§
            </label>
        </div>
        <button class="modal-btn" id="enterBtn" disabled>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
    </div>
</div>

<!-- ===== Navbar ===== -->
<nav class="navbar">
    <div class="navbar-container">
        <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
        <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="index.html"                     class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="advice.html"                    class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
            <a href="salary_calculator.html"         class="navbar-item salary">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
            <a href="zakat_purification.html"        class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
            <a href="financial_freedom.html"         class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
            <a href="investor_tips.html"             class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
            <a href="snowball_calculator.html"       class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
            <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
            <a href="average_calculator.html"        class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
            <a href="company_valuation.html"         class="navbar-item company">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
            <a href="retirement_calculator.html"     class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
            <a href="portfolio_rating.html"          class="navbar-item portfolio active">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            <a href="stock_valuation.html"           class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
            <a href="dca_calculator.html"            class="navbar-item calculator">ğŸ“… DCA</a>
            <a href="sell_decision.html"             class="navbar-item calculator">ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ØŸ</a>
            <a href="goal_calculator.html"           class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
            <a href="allocation_calculator.html"     class="navbar-item allocation">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
        </div>
    </div>
</nav>
<script>
function toggleNavbar() { document.getElementById('navbarMenu').classList.toggle('open'); }
document.addEventListener('DOMContentLoaded', function () {
    const page = (window.location.pathname.split('/').pop() || 'index.html').split('?')[0].split('#')[0] || 'index.html';
    document.querySelectorAll('.navbar-item').forEach(function (el) {
        el.classList.remove('active');
        if ((el.getAttribute('href') || '').split('?')[0].split('#')[0] === page) el.classList.add('active');
    });
});
</script>

<div class="legal-banner">
    âš ï¸ Ø¥Ù‚Ø±Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ: Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·. Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ø¤Ø´Ø± Ø¹Ø§Ù… ÙˆÙ„Ø§ ÙŠØ¹ÙƒØ³ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø§Ù„ÙŠØ© Ù…ØªØ®ØµØµØ©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚Ùƒ ÙˆØ­Ø¯Ùƒ.
</div>

<div class="container">
    <h1>ğŸ›¡ï¸ Ù‚ÙŠÙ‘Ù… Ø£Ù…Ø§Ù† Ù…Ø­ÙØ¸ØªÙƒ</h1>
    <p class="subtitle">ØªÙ‚ÙŠÙŠÙ… Ø´Ø§Ù…Ù„ ÙˆÙ…Ø­Ø§ÙŠØ¯ Ù„Ù…Ø³ØªÙˆÙ‰ ØªÙ†ÙˆÙŠØ¹ ÙˆØ£Ù…Ø§Ù† Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ©</p>

    <!-- ===== 1. Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø© ===== -->
    <div class="rule-item">
        <h3>ğŸ“¦ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
        <div class="two-col">
            <div class="input-group">
                <label>Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ù…Ù†ÙØ±Ø¯Ø©</label>
                <input type="number" id="individualStocks" placeholder="Ù…Ø«Ø§Ù„: 15" min="0" max="100">
            </div>
            <div class="input-group">
                <label>Ø¹Ø¯Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (ETFs)</label>
                <input type="number" id="etfCount" placeholder="Ù…Ø«Ø§Ù„: 3" min="0" max="50">
                <p class="field-hint">ÙƒÙ„ ETF ÙŠØ¹Ø§Ø¯Ù„ ØªÙ†ÙˆÙŠØ¹Ø§Ù‹ ÙÙŠ Ø¹Ø´Ø±Ø§Øª Ø¥Ù„Ù‰ Ù…Ø¦Ø§Øª Ø§Ù„Ø£Ø³Ù‡Ù…</p>
            </div>
            <div class="input-group">
                <label>Ø¹Ø¯Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø±ÙŠØª (REITs)</label>
                <input type="number" id="reitCount" placeholder="Ù…Ø«Ø§Ù„: 2" min="0" max="20">
            </div>
            <div class="input-group">
                <label>Ø¹Ø¯Ø¯ Ø§Ù„ØµÙƒÙˆÙƒ Ø£Ùˆ Ø§Ù„Ø³Ù†Ø¯Ø§Øª</label>
                <input type="number" id="bondCount" placeholder="Ù…Ø«Ø§Ù„: 1" min="0" max="20">
            </div>
        </div>
        <!-- âœ… Ø¥ØµÙ„Ø§Ø­: Ø¥Ø´Ø¹Ø§Ø± ETF â€” Ù„Ø§ Ø¹Ù‚ÙˆØ¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ«Ù…Ø± Ø§Ù„Ø°ÙƒÙŠ -->
        <div class="etf-notice" id="etfNotice">
            â„¹ï¸ Ù…Ø­ÙØ¸ØªÙƒ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª â€” Ù‡Ø°Ø§ ÙŠÙØ¹Ø§Ø¯Ù„ ØªÙ†ÙˆÙŠØ¹Ø§Ù‹ ÙˆØ§Ø³Ø¹Ø§Ù‹ Ø¬Ø¯Ø§Ù‹. Ø³ÙŠÙØ­ØªØ³Ø¨ Ø°Ù„Ùƒ Ø¨Ø´ÙƒÙ„ Ù…Ù†Ø§Ø³Ø¨ ÙÙŠ Ø§Ù„ØªÙ‚ÙŠÙŠÙ….
        </div>
    </div>

    <!-- ===== 2. Ø§Ù„ØªØ±ÙƒÙŠØ² ===== -->
    <div class="rule-item">
        <h3>ğŸ¯ Ø§Ù„ØªØ±ÙƒÙŠØ²</h3>
        <div class="two-col">
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ø³Ù‡Ù… / ØµÙ†Ø¯ÙˆÙ‚ ÙØ±Ø¯ÙŠ (%)</label>
                <input type="number" id="largestStockPercentage" placeholder="Ù…Ø«Ø§Ù„: 15" min="0" max="100" step="0.1">
                <p class="field-hint">Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡: Ø£Ù‚Ù„ Ù…Ù† 10% Ù„ÙƒÙ„ ÙˆØ±Ù‚Ø© Ù…Ø§Ù„ÙŠØ© Ù…Ù†ÙØ±Ø¯Ø©</p>
            </div>
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ù‚Ø·Ø§Ø¹ (%)</label>
                <input type="number" id="largestSectorPercentage" placeholder="Ù…Ø«Ø§Ù„: 30" min="0" max="100" step="0.1">
                <p class="field-hint">Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡: Ø£Ù‚Ù„ Ù…Ù† 30% ÙÙŠ Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯</p>
            </div>
        </div>
    </div>

    <!-- ===== 3. Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ===== -->
    <div class="rule-item">
        <h3>ğŸ­ ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h3>
        <div class="input-group">
            <label>Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ÙÙŠ Ù…Ø­ÙØ¸ØªÙƒ</label>
            <select id="sectorDiversification">
                <option value="">Ø§Ø®ØªØ±</option>
                <option value="single-sector">Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯</option>
                <option value="2-4-sectors">2â€“4 Ù‚Ø·Ø§Ø¹Ø§Øª</option>
                <option value="5-7-sectors">5â€“7 Ù‚Ø·Ø§Ø¹Ø§Øª</option>
                <option value="8-plus-sectors">8 Ù‚Ø·Ø§Ø¹Ø§Øª ÙØ£ÙƒØ«Ø±</option>
            </select>
        </div>
        <!-- âœ… Ø¥ØµÙ„Ø§Ø­: ØªØ­Ø°ÙŠØ± Ø§Ù„ØªÙ†Ø§Ù‚Ø¶ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª ÙˆØ§Ù„ØªØ±ÙƒÙŠØ² -->
        <div class="conflict-warning" id="sectorConflict">
            âš ï¸ ØªÙ†Ø§Ù‚Ø¶: Ø§Ø®ØªØ±Øª ØªÙ†ÙˆÙŠØ¹Ø§Ù‹ Ù‚Ø·Ø§Ø¹ÙŠØ§Ù‹ Ø¹Ø§Ù„ÙŠØ§Ù‹ Ù„ÙƒÙ† Ù†Ø³Ø¨Ø© Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø£ÙƒØ¨Ø± Ù…Ø±ØªÙØ¹Ø© Ø¬Ø¯Ø§Ù‹. Ø³ÙŠÙØ·Ø¨ÙÙ‘Ù‚ Ø®ØµÙ… Ø¥Ø¶Ø§ÙÙŠ.
        </div>
    </div>

    <!-- ===== 4. Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ ===== -->
    <div class="rule-item">
        <h3>ğŸŒ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h3>
        <div class="input-group">
            <label>Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ØºØ§Ù„Ø¨ Ù„Ù…Ø­ÙØ¸ØªÙƒ</label>
            <select id="geographicDistribution">
                <option value="">Ø§Ø®ØªØ±</option>
                <option value="local-only">Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø· (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)</option>
                <option value="regional">Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ© (Ø®Ù„ÙŠØ¬ / Ø¹Ø±Ø¨ÙŠ)</option>
                <option value="international">Ø¯ÙˆÙ„ÙŠØ© (Ø£Ø³ÙˆØ§Ù‚ Ø¹Ø§Ù„Ù…ÙŠØ© ÙÙ‚Ø·)</option>
                <option value="diversified">Ù…ØªÙ†ÙˆØ¹Ø© (Ù…Ø­Ù„ÙŠ + Ø¯ÙˆÙ„ÙŠ)</option>
            </select>
        </div>
    </div>

    <!-- ===== 5. Ø£ØµÙˆÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ===== -->
    <div class="rule-item">
        <h3>ğŸ›¡ï¸ Ø£ØµÙˆÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ©</h3>
        <div class="two-col">
            <div class="input-group">
                <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨ ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©</label>
                <select id="goldPercentage">
                    <option value="">Ø§Ø®ØªØ±</option>
                    <option value="none">Ù„Ø§ ÙŠÙˆØ¬Ø¯</option>
                    <option value="low">Ø£Ù‚Ù„ Ù…Ù† 5%</option>
                    <option value="medium">5% â€“ 10%</option>
                    <option value="high">Ø£ÙƒØ«Ø± Ù…Ù† 10%</option>
                </select>
            </div>
            <div class="input-group">
                <label>ÙƒØ§Ø´ Ø§Ø­ØªÙŠØ§Ø·ÙŠ (5â€“10%)</label>
                <select id="hasCash">
                    <option value="">Ø§Ø®ØªØ±</option>
                    <option value="yes">Ù†Ø¹Ù…</option>
                    <option value="no">Ù„Ø§</option>
                </select>
            </div>
        </div>
    </div>

    <!-- ===== 6. Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ===== -->
    <div class="rule-item">
        <h3>â³ Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</h3>
        <div class="input-group">
            <label>Ù…ØªÙ‰ ØªØªÙˆÙ‚Ø¹ Ø³Ø­Ø¨ Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§ØªÙƒØŸ</label>
            <select id="investmentHorizon">
                <option value="">Ø§Ø®ØªØ±</option>
                <option value="short">Ø£Ù‚Ù„ Ù…Ù† 3 Ø³Ù†ÙˆØ§Øª</option>
                <option value="medium">3 â€“ 10 Ø³Ù†ÙˆØ§Øª</option>
                <option value="long">Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª</option>
            </select>
        </div>
    </div>

    <!-- ===== 7. Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ===== -->
    <div class="rule-item warning-item">
        <h3>âš ï¸ Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
        <div class="two-col">
            <div class="input-group">
                <label>Ù‡Ù„ ØªØ³ØªØ®Ø¯Ù… Ù…Ø§Ø±Ø¬Ù† Ø£Ùˆ Ù‚Ø±Ø¶Ø§Ù‹ØŸ</label>
                <select id="usesLeverage">
                    <option value="">Ø§Ø®ØªØ±</option>
                    <option value="no">Ù„Ø§ØŒ Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®Ø§Øµ ÙÙ‚Ø·</option>
                    <option value="yes">Ù†Ø¹Ù…ØŒ Ù…Ø§Ø±Ø¬Ù† Ø£Ùˆ Ù‚Ø±Ø¶</option>
                </select>
            </div>
            <!-- âœ… Ø¥ØµÙ„Ø§Ø­: Ø­Ù‚Ù„ Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø®ØµÙ… Ø«Ø§Ø¨Øª -->
            <div class="input-group" id="leverageRatioGroup" style="display:none;">
                <label>Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ÙØ¹Ø© Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø© (%)</label>
                <input type="number" id="leverageRatio" placeholder="Ù…Ø«Ø§Ù„: 20" min="0" max="300" step="1">
                <p class="field-hint">10% Ù…Ø§Ø±Ø¬Ù† â‰  100% Ù…Ø§Ø±Ø¬Ù† â€” ÙƒÙ„ Ù†Ø³Ø¨Ø© Ù„Ù‡Ø§ Ø®ØµÙ… Ù…Ø®ØªÙ„Ù</p>
            </div>
        </div>
        <div class="leverage-warning" id="leverageWarning">
            âš ï¸ Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ØªÙØ¶Ø§Ø¹Ù Ø§Ù„Ø®Ø³Ø§Ø¦Ø± ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù‡Ø§Ø¨Ø·. Ø§Ù„Ø®ØµÙ… ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ù†Ø³Ø¨Ø© Ø§Ù„Ø±Ø§ÙØ¹Ø©.
        </div>
    </div>

    <!-- ===== Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ===== -->
    <div class="results-section">
        <h3>ğŸ“Š Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill">
                    <span class="progress-text" id="progressText">0%</span>
                </div>
            </div>
            <div class="score-info">
                <div class="score-display"      id="safetyScore">0/10</div>
                <div class="percentage-display" id="percentageDisplay">0%</div>
            </div>
        </div>
        <div class="evaluation-text" id="evaluationText">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
        <div class="evaluation-text" id="smartFeedback"  style="display:none;border-right:4px solid #3b82f6;"></div>
        <div class="score-breakdown"  id="scoreBreakdown">
            <h4>ğŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</h4>
            <div id="breakdownItems"></div>
        </div>
    </div>

    <button class="reset-btn" onclick="resetCalculator()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
</div>

<script>
// ===== Legal Modal =====
document.getElementById('acceptCheckbox').addEventListener('change', function () {
    document.getElementById('enterBtn').disabled = !this.checked;
});
document.getElementById('enterBtn').addEventListener('click', function () {
    if (!this.disabled) document.getElementById('legalModal').style.display = 'none';
});

// ===== Leverage Toggle =====
document.getElementById('usesLeverage').addEventListener('change', function () {
    const isYes = this.value === 'yes';
    document.getElementById('leverageWarning').style.display      = isYes ? 'block' : 'none';
    document.getElementById('leverageRatioGroup').style.display   = isYes ? 'block' : 'none';
    if (!isYes) document.getElementById('leverageRatio').value = '';
});

// ===== Sector Conflict Check =====
function checkSectorConflict() {
    const sec   = document.getElementById('sectorDiversification').value;
    const lsecp = parseFloat(document.getElementById('largestSectorPercentage').value) || 0;
    const highDiversification = sec === '8-plus-sectors' || sec === '5-7-sectors';
    const conflict = highDiversification && lsecp > 50;
    document.getElementById('sectorConflict').style.display = conflict ? 'block' : 'none';
}

// ===== ETF Notice =====
function checkEtfNotice() {
    const ec = parseInt(document.getElementById('etfCount').value) || 0;
    const is = parseInt(document.getElementById('individualStocks').value) || 0;
    document.getElementById('etfNotice').style.display = (ec > 0 && is === 0) ? 'block' : 'none';
}

// ===== Core Scoring =====
function calculateSafetyRating() {
    let score    = 0;
    let breakdown = [];

    const is    = parseInt(document.getElementById('individualStocks').value)      || 0;
    const rc    = parseInt(document.getElementById('reitCount').value)             || 0;
    const ec    = parseInt(document.getElementById('etfCount').value)              || 0;
    const bc    = parseInt(document.getElementById('bondCount').value)             || 0;
    const lsp   = parseFloat(document.getElementById('largestStockPercentage').value) || 0;
    const lsecp = parseFloat(document.getElementById('largestSectorPercentage').value) || 0;
    const geo   = document.getElementById('geographicDistribution').value;
    const gold  = document.getElementById('goldPercentage').value;
    const cash  = document.getElementById('hasCash').value;
    const sec   = document.getElementById('sectorDiversification').value;
    const hor   = document.getElementById('investmentHorizon').value;
    const lev   = document.getElementById('usesLeverage').value;
    const levRatio = parseFloat(document.getElementById('leverageRatio').value) || 0;

    // ================================================================
    // 1. Ø§Ù„ØªÙ†ÙˆÙŠØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ (2.5 Ù†Ù‚Ø·Ø©) â€” âœ… Ø¥ØµÙ„Ø§Ø­: ETF ØªÙØ­ØªØ³Ø¨ Ø¨Ø´ÙƒÙ„ Ø¹Ø§Ø¯Ù„
    //    ÙƒÙ„ ETF ÙŠØ¹Ø§Ø¯Ù„ ~30 ÙˆØ­Ø¯Ø© ØªÙ†ÙˆÙŠØ¹ØŒ ÙƒÙ„ REIT ~5ØŒ Ø³Ù†Ø¯ ~3
    // ================================================================
    const effectiveUnits = is + (ec * 30) + (rc * 5) + (bc * 3);

    let ds;
    if      (effectiveUnits === 0)   ds = 0;
    else if (effectiveUnits >= 60)   ds = 2.5;   // ØªÙ†ÙˆÙŠØ¹ ÙˆØ§Ø³Ø¹ Ø¬Ø¯Ø§Ù‹
    else if (effectiveUnits >= 30)   ds = 2.0;   // ØªÙ†ÙˆÙŠØ¹ Ø¬ÙŠØ¯
    else if (effectiveUnits >= 15)   ds = 1.5;   // ØªÙ†ÙˆÙŠØ¹ Ù…Ø¹Ù‚ÙˆÙ„
    else if (effectiveUnits >= 5)    ds = 1.0;   // ØªÙ†ÙˆÙŠØ¹ Ù…Ø­Ø¯ÙˆØ¯
    else                             ds = 0.5;   // ØªØ±ÙƒÙŠØ² Ø¹Ø§Ù„Ù

    score += ds;
    breakdown.push({ label: `Ø§Ù„ØªÙ†ÙˆÙŠØ¹ Ø§Ù„ÙØ¹Ù„ÙŠ (${effectiveUnits} ÙˆØ­Ø¯Ø©)`, value: ds, max: 2.5 });

    // ================================================================
    // 2. ØªÙ†ÙˆÙŠØ¹ ÙØ¦Ø§Øª Ø§Ù„Ø£ØµÙˆÙ„ (1 Ù†Ù‚Ø·Ø©) â€” âœ… Ù…Ø¯Ø±ÙÙ‘Ø¬ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø«Ù†Ø§Ø¦ÙŠ
    // ================================================================
    const assetClasses = (is > 0 ? 1 : 0) + (ec > 0 ? 1 : 0) + (rc > 0 ? 1 : 0) + (bc > 0 ? 1 : 0);
    const asScore = assetClasses >= 3 ? 1.0 : assetClasses === 2 ? 0.6 : assetClasses === 1 ? 0.3 : 0;
    score += asScore;
    breakdown.push({ label: `ÙØ¦Ø§Øª Ø§Ù„Ø£ØµÙˆÙ„ (${assetClasses} ÙØ¦Ø©)`, value: asScore, max: 1 });

    // ================================================================
    // 3. Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (1.5 Ù†Ù‚Ø·Ø©)
    // ================================================================
    const geoMap = { diversified: 1.5, international: 1.0, regional: 0.75, 'local-only': 0.4 };
    const gs = geoMap[geo] || 0;
    score += gs;
    breakdown.push({ label: 'Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ', value: gs, max: 1.5 });

    // ================================================================
    // 4. Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ÙƒØ§Ø´ (0.5 Ù†Ù‚Ø·Ø©)
    // ================================================================
    const cs = cash === 'yes' ? 0.5 : 0;
    score += cs;
    breakdown.push({ label: 'Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ÙƒØ§Ø´', value: cs, max: 0.5 });

    // ================================================================
    // 5. Ø§Ù„Ø°Ù‡Ø¨ (1 Ù†Ù‚Ø·Ø©)
    // ================================================================
    const goldMap = { high: 1.0, medium: 0.75, low: 0.4, none: 0 };
    const gls = goldMap[gold] || 0;
    score += gls;
    breakdown.push({ label: 'Ø§Ù„Ø°Ù‡Ø¨ ÙƒØ£ØµÙ„ ØªØ­ÙˆØ·', value: gls, max: 1 });

    // ================================================================
    // 6. Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹ÙŠ (1.5 Ù†Ù‚Ø·Ø©)
    // ================================================================
    const secMap = { 'single-sector': 0, '2-4-sectors': 0.6, '5-7-sectors': 1.1, '8-plus-sectors': 1.5 };
    const scs = secMap[sec] || 0;
    score += scs;
    breakdown.push({ label: 'Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹ÙŠ', value: scs, max: 1.5 });

    // ================================================================
    // 7. Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (1 Ù†Ù‚Ø·Ø©)
    // ================================================================
    const horMap = { long: 1.0, medium: 0.65, short: 0.3 };
    const hs = horMap[hor] || 0;
    score += hs;
    breakdown.push({ label: 'Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±', value: hs, max: 1 });

    // ================================================================
    // 8. ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙƒØ¨Ø± (1 Ù†Ù‚Ø·Ø©)
    // ================================================================
    let stockConc;
    if      (lsp === 0)   stockConc = 0;       // Ù„Ù… ÙŠÙØ¯Ø®ÙÙ„
    else if (lsp < 10)    stockConc = 1.0;
    else if (lsp <= 15)   stockConc = 0.7;
    else if (lsp <= 25)   stockConc = 0.3;
    else                  stockConc = 0;
    score += stockConc;
    breakdown.push({ label: 'ØªØ±ÙƒÙŠØ² Ø§Ù„Ø³Ù‡Ù… Ø§Ù„Ø£ÙƒØ¨Ø±', value: stockConc, max: 1 });

    // ================================================================
    // 9. ØªØ±ÙƒÙŠØ² Ø§Ù„Ù‚Ø·Ø§Ø¹ (1 Ù†Ù‚Ø·Ø©)
    // ================================================================
    let sconc;
    if      (lsecp === 0)  sconc = 0;
    else if (lsecp < 20)   sconc = 1.0;
    else if (lsecp <= 30)  sconc = 0.6;
    else if (lsecp <= 45)  sconc = 0.3;
    else                   sconc = 0;
    score += sconc;
    breakdown.push({ label: 'ØªØ±ÙƒÙŠØ² Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø£ÙƒØ¨Ø±', value: sconc, max: 1 });

    // ================================================================
    // Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª
    // ================================================================

    // ØªØ±ÙƒÙŠØ² Ø³Ù‡Ù… Ù…Ø±ØªÙØ¹ Ø¬Ø¯Ø§Ù‹ â€” âœ… Ù…Ø¯Ø±ÙÙ‘Ø¬ Ø£ÙƒØ«Ø± Ø¯Ù‚Ø©
    if (lsp > 40) {
        const p = 2.5;
        score = Math.max(0, score - p);
        breakdown.push({ label: `â›” Ø®ØµÙ…: Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ > 40% (Ø®Ø·Ø± Ø­Ø§Ø¯)`, value: -p, isPenalty: true });
    } else if (lsp > 25) {
        const p = 1.5;
        score = Math.max(0, score - p);
        breakdown.push({ label: `Ø®ØµÙ…: Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ Ø¨ÙŠÙ† 25-40%`, value: -p, isPenalty: true });
    } else if (lsp > 15) {
        const p = 0.75;
        score = Math.max(0, score - p);
        breakdown.push({ label: `Ø®ØµÙ…: Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ Ø¨ÙŠÙ† 15-25%`, value: -p, isPenalty: true });
    }

    // âœ… Ø¥ØµÙ„Ø§Ø­: ØªØ±ÙƒÙŠØ² Ù‚Ø·Ø§Ø¹ Ù…Ø±ØªÙØ¹ ÙŠØ³ØªØ­Ù‚ Ø¹Ù‚ÙˆØ¨Ø© Ù„Ø§ Ù…Ø¬Ø±Ø¯ ØºÙŠØ§Ø¨ Ù†Ù‚Ø·Ø©
    if (lsecp > 70) {
        const p = 2.0;
        score = Math.max(0, score - p);
        breakdown.push({ label: `â›” Ø®ØµÙ…: Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯ > 70% (Ø®Ø·Ø± Ø­Ø§Ø¯)`, value: -p, isPenalty: true });
    } else if (lsecp > 50) {
        const p = 1.0;
        score = Math.max(0, score - p);
        breakdown.push({ label: `Ø®ØµÙ…: Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯ Ø¨ÙŠÙ† 50-70%`, value: -p, isPenalty: true });
    }

    // âœ… Ø¥ØµÙ„Ø§Ø­: cross-check ØªÙ†Ø§Ù‚Ø¶ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª
    const highDiv = sec === '8-plus-sectors' || sec === '5-7-sectors';
    if (highDiv && lsecp > 50) {
        const p = 0.75;
        score = Math.max(0, score - p);
        breakdown.push({ label: `Ø®ØµÙ…: ØªÙ†Ø§Ù‚Ø¶ (ØªÙ†ÙˆÙŠØ¹ Ø¹Ø§Ù„Ù + Ù‚Ø·Ø§Ø¹ Ù…Ù‡ÙŠÙ…Ù†)`, value: -p, isPenalty: true });
    }

    // âœ… Ø¥ØµÙ„Ø§Ø­: Ø§Ù„Ø±Ø§ÙØ¹Ø© Ù…Ø¯Ø±ÙÙ‘Ø¬Ø© Ø¨Ø­Ø³Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø§ Ø«Ø§Ø¨ØªØ©
    if (lev === 'yes') {
        let levPen;
        if      (levRatio > 100) levPen = 3.5;
        else if (levRatio > 50)  levPen = 2.5;
        else if (levRatio > 20)  levPen = 1.5;
        else if (levRatio > 0)   levPen = 0.75;
        else                     levPen = 1.0;  // Ø£Ø¯Ø®Ù„ "Ù†Ø¹Ù…" Ù„ÙƒÙ† Ù„Ù… ÙŠØ­Ø¯Ø¯ Ø§Ù„Ù†Ø³Ø¨Ø©

        score = Math.max(0, score - levPen);
        breakdown.push({
            label: `â›” Ø®ØµÙ…: Ø±Ø§ÙØ¹Ø© Ù…Ø§Ù„ÙŠØ© ${levRatio > 0 ? levRatio + '%' : '(ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©)'}`,
            value: -levPen,
            isPenalty: true
        });
    }

    return { score: Math.min(parseFloat(score.toFixed(1)), 10), breakdown };
}

// ===== Evaluation Text =====
function getEvaluation(score) {
    let ev;
    if      (score >= 8.5) ev = 'ğŸŸ¢ Ù…Ø­ÙØ¸Ø© Ù†Ù…ÙˆØ°Ø¬ÙŠØ© ÙˆÙ…ØªØ²Ù†Ø© Ø¬Ø¯Ø§Ù‹ â€” Ù…Ø³ØªÙˆÙ‰ Ø£Ù…Ø§Ù† Ø¹Ø§Ù„Ù';
    else if (score >= 7.0) ev = 'ğŸŸ¢ Ù…Ø­ÙØ¸Ø© Ø¬ÙŠØ¯Ø© â€” ÙŠÙ…ÙƒÙ† ØªØ¹Ø²ÙŠØ² Ø¨Ø¹Ø¶ Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„ØªÙ†ÙˆÙŠØ¹';
    else if (score >= 5.5) ev = 'ğŸŸ¡ Ù…Ø­ÙØ¸Ø© Ù…ØªÙˆØ³Ø·Ø© â€” ØªØ­ØªØ§Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‡ÙŠÙƒÙ„ÙŠØ©';
    else if (score >= 3.5) ev = 'ğŸŸ  Ù…Ø­ÙØ¸Ø© Ù…Ø±ÙƒØ²Ø© â€” Ù…Ø®Ø§Ø·Ø± ÙÙˆÙ‚ Ø§Ù„Ù…ØªÙˆØ³Ø·';
    else                   ev = 'ğŸ”´ Ù…Ø­ÙØ¸Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø®Ø§Ø·Ø± â€” Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¹Ø§Ø¬Ù„Ø© Ù…Ø·Ù„ÙˆØ¨Ø©';

    const lsp   = parseFloat(document.getElementById('largestStockPercentage').value) || 0;
    const lsecp = parseFloat(document.getElementById('largestSectorPercentage').value) || 0;
    const gold  = document.getElementById('goldPercentage').value;
    const cash  = document.getElementById('hasCash').value;
    const sec   = document.getElementById('sectorDiversification').value;
    const lev   = document.getElementById('usesLeverage').value;
    const hor   = document.getElementById('investmentHorizon').value;
    const geo   = document.getElementById('geographicDistribution').value;
    const is    = parseInt(document.getElementById('individualStocks').value) || 0;
    const ec    = parseInt(document.getElementById('etfCount').value) || 0;

    let fb = [];
    if (lev === 'yes')          fb.push('â€¢ â›” <strong>Ø®Ø·Ø± Ø­Ø§Ø¯:</strong> Ø§Ù„Ø±Ø§ÙØ¹Ø© ØªÙØ¶Ø§Ø¹Ù Ø§Ù„Ø®Ø³Ø§Ø¦Ø± â€” Ù‚Ù„Ù‘ØµÙ‡Ø§ Ø£Ùˆ Ø£Ø²Ù„Ù‡Ø§');
    if (lsecp > 50)             fb.push('â€¢ â›” ØªØ±ÙƒÙŠØ² Ù‚Ø·Ø§Ø¹ÙŠ Ø®Ø·ÙŠØ± â€” Ù„Ø§ ØªØ¶Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† 30% ÙÙŠ Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯');
    if (lsp > 25)               fb.push('â€¢ âš ï¸ Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ ÙŠÙÙ‡ÙŠÙ…Ù† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ÙØ¸Ø© â€” Ø®ÙÙ‘Ø¶Ù‡ ØªØ­Øª 10-15%');
    if (gold === 'none')        fb.push('â€¢ Ø£Ø¶Ù Ø°Ù‡Ø¨Ø§Ù‹ (5-10%) ÙƒØ£ØµÙ„ ØªØ­ÙˆØ· ÙÙŠ Ø§Ù„Ø£Ø²Ù…Ø§Øª ÙˆØ£ÙˆÙ‚Ø§Øª Ø§Ù„ØªØ¶Ø®Ù…');
    if (cash === 'no')          fb.push('â€¢ Ø§Ø­ØªÙØ¸ Ø¨Ù€ 5-10% ÙƒØ§Ø´ â€” Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆÙ„Ù„ÙØ±Øµ Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©');
    if (sec === 'single-sector')fb.push('â€¢ âš ï¸ Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯ = Ø±Ù‡Ø§Ù† Ø¹Ù„Ù‰ Ø¹Ø§Ù…Ù„ Ø®Ø§Ø±Ø¬ÙŠ ÙˆØ§Ø­Ø¯ â€” ÙˆØ³Ù‘Ø¹ Ù†Ø·Ø§Ù‚Ùƒ');
    if (hor === 'short')        fb.push('â€¢ Ø£ÙÙ‚ Ù‚ØµÙŠØ±: Ø§Ø±ÙØ¹ Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ§Ø´ ÙˆØ§Ù„Ø³Ù†Ø¯Ø§ØªØŒ Ù‚Ù„Ù‘Ù„ Ø§Ù„ØªØ¹Ø±Ø¶ Ù„Ù„Ø£Ø³Ù‡Ù…');
    if (geo === 'local-only')   fb.push('â€¢ ØªØ¹Ø±Ø¶Ùƒ ÙƒÙ„Ù‡ Ù„Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø­Ù„ÙŠ â€” Ø£Ø¶Ù ETF Ø¯ÙˆÙ„ÙŠ Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©');
    if (is > 0 && ec === 0)     fb.push('â€¢ ÙÙƒÙ‘Ø± ÙÙŠ Ø¥Ø¶Ø§ÙØ© ETF ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„ØªØ®ÙÙŠÙ Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„ÙØ±Ø¯ÙŠØ©');

    return { evaluation: ev, feedback: fb.length ? fb.join('<br>') : null };
}

// ===== Update UI =====
function updateResults() {
    checkEtfNotice();
    checkSectorConflict();

    const { score, breakdown } = calculateSafetyRating();
    const { evaluation, feedback } = getEvaluation(score);
    const pct = (score / 10) * 100;

    document.getElementById('safetyScore').textContent = score.toFixed(1) + '/10';
    document.getElementById('evaluationText').textContent = evaluation;

    const pFill = document.getElementById('progressFill');
    const pText = document.getElementById('progressText');
    const pDisp = document.getElementById('percentageDisplay');
    const pCont = document.getElementById('progressContainer');

    pFill.style.width = pct + '%';
    pText.textContent = Math.round(pct) + '%';
    pDisp.textContent = Math.round(pct) + '%';

    let fillGrad, bgColor, textColor;
    if      (score >= 8.5) { fillGrad = 'linear-gradient(90deg,#22c55e,#16a34a)'; bgColor = '#064e3b'; textColor = '#4ade80'; }
    else if (score >= 7.0) { fillGrad = 'linear-gradient(90deg,#84cc16,#65a30d)'; bgColor = '#1a2e05'; textColor = '#bef264'; }
    else if (score >= 5.5) { fillGrad = 'linear-gradient(90deg,#eab308,#ca8a04)'; bgColor = '#422006'; textColor = '#fde047'; }
    else if (score >= 3.5) { fillGrad = 'linear-gradient(90deg,#f97316,#ea580c)'; bgColor = '#431407'; textColor = '#fb923c'; }
    else                   { fillGrad = 'linear-gradient(90deg,#ef4444,#dc2626)'; bgColor = '#450a0a'; textColor = '#f87171'; }

    pFill.style.background = fillGrad;
    pCont.style.background = bgColor;
    pDisp.style.background = textColor;
    pDisp.style.color      = '#0f172a';

    // Feedback
    const fbEl = document.getElementById('smartFeedback');
    if (feedback) {
        fbEl.innerHTML = '<strong>ğŸ’¡ ØªÙˆØµÙŠØ§Øª Ù…Ø®ØµØµØ©:</strong><br>' + feedback;
        fbEl.style.display = 'block';
    } else {
        fbEl.style.display = 'none';
    }

    // Breakdown
    const biEl = document.getElementById('breakdownItems');
    biEl.innerHTML = breakdown.map(i => `
        <div class="breakdown-item">
            <span>${i.label}</span>
            <span class="breakdown-value ${i.isPenalty ? 'negative' : i.value > 0 ? 'positive' : 'neutral'}">
                ${!i.isPenalty && i.value > 0 ? '+' : ''}${i.value.toFixed(2)}${i.max ? ' / ' + i.max : ''}
            </span>
        </div>
    `).join('');
    document.getElementById('scoreBreakdown').style.display = 'block';
}

// ===== Reset =====
function resetCalculator() {
    ['individualStocks','reitCount','etfCount','bondCount',
     'largestStockPercentage','largestSectorPercentage','leverageRatio']
        .forEach(id => document.getElementById(id).value = '');
    ['geographicDistribution','goldPercentage','hasCash',
     'sectorDiversification','investmentHorizon','usesLeverage']
        .forEach(id => document.getElementById(id).value = '');

    document.getElementById('smartFeedback').style.display     = 'none';
    document.getElementById('scoreBreakdown').style.display    = 'none';
    document.getElementById('leverageWarning').style.display   = 'none';
    document.getElementById('leverageRatioGroup').style.display= 'none';
    document.getElementById('sectorConflict').style.display    = 'none';
    document.getElementById('etfNotice').style.display         = 'none';
    document.getElementById('safetyScore').textContent         = '0/10';
    document.getElementById('evaluationText').textContent      = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…';
    document.getElementById('progressFill').style.width        = '0%';
    document.getElementById('progressText').textContent        = '0%';
    document.getElementById('percentageDisplay').textContent   = '0%';
}

// ===== Event Listeners =====
document.querySelectorAll('input[type="number"], select').forEach(el => {
    el.addEventListener('input',  updateResults);
    el.addEventListener('change', updateResults);
});
</script>
<script data-goatcounter="https://investornote.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
