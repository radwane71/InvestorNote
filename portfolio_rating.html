<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ‚ÙŠÙŠÙ… Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© | Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</title>
    <link rel="stylesheet" href="navigation.css">
    <link rel="stylesheet" href="dark-theme.css">
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¯Ø§ÙƒÙ† */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #0f172a; 
            color: #f8fafc; 
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: #1e293b; 
            border-radius: 20px; 
            padding: 40px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); 
            border: 1px solid #334155;
        }
        h1 { text-align: center; color: #fbbf24; margin-bottom: 40px; font-size: 2.5rem; }
        
        .rule-item { 
            background: #334155; 
            border-radius: 15px; 
            padding: 25px; 
            margin: 20px 0; 
            border-right: 4px solid #fbbf24; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }
        .rule-item.warning-item { border-right: 4px solid #ef4444; background: #450a0a; }
        .rule-item h3 { color: #fbbf24; margin-bottom: 20px; font-size: 1.3rem; }
        .rule-item.warning-item h3 { color: #f87171; }
        
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; color: #e2e8f0; font-weight: bold; margin-bottom: 8px; }
        .input-group input, .input-group select { 
            width: 100%; 
            padding: 12px; 
            border: 2px solid #475569; 
            border-radius: 8px; 
            font-size: 1rem; 
            background: #1e293b; 
            color: white; 
            transition: border-color 0.3s; 
        }
        .input-group input:focus, .input-group select:focus { outline: none; border-color: #fbbf24; }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ø°ÙŠØ± Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ù…Ù„ÙƒÙŠØ© */
        .leverage-warning { 
            display: none; 
            background: linear-gradient(135deg, #451a03 0%, #92400e 100%); 
            border: 1px solid #fbbf24; 
            border-radius: 8px; 
            padding: 15px; 
            margin-top: 10px; 
            color: #fef3c7; 
            font-weight: bold; 
            line-height: 1.6; 
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.2);
        }

        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¯Ø±Ø¬ Ø§Ù„ØºØ§Ù…Ù‚ */
        .results-section { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); 
            color: white; 
            border-radius: 15px; 
            padding: 30px; 
            margin: 30px 0; 
            text-align: center; 
            border: 1px solid #334155;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .progress-container { 
            background: #0f172a; 
            border-radius: 10px; 
            padding: 20px; 
            margin: 20px 0; 
            text-align: center; 
            border: 1px solid #334155;
        }
        .progress-bar { height: 30px; background: #334155; border-radius: 10px; overflow: hidden; position: relative; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #ef4444, #991b1b); border-radius: 10px; width: 0%; transition: width 0.5s cubic-bezier(0.4,0,0.2,1); position: relative; }
        .progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); color: white; font-weight: bold; font-size: 1.1rem; z-index: 10; }
        
        .score-info { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; gap: 20px; }
        .score-display { font-size: 3rem; font-weight: bold; color: #fbbf24; }
        .percentage-display { font-size: 2rem; font-weight: bold; padding: 10px 20px; border-radius: 10px; min-width: 120px; }
        
        .evaluation-text { 
            font-size: 1.1rem; 
            margin: 15px 0; 
            line-height: 1.6; 
            color: #f1f5f9; 
            background: rgba(255,255,255,0.05); 
            padding: 15px; 
            border-radius: 10px; 
            border-right: 4px solid #fbbf24; 
            text-align: right; 
        }

        .score-breakdown { background: #0f172a; border-radius: 10px; padding: 20px; margin-top: 15px; text-align: right; display: none; border: 1px solid #334155; }
        .score-breakdown h4 { color: #fbbf24; margin-bottom: 12px; border-bottom: 2px solid #334155; padding-bottom: 8px; }
        .breakdown-item { display: flex; justify-content: space-between; align-items: center; padding: 7px 0; border-bottom: 1px solid #1e293b; font-size: 0.9rem; color: #cbd5e1; }
        .breakdown-item:last-child { border-bottom: none; }
        .breakdown-value.positive { color: #4ade80; }
        .breakdown-value.negative { color: #f87171; }

        .reset-btn { background: #ef4444; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1rem; margin: 20px auto; display: block; transition: background 0.3s; }
        
        .legal-banner { background: #451a03; border: 2px solid #fbbf24; border-radius: 8px; padding: 12px 16px; margin-bottom: 20px; color: #fbbf24; font-weight: bold; font-size: 0.9rem; line-height: 1.6; }

        /* Ø§Ù„Ø¨ÙˆØ¨ Ø£Ø¨ Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø§Ù„Ù…Ù„ÙƒÙŠ */
        .legal-modal { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); display:flex; justify-content:center; align-items:center; z-index:99999; }
        .modal-content { 
            background: #1e293b; 
            border: 2px solid #fbbf24; 
            border-radius: 15px; 
            padding: 30px; 
            max-width: 500px; 
            width: 90%; 
            max-height: 80vh; 
            overflow-y:auto; 
            text-align:center; 
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.3);
        }
        .modal-content h2 { color:#fbbf24; margin-bottom:20px; }
        .modal-content p { color:#e2e8f0; line-height:1.6; margin-bottom:15px; }
        .modal-btn { background:#fbbf24; color:#0f172a; border:none; padding:12px 24px; border-radius:8px; cursor:pointer; font-size:1rem; font-weight: bold; }
        .modal-btn:disabled { background:#475569; color:#94a3b8; cursor:not-allowed; }

        @media (max-width:768px) { .container { padding:20px; } h1 { font-size:2rem; } }
    </style>
</head>
<body>

<div class="legal-modal" id="legalModal">
    <div class="modal-content">
        <h2>Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ù‚Ø§Ù†ÙˆÙ†ÙŠ</h2>
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆØ¥Ø±Ø´Ø§Ø¯ÙŠØ© ÙÙ‚Ø·ØŒ ÙˆÙ„Ø§ ØªØ¹Ø¯ ØªÙˆØµÙŠØ© Ø¨Ø§Ù„Ø¨ÙŠØ¹ Ø£Ùˆ Ø§Ù„Ø´Ø±Ø§Ø¡ Ø£Ùˆ Ø¯Ø¹ÙˆØ© Ù„Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙÙŠ Ø£ÙŠ Ø£ÙˆØ±Ø§Ù‚ Ù…Ø§Ù„ÙŠØ©.</p>
        <p>Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ†Ø·ÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ø¹Ø§Ù„ÙŠØ©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ­Ø¯Ù‡.</p>
        <div class="modal-checkbox"><label style="color: #fbbf24;"><input type="checkbox" id="acceptCheckbox"> Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ·</label></div>
        <button class="modal-btn" id="enterBtn" disabled>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
    </div>
</div>

<nav class="navbar">
    <div class="navbar-container">
        <a href="index.html" class="navbar-brand">ğŸ“ˆ Ù…ÙÙƒØ±Ø© Ù…Ø³ØªØ«Ù…Ø±</a>
        <button class="navbar-toggle" onclick="toggleNavbar()">â˜°</button>
        <div class="navbar-menu" id="navbarMenu">
            <a href="index.html" class="navbar-item">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="advice.html" class="navbar-item calculator">ğŸ’° ØµØ§ÙÙŠ Ø§Ù„Ø«Ø±ÙˆØ©</a>
            <a href="salary_calculator.html" class="navbar-item salary">ğŸ’¼ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ø§ØªØ¨</a>
            <a href="zakat_purification.html" class="navbar-item zakat">ğŸ•Œ Ø§Ù„Ø²ÙƒØ§Ø©</a>
            <a href="financial_freedom.html" class="navbar-item fire">ğŸ”¥ Ø§Ù„Ø­Ø±ÙŠØ© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</a>
            <a href="investor_tips.html" class="navbar-item tips">âš ï¸ Ù†ØµØ§Ø¦Ø­</a>
            <a href="snowball_calculator.html" class="navbar-item calculator">â„ï¸ Ø§Ù„Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø±ÙƒØ¨</a>
            <a href="emergency_fund_calculator.html" class="navbar-item emergency">ğŸ›¡ï¸ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</a>
            <a href="average_calculator.html" class="navbar-item average">ğŸ“Š Ù…ØªÙˆØ³Ø· Ø§Ù„Ø´Ø±Ø§Ø¡</a>
            <a href="company_valuation.html" class="navbar-item company">ğŸ¢ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø´Ø±ÙƒØ©</a>
            <a href="retirement_calculator.html" class="navbar-item retirement">ğŸ–ï¸ Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</a>
            <a href="portfolio_rating.html" class="navbar-item portfolio active">ğŸ›¡ï¸ Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
            <a href="stock_valuation.html" class="navbar-item calculator">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù‡Ù…</a>
            <a href="dca_calculator.html" class="navbar-item calculator">ğŸ“… DCA</a>
            <a href="sell_decision.html" class="navbar-item calculator">ğŸ¤” Ù‡Ù„ Ø£Ø¨ÙŠØ¹ØŸ</a>
            <a href="goal_calculator.html" class="navbar-item calculator">ğŸ¯ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹ÙƒØ³ÙŠ</a>
            <a href="allocation_calculator.html" class="navbar-item allocation">âš–ï¸ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­ÙØ¸Ø©</a>
        </div>
    </div>
</nav>

<div class="legal-banner">âš ï¸ Ø¥Ù‚Ø±Ø§Ø± Ù‚Ø§Ù†ÙˆÙ†ÙŠ: Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø·. Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ø§ ØªÙÙ…Ø«Ù‘Ù„ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø§Ù„ÙŠØ©. Ù‚Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± ÙŠÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¹Ø§ØªÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ­Ø¯Ù‡.</div>

<div class="container">
    <h1>ğŸ›¡ï¸ Ù‚ÙŠÙ‘Ù… Ø£Ù…Ø§Ù† Ù…Ø­ÙØ¸ØªÙƒ</h1>

    <div class="rule-item">
        <h3>ØªØ±ÙƒÙŠØ² Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
        <div class="input-group"><label for="largestStockPercentage">Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ø³Ù‡Ù… ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø© (%)</label><input type="number" id="largestStockPercentage" placeholder="Ù…Ø«Ø§Ù„: 15" min="0" max="100" step="0.1"></div>
    </div>

    <div class="rule-item">
        <h3>Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©</h3>
        <div class="input-group"><label for="individualStocks">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… Ø§Ù„Ù…Ù†ÙØ±Ø¯Ø©</label><input type="number" id="individualStocks" placeholder="Ù…Ø«Ø§Ù„: 15" min="0" max="50"></div>
        <div class="input-group"><label for="reitCount">Ø¹Ø¯Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ø±ÙŠØª (REITs)</label><input type="number" id="reitCount" placeholder="Ù…Ø«Ø§Ù„: 3" min="0" max="20"></div>
        <div class="input-group"><label for="etfCount">Ø¹Ø¯Ø¯ ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª (ETFs)</label><input type="number" id="etfCount" placeholder="Ù…Ø«Ø§Ù„: 5" min="0" max="20"></div>
        <div class="input-group"><label for="bondCount">Ø¹Ø¯Ø¯ Ø§Ù„ØµÙƒÙˆÙƒ Ø£Ùˆ Ø§Ù„Ø³Ù†Ø¯Ø§Øª</label><input type="number" id="bondCount" placeholder="Ù…Ø«Ø§Ù„: 2" min="0" max="20"></div>
    </div>

    <div class="rule-item">
        <h3>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</h3>
        <div class="input-group"><label for="geographicDistribution">Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ØºØ§Ù„Ø¨</label><select id="geographicDistribution"><option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙˆØ²ÙŠØ¹</option><option value="local-only">Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·</option><option value="regional">Ø¥Ù‚Ù„ÙŠÙ…ÙŠØ©</option><option value="international">Ø¯ÙˆÙ„ÙŠØ©</option><option value="diversified">Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ø­Ù„ÙŠ+Ø¯ÙˆÙ„ÙŠ</option></select></div>
    </div>

    <div class="rule-item">
        <h3>Ø£ØµÙˆÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ©</h3>
        <div class="input-group"><label for="goldPercentage">Ù†Ø³Ø¨Ø© Ø§Ù„Ø°Ù‡Ø¨</label><select id="goldPercentage"><option value="">Ø§Ø®ØªØ±</option><option value="none">Ù„Ø§ ÙŠÙˆØ¬Ø¯</option><option value="low">Ø£Ù‚Ù„ Ù…Ù† 5%</option><option value="medium">5% - 10%</option><option value="high">Ø£ÙƒØ«Ø± Ù…Ù† 10%</option></select></div>
        <div class="input-group"><label for="hasCash">ÙƒØ§Ø´ Ø§Ø­ØªÙŠØ§Ø·ÙŠ (5-10%)</label><select id="hasCash"><option value="">Ø§Ø®ØªØ±</option><option value="yes">Ù†Ø¹Ù…</option><option value="no">Ù„Ø§</option></select></div>
    </div>

    <div class="rule-item">
        <h3>Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</h3>
        <div class="input-group"><label for="sectorDiversification">Ø¹Ø¯Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</label><select id="sectorDiversification"><option value="">Ø§Ø®ØªØ±</option><option value="single-sector">Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯</option><option value="2-4-sectors">2-4 Ù‚Ø·Ø§Ø¹Ø§Øª</option><option value="5-7-sectors">5-7 Ù‚Ø·Ø§Ø¹Ø§Øª</option><option value="8-plus-sectors">8 Ù‚Ø·Ø§Ø¹Ø§ØªØœ</option></select></div>
        <div class="input-group"><label for="largestSectorPercentage">Ù†Ø³Ø¨Ø© Ø£ÙƒØ¨Ø± Ù‚Ø·Ø§Ø¹ (%)</label><input type="number" id="largestSectorPercentage" placeholder="Ù…Ø«Ø§Ù„: 30" min="0" max="100" step="0.1"></div>
    </div>

    <div class="rule-item">
        <h3>Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</h3>
        <div class="input-group"><label for="investmentHorizon">Ù…ØªÙ‰ ØªØªÙˆÙ‚Ø¹ Ø³Ø­Ø¨ Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§ØªÙƒØŸ</label><select id="investmentHorizon"><option value="">Ø§Ø®ØªØ± Ø§Ù„Ø£ÙÙ‚ Ø§Ù„Ø²Ù…Ù†ÙŠ</option><option value="short">Ø£Ù‚Ù„ Ù…Ù† 3 Ø³Ù†ÙˆØ§Øª</option><option value="medium">3 - 10 Ø³Ù†ÙˆØ§Øª</option><option value="long">Ø£ÙƒØ«Ø± Ù…Ù† 10 Ø³Ù†ÙˆØ§Øª</option></select></div>
    </div>

    <div class="rule-item warning-item">
        <h3>âš ï¸ Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
        <div class="input-group"><label for="usesLeverage">Ù‡Ù„ ØªØ³ØªØ®Ø¯Ù… Ù…Ø§Ø±Ø¬Ù† Ø£Ùˆ Ù‚Ø±Ø¶Ø§Ù‹ØŸ</label><select id="usesLeverage"><option value="">Ø§Ø®ØªØ±</option><option value="no">Ù„Ø§ØŒ Ù…Ø§Ù„ÙŠ Ø§Ù„Ø®Ø§Øµ</option><option value="yes">Ù†Ø¹Ù…ØŒ Ù…Ø§Ø±Ø¬Ù† Ø£Ùˆ Ù‚Ø±Ø¶</option></select></div>
        <div class="leverage-warning" id="leverageWarning">âš ï¸ Ø§Ù„Ø±Ø§ÙØ¹Ø© ØªÙØ¶Ø§Ø¹Ù Ø§Ù„Ù…Ø®Ø§Ø·Ø±. Ø®ØµÙ… 2.5 Ù†Ù‚Ø·Ø© Ù…Ù† Ø§Ù„ØªÙ‚ÙŠÙŠÙ….</div>
    </div>

    <div class="results-section">
        <h3>Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
        <div class="progress-container">
            <div class="progress-bar"><div class="progress-fill" id="progressFill"><span class="progress-text" id="progressText">0%</span></div></div>
            <div class="score-info"><div class="score-display" id="safetyScore">0/10</div><div class="percentage-display" id="percentageDisplay">0%</div></div>
        </div>
        <div class="evaluation-text" id="evaluationText">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
        <div class="evaluation-text" id="smartFeedback" style="display:none;border-right:4px solid #3498db;"></div>
        <div class="score-breakdown" id="scoreBreakdown"><h4>ğŸ“Š ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø·</h4><div id="breakdownItems"></div></div>
    </div>
    <button class="reset-btn" onclick="resetCalculator()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
</div>

<script>
// Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
document.getElementById('acceptCheckbox').addEventListener('change',function(){document.getElementById('enterBtn').disabled=!this.checked;});
document.getElementById('enterBtn').addEventListener('click',function(){document.getElementById('legalModal').style.display='none';});
document.getElementById('usesLeverage').addEventListener('change',function(){document.getElementById('leverageWarning').style.display=this.value==='yes'?'block':'none';});

function calculateSafetyRating(){
    let score=0,breakdown=[];
    const is=parseInt(document.getElementById('individualStocks').value)||0;
    const rc=parseInt(document.getElementById('reitCount').value)||0;
    const ec=parseInt(document.getElementById('etfCount').value)||0;
    const bc=parseInt(document.getElementById('bondCount').value)||0;
    const lsp=parseFloat(document.getElementById('largestStockPercentage').value)||0;
    const lsecp=parseFloat(document.getElementById('largestSectorPercentage').value)||0;
    const geo=document.getElementById('geographicDistribution').value;
    const gold=document.getElementById('goldPercentage').value;
    const cash=document.getElementById('hasCash').value;
    const sec=document.getElementById('sectorDiversification').value;
    const hor=document.getElementById('investmentHorizon').value;
    const lev=document.getElementById('usesLeverage').value;

    // 1. Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù… (2.5 Ù†Ù‚Ø·Ø©)
    let ss=is>=15&&is<=22?2.5:is>=8&&is<=14?1.5:is>=5&&is<=7?1.0:is>0?0.5:0;
    score+=ss;breakdown.push({label:'Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù‡Ù…',value:ss,max:2.5});

    // 2. ØªÙ†ÙˆÙŠØ¹ ÙØ¦Ø§Øª Ø§Ù„Ø£ØµÙˆÙ„ (1 Ù†Ù‚Ø·Ø©)
    const as=(ec+bc+rc)>0?1:0;
    score+=as;breakdown.push({label:'ØªÙ†ÙˆÙŠØ¹ ÙØ¦Ø§Øª Ø§Ù„Ø£ØµÙˆÙ„',value:as,max:1});

    // 3. Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (1.5 Ù†Ù‚Ø·Ø©)
    let gs=geo==='diversified'?1.5:geo==='international'||geo==='regional'?1.0:geo==='local-only'?0.5:0;
    score+=gs;breakdown.push({label:'Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ',value:gs,max:1.5});

    // 4. Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ÙƒØ§Ø´ (0.5 Ù†Ù‚Ø·Ø©)
    const cs=cash==='yes'?0.5:0;
    score+=cs;breakdown.push({label:'Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø§Ù„ÙƒØ§Ø´',value:cs,max:0.5});

    // 5. Ø§Ù„Ø°Ù‡Ø¨ (1 Ù†Ù‚Ø·Ø©)
    let gls=gold==='high'?1.0:gold==='medium'?0.75:gold==='low'?0.5:0;
    score+=gls;breakdown.push({label:'Ø§Ù„Ø°Ù‡Ø¨',value:gls,max:1});

    // 6. Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹ÙŠ (1.5 Ù†Ù‚Ø·Ø©)
    let scs=sec==='8-plus-sectors'?1.5:sec==='5-7-sectors'?1.2:sec==='2-4-sectors'?0.75:0;
    score+=scs;breakdown.push({label:'Ø§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹ÙŠ',value:scs,max:1.5});

    // 7. Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (1 Ù†Ù‚Ø·Ø©)
    let hs=hor==='long'?1.0:hor==='medium'?0.75:hor==='short'?0.5:0;
    score+=hs;breakdown.push({label:'Ø£ÙÙ‚ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±',value:hs,max:1});

    // 8. ØªØ±ÙƒÙŠØ² Ø§Ù„Ù‚Ø·Ø§Ø¹ (1 Ù†Ù‚Ø·Ø©)
    let sconc=lsecp>0?(lsecp<25?1.0:lsecp<=40?0.5:0):0;
    score+=sconc;breakdown.push({label:'ØªØ±ÙƒÙŠØ² Ø£ÙƒØ¨Ø± Ù‚Ø·Ø§Ø¹',value:sconc,max:1});

    // 9. Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª (Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª)
    let pen=lsp>20?2.0:lsp>15?1.0:0;
    if(pen>0){score=Math.max(0,score-pen);breakdown.push({label:'Ø®ØµÙ…: ØªØ±ÙƒÙŠØ² Ø³Ù‡Ù… ÙÙˆÙ‚ 15%',value:-pen,isPenalty:true});}
    if(lev==='yes'){score=Math.max(0,score-2.5);breakdown.push({label:'Ø®ØµÙ…: Ø§Ù„Ø±Ø§ÙØ¹Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©',value:-2.5,isPenalty:true});}

    return {score:Math.min(parseFloat(score.toFixed(1)),10),breakdown};
}

function getEvaluation(score){
    let ev=score>=8?'ğŸŸ¢ Ù…Ø­ÙØ¸Ø© Ù†Ù…ÙˆØ°Ø¬ÙŠØ© ÙˆÙ…ØªØ²Ù†Ø© Ø¬Ø¯Ø§Ù‹':score>=6?'ğŸŸ¡ Ø¬ÙŠØ¯Ø© ÙˆØªØ­ØªØ§Ø¬ ØªØ¹Ø²ÙŠØ² Ø¨Ø¹Ø¶ Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ø£Ù…Ø§Ù†':score>=4?'ğŸŸ  Ù…ØªÙˆØ³Ø·Ø© ÙˆØ¨Ø­Ø§Ø¬Ø© Ø¥Ø¹Ø§Ø¯Ø© Ù‡ÙŠÙƒÙ„Ø©':'ğŸ”´ Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆÙ…Ø±ÙƒØ²Ø©';
    const gold=document.getElementById('goldPercentage').value,cash=document.getElementById('hasCash').value,sec=document.getElementById('sectorDiversification').value,lsp=parseFloat(document.getElementById('largestStockPercentage').value)||0,lev=document.getElementById('usesLeverage').value,hor=document.getElementById('investmentHorizon').value;
    let fb=[];
    if(lev==='yes')fb.push('â€¢ âš ï¸ <strong>Ø®Ø·Ø± Ø­Ø§Ø¯:</strong> Ø§Ù„Ø±Ø§ÙØ¹Ø© ØªÙØ¶Ø§Ø¹Ù Ø§Ù„Ø®Ø³Ø§Ø¦Ø± â€” ÙŠÙÙ†ØµØ­ Ø¨ØªÙ‚Ù„ÙŠØµÙ‡Ø§');
    if(gold==='none')fb.push('â€¢ Ø£Ø¶Ù Ø°Ù‡Ø¨Ø§Ù‹ ÙƒØ£ØµÙ„ ØªØ­ÙˆØ· ÙÙŠ Ø§Ù„Ø£Ø²Ù…Ø§Øª');
    if(cash==='no')fb.push('â€¢ Ø§Ø­ØªÙØ¸ Ø¨Ù€ 5-10% ÙƒØ§Ø´ Ù„Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙØ±Øµ');
    if(lsp>20)fb.push('â€¢ ØªØ±ÙƒÙŠØ² Ø¹Ø§Ù„ ÙÙŠ Ø³Ù‡Ù… ÙˆØ§Ø­Ø¯ â€” Ø®ÙÙ‘Ø¶ Ø¯ÙˆÙ† 15%');
    if(sec==='single-sector')fb.push('â€¢ âš ï¸ Ù…Ø­ÙØ¸Ø© Ù…Ø±ÙƒØ²Ø© ÙÙŠ Ù‚Ø·Ø§Ø¹ ÙˆØ§Ø­Ø¯ â€” Ø®Ø·Ø±Ø©');
    if(hor==='short')fb.push('â€¢ Ø£ÙÙ‚ Ù‚ØµÙŠØ±: Ø§Ø±ÙØ¹ Ù†Ø³Ø¨Ø© Ø§Ù„ÙƒØ§Ø´ ÙˆØ§Ù„Ø°Ù‡Ø¨');
    return{evaluation:ev,feedback:fb.length?fb.join('<br>'):null};
}

function updateResults(){
    const{score,breakdown}=calculateSafetyRating();
    const ev=getEvaluation(score);
    const pct=(score/10)*100;
    document.getElementById('safetyScore').textContent=score.toFixed(1)+'/10';
    document.getElementById('evaluationText').textContent=ev.evaluation;
    const pf=document.getElementById('progressFill'),pt=document.getElementById('progressText'),pd=document.getElementById('percentageDisplay'),pc=document.querySelector('.progress-container');
    pf.style.width=pct+'%';pt.textContent=Math.round(pct)+'%';pd.textContent=Math.round(pct)+'%';
    
    let pc2,bg,tc;
    if(score>=8){pc2='linear-gradient(90deg,#22c55e,#16a34a)';bg='#064e3b';tc='#4ade80';}
    else if(score>=6){pc2='linear-gradient(90deg,#eab308,#ca8a04)';bg='#422006';tc='#fde047';}
    else if(score>=4){pc2='linear-gradient(90deg,#f97316,#ea580c)';bg='#431407';tc='#fb923c';}
    else{pc2='linear-gradient(90deg,#ef4444,#dc2626)';bg='#450a0a';tc='#f87171';}
    
    pf.style.background=pc2;pc.style.background=bg;pd.style.background=tc;pd.style.color='#0f172a';
    const fb=document.getElementById('smartFeedback');
    if(ev.feedback){fb.innerHTML='<strong>Ù†ØµØ§Ø¦Ø­ Ø°ÙƒÙŠØ©:</strong><br>'+ev.feedback;fb.style.display='block';}else{fb.style.display='none';}
    const bi=document.getElementById('breakdownItems');
    bi.innerHTML=breakdown.map(i=>'<div class="breakdown-item"><span>'+i.label+'</span><span class="breakdown-value '+(i.isPenalty?'negative':'positive')+'">'+(!i.isPenalty?'+':'')+i.value.toFixed(1)+(i.max?' / '+i.max:'')+'</span></div>').join('');
    document.getElementById('scoreBreakdown').style.display='block';
}

function resetCalculator(){
    ['individualStocks','reitCount','etfCount','bondCount','largestStockPercentage','largestSectorPercentage'].forEach(id=>document.getElementById(id).value='');
    ['geographicDistribution','goldPercentage','hasCash','sectorDiversification','investmentHorizon','usesLeverage'].forEach(id=>document.getElementById(id).value='');
    document.getElementById('smartFeedback').style.display='none';
    document.getElementById('scoreBreakdown').style.display='none';
    document.getElementById('leverageWarning').style.display='none';
    document.getElementById('safetyScore').textContent='0/10';
    document.getElementById('evaluationText').textContent='Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…';
    document.getElementById('progressFill').style.width='0%';
    document.getElementById('progressText').textContent='0%';
    document.getElementById('percentageDisplay').textContent='0%';
}

document.querySelectorAll('input[type="number"],select').forEach(el=>{el.addEventListener('input',updateResults);el.addEventListener('change',updateResults);});
function toggleNavbar(){document.getElementById('navbarMenu').classList.toggle('open');}
</script>
</body>
</html>
